{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\jassem\\\\Desktop\\\\my_portfolio\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\jassem\\\\Desktop\\\\my_portfolio\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"C:\\\\Users\\\\jassem\\\\Desktop\\\\my_portfolio\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\jassem\\\\Desktop\\\\my_portfolio\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import React,{useState,useEffect}from\"react\";import{connect}from\"react-redux\";import WorkSpaceNewWork from\"./WorkSpaceNewWork\";import{setColor,setWhatIDid,setWork,setWorkId,setStyle,setImagesData}from\"../../../../Redux/WorksReducer\";import{useHttp}from\"../../../../hooks/http.hook\";var WorkSpaceNewWorkContainer=function WorkSpaceNewWorkContainer(props){var _useHttp=useHttp(),loading=_useHttp.loading,request=_useHttp.request;useEffect(function(){var getLastWorkData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var worksData,currentWorkId,worksColors,worksStyles,whatIDid,images;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return request(\"/api/works\",\"GET\",null);case 2:worksData=_context.sent;props.setWork(worksData);if(!(props.allWorks.length!==0)){_context.next=25;break;}_context.next=7;return worksData[worksData.length-1]._id;case 7:currentWorkId=_context.sent;props.setWorkId(currentWorkId);_context.next=11;return request(\"/api/works/colors/\".concat(currentWorkId),\"GET\",null);case 11:worksColors=_context.sent;props.setColor(worksColors);_context.next=15;return request(\"/api/works/textStyles/\".concat(currentWorkId),\"GET\",null);case 15:worksStyles=_context.sent;props.setStyle(worksStyles);_context.next=19;return request(\"/api/works/didPoint/\".concat(currentWorkId),\"GET\",null);case 19:whatIDid=_context.sent;props.setWhatIDid(whatIDid);_context.next=23;return request(\"/api/works/getPhotos/\".concat(currentWorkId),\"GET\",null);case 23:images=_context.sent;props.setImagesData(images);case 25:case\"end\":return _context.stop();}}},_callee);}));return function getLastWorkData(){return _ref.apply(this,arguments);};}();getLastWorkData();},[props.allWorks.length]);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),color=_useState2[0],setColor=_useState2[1];var onColorChange=function onColorChange(e){setColor(e.currentTarget.value);};var createWorkItem=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(formData){var worksData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return request(\"/api/works/create\",\"POST\",_objectSpread({},formData));case 3:_context2.next=5;return request(\"/api/works\",\"GET\",null);case 5:worksData=_context2.sent;props.setWork(worksData);formData.workName=\"\";formData.urlAdress=\"\";formData.workTitle=\"\";_context2.next=14;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](0);case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[0,12]]);}));return function createWorkItem(_x){return _ref2.apply(this,arguments);};}();var updateWorkItem=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(formData){var worksData,updatedData;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return request(\"/api/works\",\"GET\",null);case 3:worksData=_context3.sent;_context3.next=6;return request(\"/api/works/\".concat(worksData[worksData.length-1]._id),\"PATCH\",_objectSpread({},formData));case 6:updatedData=_context3.sent;_context3.next=11;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](0);case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,9]]);}));return function updateWorkItem(_x2){return _ref3.apply(this,arguments);};}();var createWorkColor=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(formData){var worksData,currentWorkId;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return request(\"/api/works\",\"GET\",null);case 3:worksData=_context4.sent;currentWorkId=worksData[worksData.length-1]._id;props.setWorkId(currentWorkId);_context4.next=8;return request(\"/api/works/create-color\",\"POST\",{id:currentWorkId,color:color});case 8:_context4.next=12;break;case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](0);case 12:case\"end\":return _context4.stop();}}},_callee4,null,[[0,10]]);}));return function createWorkColor(_x3){return _ref4.apply(this,arguments);};}();var createWorkStyle=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(formData){var worksData,currentWorkId;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return request(\"/api/works\",\"GET\",null);case 3:worksData=_context5.sent;currentWorkId=worksData[worksData.length-1]._id;props.setWorkId(currentWorkId);_context5.next=8;return request(\"/api/works/create-textStyle\",\"POST\",_objectSpread({id:currentWorkId},formData));case 8:_context5.next=12;break;case 10:_context5.prev=10;_context5.t0=_context5[\"catch\"](0);case 12:case\"end\":return _context5.stop();}}},_callee5,null,[[0,10]]);}));return function createWorkStyle(_x4){return _ref5.apply(this,arguments);};}();var createWorkDidPoint=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(formData){var worksData,currentWorkId;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;_context6.next=3;return request(\"/api/works\",\"GET\",null);case 3:worksData=_context6.sent;currentWorkId=worksData[worksData.length-1]._id;props.setWorkId(currentWorkId);_context6.next=8;return request(\"/api/works/create-didPoint\",\"POST\",_objectSpread({id:currentWorkId},formData));case 8:_context6.next=12;break;case 10:_context6.prev=10;_context6.t0=_context6[\"catch\"](0);case 12:case\"end\":return _context6.stop();}}},_callee6,null,[[0,10]]);}));return function createWorkDidPoint(_x5){return _ref6.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(WorkSpaceNewWork,{images:props.images,allWorks:props.allWorks//async req to server\n,updateWorkItem:updateWorkItem,createWorkItem:createWorkItem,createWorkColor:createWorkColor,createWorkStyle:createWorkStyle,createWorkDidPoint:createWorkDidPoint// my functions\n,onColorChange:onColorChange,setImagesData:props.setImagesData,currentWorkId:props.currentWorkId,loading:loading});};var mapStateToProps=function mapStateToProps(state){return{token:state.admin.token,allWorks:state.works.works,images:state.works.images,currentWorkId:state.works.currentWorkId};};export default connect(mapStateToProps,{setColor:setColor,setWhatIDid:setWhatIDid,setWork:setWork,setWorkId:setWorkId,setStyle:setStyle,setImagesData:setImagesData})(WorkSpaceNewWorkContainer);","map":{"version":3,"sources":["C:/Users/jassem/Desktop/my_portfolio/client/src/components/adminPanel/AdminPanelComponents/adminWorkSpace/WorkSpaceNewWorkContainer.js"],"names":["React","useState","useEffect","connect","WorkSpaceNewWork","setColor","setWhatIDid","setWork","setWorkId","setStyle","setImagesData","useHttp","WorkSpaceNewWorkContainer","props","loading","request","getLastWorkData","worksData","allWorks","length","_id","currentWorkId","worksColors","worksStyles","whatIDid","images","color","onColorChange","e","currentTarget","value","createWorkItem","formData","workName","urlAdress","workTitle","updateWorkItem","updatedData","createWorkColor","id","createWorkStyle","createWorkDidPoint","mapStateToProps","state","token","admin","works"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport WorkSpaceNewWork from \"./WorkSpaceNewWork\";\r\nimport {\r\n  setColor,\r\n  setWhatIDid,\r\n  setWork,\r\n  setWorkId,\r\n  setStyle,\r\n  setImagesData,\r\n} from \"../../../../Redux/WorksReducer\";\r\nimport { useHttp } from \"../../../../hooks/http.hook\";\r\n\r\nconst WorkSpaceNewWorkContainer = (props) => {\r\n  const { loading, request } = useHttp();\r\n  useEffect(() => {\r\n    const getLastWorkData = async () => {\r\n      const worksData = await request(\"/api/works\", \"GET\", null);\r\n      props.setWork(worksData);\r\n      if (props.allWorks.length !== 0) {\r\n        const currentWorkId = await worksData[worksData.length - 1]._id;\r\n        props.setWorkId(currentWorkId);\r\n        const worksColors = await request(`/api/works/colors/${currentWorkId}`, \"GET\", null);\r\n        props.setColor(worksColors);\r\n        const worksStyles = await request(`/api/works/textStyles/${currentWorkId}`, \"GET\", null);\r\n        props.setStyle(worksStyles);\r\n        const whatIDid = await request(`/api/works/didPoint/${currentWorkId}`, \"GET\", null);\r\n        props.setWhatIDid(whatIDid);\r\n        const images = await request(`/api/works/getPhotos/${currentWorkId}`, \"GET\", null);\r\n        props.setImagesData(images);\r\n      }\r\n    };\r\n    getLastWorkData();\r\n  }, [props.allWorks.length]);\r\n\r\n  let [color, setColor] = useState(null);\r\n  const onColorChange = (e) => {\r\n    setColor(e.currentTarget.value);\r\n  };\r\n\r\n  const createWorkItem = async (formData) => {\r\n    try {\r\n      await request(\"/api/works/create\", \"POST\", {\r\n        ...formData,\r\n      });\r\n      const worksData = await request(\"/api/works\", \"GET\", null);\r\n      props.setWork(worksData);\r\n      formData.workName = \"\";\r\n      formData.urlAdress = \"\";\r\n      formData.workTitle = \"\";\r\n    } catch (e) {}\r\n  };\r\n\r\n  const updateWorkItem = async (formData) => {\r\n    try {\r\n      const worksData = await request(\"/api/works\", \"GET\", null);\r\n      const updatedData = await request(\r\n        `/api/works/${worksData[worksData.length - 1]._id}`,\r\n        \"PATCH\",\r\n        {\r\n          ...formData,\r\n        }\r\n      );\r\n    } catch (e) {}\r\n  };\r\n\r\n  const createWorkColor = async (formData) => {\r\n    try {\r\n      const worksData = await request(\"/api/works\", \"GET\", null);\r\n      const currentWorkId = worksData[worksData.length - 1]._id;\r\n      props.setWorkId(currentWorkId);\r\n      await request(\"/api/works/create-color\", \"POST\", {\r\n        id: currentWorkId,\r\n        color: color,\r\n      });\r\n    } catch (e) {}\r\n  };\r\n\r\n  const createWorkStyle = async (formData) => {\r\n    try {\r\n      const worksData = await request(\"/api/works\", \"GET\", null);\r\n      const currentWorkId = worksData[worksData.length - 1]._id;\r\n      props.setWorkId(currentWorkId);\r\n      await request(\"/api/works/create-textStyle\", \"POST\", {\r\n        id: currentWorkId,\r\n        ...formData,\r\n      });\r\n    } catch (e) {}\r\n  };\r\n\r\n  const createWorkDidPoint = async (formData) => {\r\n    try {\r\n      const worksData = await request(\"/api/works\", \"GET\", null);\r\n      const currentWorkId = worksData[worksData.length - 1]._id;\r\n      props.setWorkId(currentWorkId);\r\n      await request(\"/api/works/create-didPoint\", \"POST\", {\r\n        id: currentWorkId,\r\n        ...formData,\r\n      });\r\n    } catch (e) {}\r\n  };\r\n\r\n  return (\r\n    <WorkSpaceNewWork\r\n      images={props.images}\r\n      allWorks={props.allWorks}\r\n      //async req to server\r\n      updateWorkItem={updateWorkItem}\r\n      createWorkItem={createWorkItem}\r\n      createWorkColor={createWorkColor}\r\n      createWorkStyle={createWorkStyle}\r\n      createWorkDidPoint={createWorkDidPoint}\r\n      // my functions\r\n      onColorChange={onColorChange}\r\n      setImagesData={props.setImagesData}\r\n      currentWorkId={props.currentWorkId}\r\n      loading={loading}\r\n    />\r\n  );\r\n};\r\n\r\nlet mapStateToProps = (state) => {\r\n  return {\r\n    token: state.admin.token,\r\n    allWorks: state.works.works,\r\n    images: state.works.images,\r\n    currentWorkId: state.works.currentWorkId,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n  setColor,\r\n  setWhatIDid,\r\n  setWork,\r\n  setWorkId,\r\n  setStyle,\r\n  setImagesData,\r\n})(WorkSpaceNewWorkContainer);\r\n"]},"metadata":{},"sourceType":"module"}