{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\jassem\\\\Desktop\\\\my_portfolio\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"C:\\\\Users\\\\jassem\\\\Desktop\\\\my_portfolio\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\jassem\\\\Desktop\\\\my_portfolio\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import React,{useEffect}from\"react\";import Article from\"./Article\";import{connect}from\"react-redux\";import{compose}from\"redux\";import{withRouter}from\"react-router-dom\";import{useHttp}from\"../../../hooks/http.hook\";import{setArticleId,setArticleName,setArticles,setArticlesMainImages,setArticleBlocks,setArticleBlocksImages,setArticleBlocksLists,setArticleBlocksTextAreas,uploadCurrentArticleComments}from\"../../../Redux/ArticlesReducer\";import{useState}from\"react\";var ArticleContainer=function ArticleContainer(props){var ArticleName=props.match.params.articleName;props.setArticleName(ArticleName);var _useHttp=useHttp(),loading=_useHttp.loading,request=_useHttp.request;useEffect(function(){var articles=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var articlesResponse,currentId,articlesImages,articlesBlocksresponse,articlesBlocksImages,articlesBlocksLists,articlesBlocksTextAreas,articleCommentsResponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(props.currentArticleName===ArticleName)){_context.next=31;break;}_context.next=3;return request(\"/api/articles/getArticle/\".concat(props.currentArticleName),\"GET\",null);case 3:articlesResponse=_context.sent;props.setArticles(articlesResponse);if(articlesResponse.length!==0){currentId=articlesResponse[0]._id;props.setArticleId(currentId);}if(!(props.currentArticleId!==0&&props.currentArticleId===articlesResponse[0]._id)){_context.next=31;break;}_context.next=9;return request(\"/api/articles/getArticleMainImages/\".concat(props.currentArticleId),\"GET\",null);case 9:articlesImages=_context.sent;props.setArticlesMainImages(articlesImages);_context.next=13;return request(\"/api/articles/getArticleBlockData/\".concat(props.currentArticleId),\"GET\",null);case 13:articlesBlocksresponse=_context.sent;props.setArticleBlocks(articlesBlocksresponse);_context.next=17;return request(\"/api/articles/getArticleBlockImages/\".concat(props.currentArticleId),\"GET\",null);case 17:articlesBlocksImages=_context.sent;props.setArticleBlocksImages(articlesBlocksImages);_context.next=21;return request(\"/api/articles/getArticleBlockLists/\".concat(props.currentArticleId),\"GET\",null);case 21:articlesBlocksLists=_context.sent;props.setArticleBlocksLists(articlesBlocksLists);_context.next=25;return request(\"/api/articles/getArticleBlockTextAreas/\".concat(props.currentArticleId),\"GET\",null);case 25:articlesBlocksTextAreas=_context.sent;props.setArticleBlocksTextAreas(articlesBlocksTextAreas);_context.next=29;return request(\"/api/articles/getArticleComments/\".concat(props.currentArticleId),\"GET\",null);case 29:articleCommentsResponse=_context.sent;props.uploadCurrentArticleComments(articleCommentsResponse);case 31:case\"end\":return _context.stop();}}},_callee);}));return function articles(){return _ref.apply(this,arguments);};}();articles();},[props.currentArticleId,props.currentArticleName]);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),like=_useState2[0],setLikeState=_useState2[1];var setLike=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var likes,plusLikeCounter;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:likes=parseInt(props.articles[0].likes);_context2.next=3;return request(\"/api/articles/\".concat(props.currentArticleId),\"PATCH\",{likes:likes?likes+1:1});case 3:plusLikeCounter=_context2.sent;setLikeState(true);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function setLike(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Article//props data\n,{loading:loading,articles:props.articles,currentArticleId:props.currentArticleId,articleImages:props.articleImages,blocks:props.blocks,blocksImages:props.blocksImages,blocksLists:props.blocksLists,blocksTextAreas:props.blocksTextAreas,articleComments:props.articleComments//functions\n,like:like,setLike:setLike}));};var mapStateToProps=function mapStateToProps(state){return{articles:state.articles.articles,currentArticleId:state.articles.currentArticleId,articleImages:state.articles.images,blocks:state.articles.blocks,currentBlockId:state.articles.currentBlockId,blocksImages:state.articles.blocksImages,blocksLists:state.articles.blocksLists,blocksTextAreas:state.articles.blocksTextAreas,currentArticleName:state.articles.currentArticleName};};export default compose(connect(mapStateToProps,{setArticleId:setArticleId,setArticleName:setArticleName,setArticles:setArticles,setArticlesMainImages:setArticlesMainImages,setArticleBlocks:setArticleBlocks,setArticleBlocksImages:setArticleBlocksImages,setArticleBlocksLists:setArticleBlocksLists,setArticleBlocksTextAreas:setArticleBlocksTextAreas,uploadCurrentArticleComments:uploadCurrentArticleComments}),withRouter)(ArticleContainer);","map":{"version":3,"sources":["C:/Users/jassem/Desktop/my_portfolio/client/src/components/BlogPage/BlogPageComponents/ArticleContainer.jsx"],"names":["React","useEffect","Article","connect","compose","withRouter","useHttp","setArticleId","setArticleName","setArticles","setArticlesMainImages","setArticleBlocks","setArticleBlocksImages","setArticleBlocksLists","setArticleBlocksTextAreas","uploadCurrentArticleComments","useState","ArticleContainer","props","ArticleName","match","params","articleName","loading","request","articles","currentArticleName","articlesResponse","length","currentId","_id","currentArticleId","articlesImages","articlesBlocksresponse","articlesBlocksImages","articlesBlocksLists","articlesBlocksTextAreas","articleCommentsResponse","like","setLikeState","setLike","likes","parseInt","plusLikeCounter","articleImages","blocks","blocksImages","blocksLists","blocksTextAreas","articleComments","mapStateToProps","state","images","currentBlockId"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport Article from \"./Article\";\r\nimport { connect } from \"react-redux\";\r\nimport { compose } from \"redux\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { useHttp } from \"../../../hooks/http.hook\";\r\nimport {\r\n  setArticleId,\r\n  setArticleName,\r\n  setArticles,\r\n  setArticlesMainImages,\r\n  setArticleBlocks,\r\n  setArticleBlocksImages,\r\n  setArticleBlocksLists,\r\n  setArticleBlocksTextAreas,\r\n  uploadCurrentArticleComments,\r\n} from \"../../../Redux/ArticlesReducer\";\r\nimport { useState } from \"react\";\r\n\r\nlet ArticleContainer = (props) => {\r\n  let ArticleName = props.match.params.articleName;\r\n  props.setArticleName(ArticleName);\r\n  const { loading, request } = useHttp();\r\n  useEffect(() => {\r\n    const articles = async () => {\r\n      // get all articles data\r\n      if (props.currentArticleName === ArticleName) {\r\n        const articlesResponse = await request(\r\n          `/api/articles/getArticle/${props.currentArticleName}`,\r\n          \"GET\",\r\n          null\r\n        );\r\n        props.setArticles(articlesResponse);\r\n        if (articlesResponse.length !== 0) {\r\n          const currentId = articlesResponse[0]._id;\r\n          props.setArticleId(currentId);\r\n        }\r\n        if (props.currentArticleId !== 0 && props.currentArticleId === articlesResponse[0]._id) {\r\n          const articlesImages = await request(\r\n            `/api/articles/getArticleMainImages/${props.currentArticleId}`,\r\n            \"GET\",\r\n            null\r\n          );\r\n          props.setArticlesMainImages(articlesImages);\r\n          const articlesBlocksresponse = await request(\r\n            `/api/articles/getArticleBlockData/${props.currentArticleId}`,\r\n            \"GET\",\r\n            null\r\n          );\r\n          props.setArticleBlocks(articlesBlocksresponse);\r\n          const articlesBlocksImages = await request(\r\n            `/api/articles/getArticleBlockImages/${props.currentArticleId}`,\r\n            \"GET\",\r\n            null\r\n          );\r\n          props.setArticleBlocksImages(articlesBlocksImages);\r\n          const articlesBlocksLists = await request(\r\n            `/api/articles/getArticleBlockLists/${props.currentArticleId}`,\r\n            \"GET\",\r\n            null\r\n          );\r\n          props.setArticleBlocksLists(articlesBlocksLists);\r\n          const articlesBlocksTextAreas = await request(\r\n            `/api/articles/getArticleBlockTextAreas/${props.currentArticleId}`,\r\n            \"GET\",\r\n            null\r\n          );\r\n          props.setArticleBlocksTextAreas(articlesBlocksTextAreas);\r\n          const articleCommentsResponse = await request(\r\n            `/api/articles/getArticleComments/${props.currentArticleId}`,\r\n            \"GET\",\r\n            null\r\n          );\r\n          props.uploadCurrentArticleComments(articleCommentsResponse);\r\n        }\r\n      }\r\n    };\r\n    articles();\r\n  }, [props.currentArticleId, props.currentArticleName]);\r\n\r\n  const [like, setLikeState] = useState(false);\r\n  const setLike = async () => {\r\n    const likes = parseInt(props.articles[0].likes);\r\n    const plusLikeCounter = await request(`/api/articles/${props.currentArticleId}`, \"PATCH\", {\r\n      likes: likes ? likes + 1 : 1,\r\n    });\r\n    setLikeState(true);\r\n  };\r\n  return (\r\n    <div>\r\n      <Article\r\n        //props data\r\n        loading={loading}\r\n        articles={props.articles}\r\n        currentArticleId={props.currentArticleId}\r\n        articleImages={props.articleImages}\r\n        blocks={props.blocks}\r\n        blocksImages={props.blocksImages}\r\n        blocksLists={props.blocksLists}\r\n        blocksTextAreas={props.blocksTextAreas}\r\n        articleComments={props.articleComments}\r\n        //functions\r\n        like={like}\r\n        setLike={setLike}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nlet mapStateToProps = (state) => {\r\n  return {\r\n    articles: state.articles.articles,\r\n    currentArticleId: state.articles.currentArticleId,\r\n    articleImages: state.articles.images,\r\n    blocks: state.articles.blocks,\r\n    currentBlockId: state.articles.currentBlockId,\r\n    blocksImages: state.articles.blocksImages,\r\n    blocksLists: state.articles.blocksLists,\r\n    blocksTextAreas: state.articles.blocksTextAreas,\r\n    currentArticleName: state.articles.currentArticleName,\r\n  };\r\n};\r\n\r\nexport default compose(\r\n  connect(mapStateToProps, {\r\n    setArticleId,\r\n    setArticleName,\r\n    setArticles,\r\n    setArticlesMainImages,\r\n    setArticleBlocks,\r\n    setArticleBlocksImages,\r\n    setArticleBlocksLists,\r\n    setArticleBlocksTextAreas,\r\n    uploadCurrentArticleComments,\r\n  }),\r\n  withRouter\r\n)(ArticleContainer);\r\n"]},"metadata":{},"sourceType":"module"}