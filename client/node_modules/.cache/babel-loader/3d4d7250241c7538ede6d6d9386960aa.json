{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\jassem\\\\Desktop\\\\my_portfolio\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _objectSpread from\"C:\\\\Users\\\\jassem\\\\Desktop\\\\my_portfolio\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:\\\\Users\\\\jassem\\\\Desktop\\\\my_portfolio\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import React from\"react\";import{connect}from\"react-redux\";import ArticleComments from\"./ArticleComments\";import{uploadCurrentArticleComments,uploadCurrentCommentId}from\"../../../Redux/ArticlesReducer\";import{useHttp}from\"../../../hooks/http.hook\";var ArticleCommentsContainer=function ArticleCommentsContainer(props){var _useHttp=useHttp(),request=_useHttp.request;var addArticleComment=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(formData){var articleCommentsResponse,comments,plusLikeCounter;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return request(\"/api/articles/createArticleComment\",\"POST\",_objectSpread(_objectSpread({},formData),{},{articleOwner:props.currentArticleId}));case 3:_context.next=5;return request(\"/api/articles/getArticleComments/\".concat(props.currentArticleId),\"GET\",null);case 5:articleCommentsResponse=_context.sent;comments=parseInt(props.articles[0].comments);_context.next=9;return request(\"/api/articles/\".concat(props.currentArticleId),\"PATCH\",{comments:comments?comments+1:1});case 9:plusLikeCounter=_context.sent;props.uploadCurrentArticleComments(articleCommentsResponse);formData.userName=\"\";formData.CommentText=\"\";_context.next=17;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,15]]);}));return function addArticleComment(_x){return _ref.apply(this,arguments);};}();var addArticleCommentAnswer=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(formData){var articleCommentsResponse,comments,plusLikeCounter;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return request(\"/api/articles/createArticleComment\",\"POST\",_objectSpread(_objectSpread({},formData),{},{articleOwner:props.currentArticleId,commentOwner:props.currentCommentId}));case 3:_context2.next=5;return request(\"/api/articles/getArticleComments/\".concat(props.currentArticleId),\"GET\",null);case 5:articleCommentsResponse=_context2.sent;comments=parseInt(props.articles[0].comments);_context2.next=9;return request(\"/api/articles/\".concat(props.currentArticleId),\"PATCH\",{comments:comments?comments+1:1});case 9:plusLikeCounter=_context2.sent;props.uploadCurrentArticleComments(articleCommentsResponse);props.uploadCurrentCommentId(null);_context2.next=16;break;case 14:_context2.prev=14;_context2.t0=_context2[\"catch\"](0);case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[0,14]]);}));return function addArticleCommentAnswer(_x2){return _ref2.apply(this,arguments);};}();var addAnswer=function addAnswer(e){props.uploadCurrentCommentId(e.currentTarget.id);};return/*#__PURE__*/React.createElement(ArticleComments// props\n,{articleComments:props.articleComments,currentCommentId:props.currentCommentId// functions\n,addArticleComment:addArticleComment,addArticleCommentAnswer:addArticleCommentAnswer,addAnswer:addAnswer});};var mapStateToProps=function mapStateToProps(state){return{articles:state.articles.articles,articleComments:state.articles.articleComments,currentArticleId:state.articles.currentArticleId,currentCommentId:state.articles.currentCommentId};};export default connect(mapStateToProps,{uploadCurrentArticleComments:uploadCurrentArticleComments,uploadCurrentCommentId:uploadCurrentCommentId})(ArticleCommentsContainer);","map":{"version":3,"sources":["C:/Users/jassem/Desktop/my_portfolio/client/src/components/BlogPage/BlogPageComponents/ArticleCommentsContainer.js"],"names":["React","connect","ArticleComments","uploadCurrentArticleComments","uploadCurrentCommentId","useHttp","ArticleCommentsContainer","props","request","addArticleComment","formData","articleOwner","currentArticleId","articleCommentsResponse","comments","parseInt","articles","plusLikeCounter","userName","CommentText","addArticleCommentAnswer","commentOwner","currentCommentId","addAnswer","e","currentTarget","id","articleComments","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport ArticleComments from \"./ArticleComments\";\r\nimport {\r\n  uploadCurrentArticleComments,\r\n  uploadCurrentCommentId,\r\n} from \"../../../Redux/ArticlesReducer\";\r\nimport { useHttp } from \"../../../hooks/http.hook\";\r\n\r\nconst ArticleCommentsContainer = (props) => {\r\n  const { request } = useHttp();\r\n  const addArticleComment = async (formData) => {\r\n    try {\r\n      await request(\"/api/articles/createArticleComment\", \"POST\", {\r\n        ...formData,\r\n        articleOwner: props.currentArticleId,\r\n      });\r\n      const articleCommentsResponse = await request(\r\n        `/api/articles/getArticleComments/${props.currentArticleId}`,\r\n        \"GET\",\r\n        null\r\n      );\r\n      const comments = parseInt(props.articles[0].comments);\r\n      const plusLikeCounter = await request(`/api/articles/${props.currentArticleId}`, \"PATCH\", {\r\n        comments: comments ? comments + 1 : 1,\r\n      });\r\n      props.uploadCurrentArticleComments(articleCommentsResponse);\r\n      formData.userName = \"\";\r\n      formData.CommentText = \"\";\r\n    } catch (e) {}\r\n  };\r\n\r\n  const addArticleCommentAnswer = async (formData) => {\r\n    try {\r\n      await request(\"/api/articles/createArticleComment\", \"POST\", {\r\n        ...formData,\r\n        articleOwner: props.currentArticleId,\r\n        commentOwner: props.currentCommentId,\r\n      });\r\n      const articleCommentsResponse = await request(\r\n        `/api/articles/getArticleComments/${props.currentArticleId}`,\r\n        \"GET\",\r\n        null\r\n      );\r\n      const comments = parseInt(props.articles[0].comments);\r\n      const plusLikeCounter = await request(`/api/articles/${props.currentArticleId}`, \"PATCH\", {\r\n        comments: comments ? comments + 1 : 1,\r\n      });\r\n      props.uploadCurrentArticleComments(articleCommentsResponse);\r\n      props.uploadCurrentCommentId(null);\r\n    } catch (e) {}\r\n  };\r\n  const addAnswer = (e) => {\r\n    props.uploadCurrentCommentId(e.currentTarget.id);\r\n  };\r\n\r\n  return (\r\n    <ArticleComments\r\n      // props\r\n      articleComments={props.articleComments}\r\n      currentCommentId={props.currentCommentId}\r\n      // functions\r\n      addArticleComment={addArticleComment}\r\n      addArticleCommentAnswer={addArticleCommentAnswer}\r\n      addAnswer={addAnswer}\r\n    />\r\n  );\r\n};\r\n\r\nlet mapStateToProps = (state) => {\r\n  return {\r\n    articles: state.articles.articles,\r\n    articleComments: state.articles.articleComments,\r\n    currentArticleId: state.articles.currentArticleId,\r\n    currentCommentId: state.articles.currentCommentId,\r\n  };\r\n};\r\nexport default connect(mapStateToProps, { uploadCurrentArticleComments, uploadCurrentCommentId })(\r\n  ArticleCommentsContainer\r\n);\r\n"]},"metadata":{},"sourceType":"module"}