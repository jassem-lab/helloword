{"version":3,"sources":["../../node_modules/react-filepond/dist/react-filepond.js","../../node_modules/filepond-plugin-image-exif-orientation/dist/filepond-plugin-image-exif-orientation.js","../../node_modules/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.js","../../node_modules/filepond-plugin-file-encode/dist/filepond-plugin-file-encode.js","../../node_modules/filepond-plugin-image-resize/dist/filepond-plugin-image-resize.js","../../../../node_modules/react/index.js","../../../../node_modules/react/cjs/react.production.min.js","../../../../node_modules/object-assign/index.js","../../node_modules/filepond/dist/filepond.js"],"names":["Object","defineProperty","exports","value","FilePond","FileStatus","registerPlugin","undefined","obj","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_react","require","_react2","__esModule","default","_filepond","isSupported","supported","filteredMethods","_React$Component","instance","TypeError","_classCallCheck","this","_this","self","call","ReferenceError","_possibleConstructorReturn","__proto__","getPrototypeOf","allowFilesSync","subClass","superClass","create","constructor","setPrototypeOf","_inherits","_this2","options","assign","onupdatefiles","cb","items","_pond","_element","keys","filter","includes","forEach","destroy","setOptions","_this3","_props","id","name","className","allowMultiple","required","captureMethod","acceptedFileTypes","createElement","type","accept","multiple","capture","ref","element","Component","module","Marker","getUint16","view","offset","little","arguments","getUint32","IS_BROWSER","window","document","shouldCorrect","testImage","Image","onload","naturalWidth","naturalHeight","src","plugin","_ref","addFilter","utils","Type","isFile","item","_ref2","query","Promise","resolve","reject","file","test","isJPEG","reader","FileReader","e","DataView","result","byteLength","marker","tags","readAsArrayBuffer","slice","getImageOrientation","then","orientation","setMetadata","allowImageExifOrientation","BOOLEAN","dispatchEvent","CustomEvent","detail","factory","_AwaitValue","wrapped","_AsyncGenerator","gen","front","back","resume","arg","wrappedAwait","settle","done","err","next","_invoke","request","return","_slicedToArray","arr","_arrayWithHoles","_arr","_n","_d","_e","_s","_i","Symbol","iterator","push","_iterableToArrayLimit","_nonIterableRest","Array","isArray","asyncIterator","throw","vectorMultiply","v","amount","createVector","x","y","vectorAdd","a","b","vectorRotate","radians","origin","cos","Math","sin","t","getMarkupValue","size","scalar","axis","parseFloat","min","width","height","isDefined","setAttributes","attr","setAttribute","svg","tag","createElementNS","IMAGE_FIT_STYLE","contain","cover","TEXT_ANCHOR","left","center","right","createShape","node","markup","CREATE_TYPE_ROUTES","image","shape","opacity","setAttributeNS","rect","ellipse","text","path","line","appendChild","begin","end","UPDATE_TYPE_ROUTES","styles","cx","cy","rx","ry","preserveAspectRatio","fit","scale","fontSize","fontFamily","fontWeight","textAlign","textContent","points","fill","d","map","point","index","concat","join","childNodes","x1","y1","x2","y2","lineDecoration","style","display","l","sqrt","vectorNormalize","indexOf","arrowBeginRotationPoint","arrowBeginCenter","arrowBeginA","arrowBeginB","arrowEndRotationPoint","arrowEndCenter","arrowEndA","arrowEndB","updateMarkupByType","top","bottom","getMarkupRect","lineStyle","borderStyle","backgroundColor","fontColor","stroke","borderColor","lineColor","strokeWidth","borderWidth","lineWidth","lineCap","lineJoin","getMarkupStyles","MARKUP_RECT","prepareMarkup","_markup","reduce","prev","curr","zIndex","sortMarkupByZIndex","createMarkupView","_","createView","ignoreRect","mixins","apis","write","root","dirty","crop","resize","viewWidth","viewHeight","cropWidth","cropHeight","_size","outputWidth","outputHeight","outputFit","mode","outputUpscale","upscale","shouldUpscale","scalarWidth","scalarHeight","max","innerHTML","markupFilter","sort","settings","createMarkupByType","createVector$1","vectorSubtract","vectorDistance","vectorDot","vectorDistanceSquared","getOffsetPointOnEdge","rotation","B","C","sinA","sinB","sinC","cosC","ratio","calculateCanvasSize","canvasAspectRatio","zoom","imageAspectRatio","canvasWidth","canvasHeight","imgWidth","imgHeight","getImageRectZoomFactor","imageRect","cropRect","imageWidth","imageHeight","rotatedCropSize","w","h","hor","ver","tl","abs","tr","bl","getRotatedRectSize","getCenteredCropRect","container","aspectRatio","IMAGE_SCALE_SPRING_PROPS","stiffness","damping","mass","createClipView","animations","duration","didWriteView","_ref4","background","_ref5","appendChildView","createChildView","originX","originY","scaleX","scaleY","translateX","translateY","rotateZ","bitmap","createBitmapView","_ref3","flip","horizontal","vertical","createImageCanvasWrapper","createMarkup","destroyMarkup","removeChildView","transparencyIndicator","dataset","_ref6","shouldOptimize","stage","translation","PI","cropAspectRatio","shouldLimit","scaleToFit","stageZoomFactor","imageSize","canvasSize","canvasCenter","widthFloat","heightFloat","round","getCurrentCropSize","imageView","SVG_MASK","checkedMyBases","SVGMaskUniqueId","BitmapWorker","onmessage","createImageBitmap","data","message","postMessage","ColorMatrixWorker","imageData","matrix","colorMatrix","m11","m12","m13","m14","m15","m21","m22","m23","m24","m25","m31","m32","m33","m34","m35","m41","m42","m43","m44","m45","r","g","buffer","transforms","1","2","3","4","5","6","7","8","createPreviewImage","canvas","ctx","getContext","transform","apply","fixImageOrientation","drawImage","isBitmap","calculateAverageColor","ceil","getImageData","averageColor","c","floor","createImageWrapperView","OverlayView","querySelector","replace","location","href","hash","classList","add","status","ImageView","_ref7","clip","_ref8","hidden","containerWidth","inner","containerHeight","fixedPreviewHeight","minPreviewHeight","maxPreviewHeight","panelAspectRatio","clipHeight","clipWidth","createImageView","createWorker","applyFilter","ImageData","createImageData","set","Uint8ClampedArray","cloneImageData","putImageData","worker","post","response","terminate","pushImage","getMetadata","childViews","images","setTimeout","dispatch","restoreOverlay","_ref9","overlayShadow","overlayError","overlaySuccess","didThrowError","_ref10","_ref12","imageViewBin","_ref13","_ref14","createRoute","DID_IMAGE_PREVIEW_DRAW","DID_IMAGE_PREVIEW_CONTAINER_CREATE","url","getImageSize","URL","createObjectURL","DID_FINISH_CALCULATE_PREVIEWSIZE","fileURL","loadPreviewFallback","img","crossOrigin","onerror","previewImageLoaded","revokeObjectURL","pixelDensityFactor","devicePixelRatio","scaleFactor","previewImageRatio","previewContainerWidth","previewContainerHeight","previewImage","close","isFirefox","navigator","userAgent","match","parseInt","canCreateImageBitmap","imageBitmap","DID_UPDATE_ITEM_METADATA","action","change","_imageView","shift","shiftImage","updateImage","DID_THROW_ITEM_LOAD_ERROR","DID_THROW_ITEM_PROCESSING_ERROR","DID_THROW_ITEM_INVALID","DID_COMPLETE_ITEM_PROCESSING","_ref11","DID_START_ITEM_PROCESSING","DID_REVERT_ITEM_PROCESSING","_ref15","viewsToRemove","_destroy","removeImageView","fpAPI","imagePreviewView","viewAPI","is","didResizeView","shouldRescale","registerWriter","DID_RESIZE_ROOT","DID_STOP_RESIZE","DID_LOAD_ITEM","archived","isPreviewableImage","supportsCreateImageBitmap","maxPreviewFileSize","imagePreview","queue","DID_IMAGE_PREVIEW_CALCULATE_SIZE","shouldDrawPreview","itemPanelAspectRatio","fixedHeight","_root$ref","previewAspectRatio","previewHeightMax","itemWidth","previewHeight","rescaleItem","requestAnimationFrame","allowImagePreview","imagePreviewFilterItem","FUNCTION","imagePreviewHeight","INT","imagePreviewMinHeight","imagePreviewMaxHeight","imagePreviewMaxFileSize","imagePreviewZoomFactor","imagePreviewUpscale","imagePreviewMaxInstantPreviewFileSize","imagePreviewTransparencyIndicator","STRING","imagePreviewCalculateAverageImageColor","imagePreviewMarkupShow","imagePreviewMarkupFilter","DataURIWorker","convert","onloadend","readAsDataURL","encode","base64Cache","extend","fileType","shouldPrepareOutput","metadata","all","Blob","dataItems","DID_PREPARE_OUTPUT","cache","JSON","stringify","DID_REMOVE_ITEM","allowFileEncode","isImage","targetWidth","targetHeight","allowImageResize","imageResizeMode","imageResizeUpscale","imageResizeTargetWidth","imageResizeTargetHeight","n","p","Fragment","StrictMode","Profiler","q","Suspense","u","for","z","encodeURIComponent","A","isMounted","enqueueForceUpdate","enqueueReplaceState","enqueueSetState","context","refs","updater","D","E","isReactComponent","setState","Error","forceUpdate","F","isPureReactComponent","G","current","H","hasOwnProperty","I","__self","__source","J","k","children","f","m","defaultProps","$$typeof","_owner","L","M","N","escape","toString","O","K","P","Q","_status","_result","R","S","T","ReactCurrentDispatcher","ReactCurrentBatchConfig","suspense","ReactCurrentOwner","IsSomeRendererActing","Children","count","toArray","only","PureComponent","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","cloneElement","createContext","_calculateChangedBits","_currentValue","_currentValue2","_threadCount","Provider","Consumer","_context","createFactory","bind","createRef","forwardRef","render","isValidElement","lazy","_payload","_init","memo","compare","useCallback","useContext","useDebugValue","useEffect","useImperativeHandle","useLayoutEffect","useMemo","useReducer","useRef","useState","version","getOwnPropertySymbols","propIsEnumerable","propertyIsEnumerable","toObject","val","test1","String","getOwnPropertyNames","test2","fromCharCode","test3","split","letter","shouldUseNative","source","from","symbols","to","s","isNode","HTMLElement","createStore","initialState","queries","actions","state","actionQueue","dispatchQueue","getState","processActionQueue","processDispatchQueue","isBlocking","actionHandlers","str","_queryHandles","_len","args","_key","queryHandles","api","forin","createObject","definition","property","getAttribute","hasAttribute","ns","svgElements","isSVGElement","attributes","parent","child","insertBefore","splice","parentNode","removeChild","isBrowser","getChildCount","el","getViewRect","elementRect","outer","childView","isRectIgnored","childViewRect","expandRect","calculateRectSize","marginBottom","marginRight","isNumber","thereYet","position","destination","velocity","errorMargin","easeInOutQuad","animator","spring","_ref$stiffness","_ref$damping","_ref$mass","resting","interpolate","ts","skipToEndState","onupdate","oncomplete","setTarget","get","tween","_ref$duration","_ref$easing","easing","_ref$delay","delay","start","reverse","createAnimator","category","def","addGetSet","overwrite","o","getter","setter","defaults","rotateX","rotateY","propsHaveChanged","currentProps","newProps","prop","applyStyles","perspective","elementCurrentStyle","cssText","Mixins","mixinConfig","viewProps","viewInternalAPI","viewExternalAPI","initialProps","getRect","listeners","viewState","events","fn","addEventListener","remove","removeEventListener","removeEvent","on","off","findIndex","event","animation","updateRect","layoutCalculated","paddingTop","marginTop","marginLeft","offsetLeft","offsetTop","offsetWidth","offsetHeight","scrollTop","offsetParent","_ref$tag","_ref$name","_ref$attributes","_ref$read","read","_ref$write","_ref$create","_ref$destroy","_ref$filterFrameActio","filterFrameActionsForChild","_ref$didCreateView","didCreateView","_ref$didWriteView","_ref$ignoreRect","_ref$ignoreRectUpdate","ignoreRectUpdate","_ref$mixins","store","getComputedStyle","frameRect","isResting","activeMixins","writers","readers","destroyers","getElement","getChildViews","getReference","getStyle","_read","internalAPI","_write","frameActions","writer","timestamp","mixin","destroyer","sharedAPIDefinition","internalAPIDefinition","needle","linkView","unlinkView","registerReader","registerDestroyer","invalidateLayout","externalAPIDefinition","mixinAPIDefinition","mixinAPI","childCount","routes","_ref$actions","newNode","referenceNode","insertAfter","nextSibling","isEmpty","trim","isBoolean","toBoolean","isString","toNumber","toInt","toFloat","isInt","isFinite","toBytes","naturalFileSize","isFunction","methods","process","patch","revert","fetch","restore","load","createAction","outline","method","timeout","headers","withCredentials","ondata","parts","header","isObject","getType","isNull","isAPI","conversionTable","array","splitter","boolean","int","number","float","bytes","string","function","levels","level","toFunctionReference","serverapi","createServerAPI","object","parse","getValueByType","newValue","defaultValue","valueType","newValueType","convertedValue","option","createOptions","optionDefinition","currentValue","createOption","createInitialState","listUpdateTimeout","itemUpdateTimeout","processingQueue","fromCamels","separator","part","toLowerCase","createOptionAPI","toUpperCase","createOptionActions","createOptionQueries","InteractionMethod","getUniqueId","random","substr","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","sourceSymbolKeys","_toConsumableArray","arr2","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","iter","arrayRemove","listener","_fire","sync","run","fireSync","fire","_len2","_key2","onOnce","_cb","copyObjectPropertiesToObject","getOwnPropertyDescriptor","PRIVATE","createItemAPI","removeReleasedItems","released","ItemStatus","INIT","IDLE","PROCESSING_QUEUED","PROCESSING","PROCESSING_COMPLETE","PROCESSING_ERROR","PROCESSING_REVERT_ERROR","LOADING","LOAD_ERROR","FileOrigin","INPUT","LIMBO","LOCAL","getNonNumeric","exec","getDecimalSeparator","toLocaleString","NUMBER","ARRAY","OBJECT","ACTION","SERVER_API","REGEX","filters","applyFilterChain","matchingFilters","initialFilter","catch","error","applyFilters","getOptions","defaultOptions","disabled","allowSyncAcceptAttribute","allowDrop","allowBrowse","allowPaste","allowReplace","allowRevert","allowProcess","allowReorder","allowDirectoriesOnly","forceRevert","maxFiles","checkValidity","itemInsertLocationFreedom","itemInsertLocation","itemInsertInterval","dropOnPage","dropOnElement","dropValidation","ignoredFiles","instantUpload","maxParallelUploads","chunkUploads","chunkForce","chunkSize","chunkRetryDelays","server","labelDecimalSeparator","labelThousandsSeparator","decimalSeparator","thousandsStringWithSeparator","getThousandsSeparator","labelIdle","labelInvalidField","labelFileWaitingForSize","labelFileSizeNotAvailable","labelFileCountSingular","labelFileCountPlural","labelFileLoading","labelFileAdded","labelFileLoadError","labelFileRemoved","labelFileRemoveError","labelFileProcessing","labelFileProcessingComplete","labelFileProcessingAborted","labelFileProcessingError","labelFileProcessingRevertError","labelTapToCancel","labelTapToRetry","labelTapToUndo","labelButtonRemoveItem","labelButtonAbortItemLoad","labelButtonRetryItemLoad","labelButtonAbortItemProcessing","labelButtonUndoItemProcessing","labelButtonRetryItemProcessing","labelButtonProcessItem","iconRemove","iconProcess","iconRetry","iconUndo","iconDone","oninit","onwarning","onactivatefile","oninitfile","onaddfilestart","onaddfileprogress","onaddfile","onprocessfilestart","onprocessfileprogress","onprocessfileabort","onprocessfilerevert","onprocessfile","onprocessfiles","onremovefile","onpreparefile","onreorderfiles","beforeDropFile","beforeAddFile","beforeRemoveFile","stylePanelLayout","stylePanelAspectRatio","styleItemPanelAspectRatio","styleButtonRemoveItemPosition","styleButtonProcessItemPosition","styleLoadIndicatorPosition","styleProgressIndicatorPosition","styleButtonRemoveItemAlign","files","getItemByQuery","find","getNumericAspectRatioFromString","getActiveItems","Status","EMPTY","ERROR","BUSY","READY","ITEM_ERROR","ITEM_BUSY","ITEM_READY","isItemInErrorState","isItemInBusyState","isItemInReadyState","GET_STATUS","some","GET_ITEM","GET_ACTIVE_ITEM","GET_ACTIVE_ITEMS","GET_ITEMS","GET_ITEM_NAME","filename","GET_ITEM_SIZE","fileSize","GET_STYLES","GET_PANEL_ASPECT_RATIO","GET_ITEM_PANEL_ASPECT_RATIO","GET_ITEMS_BY_STATUS","GET_TOTAL_ITEMS","IS_ASYNC","limit","isBase64DataURI","getFilenameFromURL","pop","getExtensionFromFilename","guesstimateExtension","subtype","leftPad","padding","getDateString","date","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getFileFromBlob","blob","extension","lastModifiedDate","_relativePath","createBlob","arrayBuffer","mimeType","BB","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","bb","append","getBlob","getMimeTypeFromBase64DataURI","dataURI","getBlobFromBase64DataURI","byteString","ab","ArrayBuffer","ia","Uint8Array","charCodeAt","getBlobFromByteStringWithMimeType","atob","getBase64DataFromBase64DataURI","getByteStringFromBase64DataURI","getFileNameFromHeader","matches","decodeURI","getFileSizeFromHeader","getTranfserIdFromHeader","getFileInfoFromHeaders","info","rows","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","createFileLoader","fetchFn","complete","progress","loadURL","now","body","code","computable","total","fileinfo","setSource","getProgress","abort","File","isGet","sendRequest","onheaders","onprogress","ontimeout","onabort","aborted","xhr","headersReceived","encodeURI","XMLHttpRequest","upload","lengthComputable","loaded","onreadystatechange","readyState","open","unescape","setRequestHeader","responseType","send","createResponse","createTimeoutResponse","getAllResponseHeaders","hasQS","buildURL","createFetchFunction","apiUrl","res","statusText","ChunkStatus","processFileChunked","transfer","chunks","chunkTransferId","chunkServer","serverId","fd","getResponseHeader","lastChunkIndex","retries","canProcessChunk","chunk","processChunk","requestUrl","processChunks","updateTotalProgress","retryProcessChunk","every","clearTimeout","totalBytesTransfered","totalSize","requestParams","requestTransferOffset","formData","FormData","requestTransferId","createFileProcessorFunction","canChunkUpload","shouldChunkUpload","willChunkUpload","createRevertFunction","uniqueFileId","getRandomNumber","createFileProcessor","processFn","perceivedProgress","perceivedPerformanceUpdater","perceivedDuration","clear","progressFn","completeFn","tickMin","tickMax","tick","runtime","createPerceivedPerformanceUpdater","transferId","getDuration","reset","getFilenameWithoutExtension","lastIndexOf","createFileStub","deepCloneObject","getItemById","itemId","getItemIndexByQuery","fetchBlob","getDomainFromURL","protocol","dynamicLabel","label","listUpdated","optionalPromise","params","sortItems","getItemByQueryFromState","itemHandler","_ref$success","success","_ref$failure","failure","ABORT_ALL","freeze","abortLoad","abortProcessing","DID_SET_FILES","_ref2$value","activeItems","interactionMethod","doUpload","MOVE_ITEM","currentIndex","SORT","ADD_ITEMS","_ref6$success","_ref6$failure","insertLocation","totalItems","promises","ADD_ITEM","_ref7$index","_ref7$success","_ref7$failure","_ref7$options","maxFileCount","hasRoomForItem","_item","serverFileReference","frozen","processingAborted","activeLoader","activeProcessor","abortProcessingRequestComplete","setStatus","getFileExtension","getFileType","getFileSize","getFile","loader","meta","retryLoad","processor","onprocess","console","requestProcessing","revertFileUpload","_setMetadata","silent","last","filenameWithoutExtension","fileExtension","relativePath","handler","itemAPI","release","archive","createItem","arrayInsert","insertItem","mainStatus","main","sub","handleAdd","shouldAdd","loadComplete","isExternalURL","REQUEST_PREPARE_OUTPUT","_ref9$failure","COMPLETE_LOAD_ITEM","RETRY_ITEM_LOAD","REQUEST_ITEM_PREPARE","_success","output","REQUEST_ITEM_PROCESSING","processNow","PROCESS_ITEM","processNext","queueEntry","itemReference","createProcessorFunction","RETRY_ITEM_PROCESSING","REQUEST_REMOVE_ITEM","shouldRemove","RELEASE_ITEM","REMOVE_ITEM","removeFromView","ABORT_ITEM_LOAD","ABORT_ITEM_PROCESSING","REQUEST_REVERT_ITEM_PROCESSING","handleRevert","shouldRevert","requestRemoveResult","REVERT_ITEM_PROCESSING","isMockItem","SET_OPTIONS","createElement$1","tagName","textNode","nodeValue","createTextNode","polarToCartesian","centerX","centerY","radius","angleInDegrees","angleInRadians","percentageArc","arcSweep","startAngle","endAngle","describeArc","progressIndicator","spin","align","ringStrokeWidth","ringFrom","ringTo","coordinates","fileActionButton","icon","isDisabled","shouldDisable","removeAttribute","toNaturalFileSize","MB","KB","GB","removeDecimalsWhenZero","decimalCount","toFixed","updateFile","fileName","updateFileSizeOnError","fileInfo","DID_UPDATE_ITEM_META","toPercentage","didSetItemLoadProgress","title","fileStatus","DID_REQUEST_ITEM_PROCESSING","DID_ABORT_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_UPDATE_ITEM_LOAD_PROGRESS","DID_THROW_ITEM_PROCESSING_REVERT_ERROR","DID_THROW_ITEM_REMOVE_ERROR","Buttons","AbortItemLoad","RetryItemLoad","RemoveItem","ProcessItem","AbortItemProcessing","RetryItemProcessing","RevertItemProcessing","ButtonKeys","calculateFileInfoOffset","buttonRect","buttonRemoveItem","calculateButtonWidth","buttonAbortItemLoad","calculateFileVerticalCenterOffset","calculateFileHorizontalCenterOffset","getRemoveIndicatorAligment","DefaultStyle","buttonRetryItemLoad","buttonProcessItem","buttonAbortItemProcessing","buttonRetryItemProcessing","buttonRevertItemProcessing","loadProgressIndicator","processProgressIndicator","processingCompleteIndicator","IdleStyle","ProcessingStyle","StyleMap","DID_START_ITEM_LOAD","DID_START_ITEM_REMOVE","DID_LOAD_LOCAL_ITEM","processingCompleteIndicatorView","route","DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING","DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD","DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL","buttonAbortItemRemoval","buttonFilter","isAsync","alignRemoveItemButton","enabledButtons","_map","buttonView","stopPropagation","loadIndicatorView","progressIndicatorView","activeStyles","stylesToApply","defaultStyles","control","fileWrapper","PANEL_SPRING_PROPS","createSection","section","viewConstructor","panel","scalable","topRect","bottomRect","ITEM_TRANSLATE_SPRING","StateMap","route$1","DID_UPDATE_PANEL_HEIGHT","write$4","DID_GRAB_ITEM","dragOrigin","DID_DRAG_ITEM","dragState","DID_DROP_ITEM","dragOffset","currentState","filepondItemState","handleClick","markedForRemoval","isPrimary","removedActivateListener","pageX","pageY","dragCenter","offsetX","offsetY","itemIds","prevIndex","setIndex","getIndex","getItemIndex","createDragHelper","drag","preventDefault","drop","getItemIndexByPosition","positionInView","horizontalSpace","itemRect","itemHorizontalMargin","itemsPerRow","childMid","itemVerticalMargin","itemHeight","_index","itemTop","itemRight","itemBottom","dropAreaDimensions","setDimensions","moveItem","vx","vy","spawnDate","introItemView","getItemHeight","route$2","DID_ADD_ITEM","addIndex","cooldown","dist","lastItemSpanwDate","numItems","oldIndex","dragPosition","dragHeight","dragWidth","cols","setHeight","setWidth","getGridIndex","getHeight","getWidth","getColIndex","visibleChildren","idx","childHeight","childBottom","childTop","list","dragCoordinates","dragIndex","dragIndexOffset","removeIndexOffset","addIndexOffset","childRect","visualHeight","prevX","prevY","visualIndex","indexX","indexY","vectorX","sign","vectorY","route$3","DID_DRAG","scopeLeft","scopeTop","DID_END_DRAG","listScroller","overflowing","overflow","newHeight","attrToggle","enabledValue","setAcceptedFileTypes","toggleAllowMultiple","toggleDirectoryFilter","toggleDisabled","doesAllowBrowse","disableField","toggleRequired","setCaptureMethod","updateRequiredStatus","setCustomValidity","browser","handleChange","webkitRelativePath","input","form","resetFileInput","DID_SET_DISABLED","DID_SET_ALLOW_BROWSE","DID_SET_ALLOW_DIRECTORIES_ONLY","DID_SET_ALLOW_MULTIPLE","DID_SET_ACCEPTED_FILE_TYPES","DID_SET_CAPTURE_METHOD","DID_SET_REQUIRED","Key","updateLabelValue","clickable","dropLabel","handleKeyDown","keyCode","click","contains","caption","DID_SET_LABEL_IDLE","route$4","addBlob","DID_DROP","drip","getField","fields","syncFieldPositionsWithItems","didReorderItems","write$8","dataContainer","field","DID_DEFINE_VALUE","DID_REORDER_ITEMS","DID_SORT_ITEMS","text$1","zip","epub","guesstimateMimeType","requestDataTransferItems","dataTransfer","links","getLinks","hasFiles","getFiles","promisedFiles","isFileSystemItem","getFilesFromItem","returnedFileGroups","group","isEntry","entry","getAsEntry","isDirectory","kind","isDirectoryEntry","getFilesInDirectory","getAsFile","dirCounter","fileCounter","resolveIfDone","readEntries","dirEntry","directoryReader","createReader","readBatch","entries","correctedFile","correctMissingFileType","fullPath","webkitGetAsEntry","getLinksFromTransferMetaData","getLinksFromTransferURLData","getData","dragNDropObservers","eventPosition","pageLeft","pageTop","layerX","layerY","getDragNDropObserver","observer","newObserver","createDragNDropObserver","clients","dragenter","dragover","dragleave","handlers","createHandler","addListener","client","isEventTarget","elementAtPosition","elementFromPoint","getRootNode","pageXOffset","pageYOffset","initialTarget","setDropEffect","effect","dropEffect","onenter","overDropTarget","filterElement","onexit","ondrag","allowdrop","allowsTransfer","ondrop","createHopper","scope","validateItems","catchesDropsOnPage","requiresDropOnElement","_options$filterItems","filterItems","scopeToObserve","createDragNDropClient","documentElement","lastState","filteredItems","ondragend","ondragstart","updateHopperState","hopperState","listening","listeners$1","handlePaste","activeEl","activeElement","nodeName","inScope","clipboardData","createPaster","listen","addFilesNotificationTimeout","notificationClearTimeout","filenames","assist","listModified","clear$1","isUsingFilePond","itemProcessedUndo","itemError","assistant","toCamels","RegExp","charAt","debounce","func","interval","immidiateOnly","prevent","calculateListItemMargin","calculateListHeight","visual","bounds","scrollList","itemList","newItem","removedItem","verticalItemCount","calculateRootBoundingBoxHeight","measureHeight","cappedHeight","maxHeight","exceedsMaxFiles","maxItems","totalBrowseItems","getDragIndex","toggleDrop","isAllowed","enabled","hopper","toggleBrowse","togglePaste","paster","route$5","DID_SET_ALLOW_DROP","DID_SET_ALLOW_PASTE","measure","widthPrevious","widthUpdated","updateHistory","previousAspectRatio","canHover","matchMedia","hasPointerEvents","passive","isMultiItem","atMaxCapacity","addAction","listItemMargin","listHeight","labelHeight","currentLabelHeight","listMarginTop","listMarginBottom","boundsHeight","history","MAX_BOUNCES","bounces","listAvailableHeight","_listAvailableHeight","isCappedHeight","panelHeight","_listAvailableHeight2","itemMargin","createApp","initialOptions","originalElement","visibilityHandler","resizeDoneTimer","isResizing","isResizingHorizontally","initialWindowWidth","currentWindowWidth","resizeHandler","isHidden","readWriteApi","innerWidth","routeActionsToEvents","createEvent","eventRoutes","DID_DESTROY","DID_INIT","DID_THROW_MAX_FILES","DID_INIT_ITEM","DID_COMPLETE_ITEM_PROCESSING_ALL","DID_UPDATE_ITEMS","DID_ACTIVATE_ITEM","exposeEvent","pond","bubbles","cancelable","composed","filtered","prepareFile","addFile","addFiles","removeFile","sources","lastArgument","processFile","prepareFiles","processFiles","_len3","_key3","removeFiles","_len4","_key4","mappedQueries","moveFile","browse","appendTo","replaceElement","restoreElement","isAttachedTo","createAppObject","customOptions","app","attributeNameToPropertyName","attributeName","mapObject","propertyMap","selector","mapping","selectorRegExp","getAttributesAsObject","attributeMapping","attribute","createAppAtElement","mergedOptions","attributeOptions","querySelectorAll","createApp$1","PRIVATE_METHODS","createAppAPI","replaceInString","replacements","workerBlob","workerURL","Worker","transferList","loadImage","renameFile","renamedFile","copyFile","registeredPlugins","createAppPlugin","additionalOptions","pluginOutline","views","operamini","CSS","apps","OptionTypes","fps","painter","requestTick","cancelTick","setTimerType","performance","cancelAnimationFrame","delta","createPainter","updateOptionTypes","hook","indexToRemove","newHook","plugins","opts"],"mappings":"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","file":"static/js/0.cb49baa1.chunk.js","sourcesContent":["/*!\n * react-filepond v7.0.1\n * A handy FilePond adapter component for React\n * \n * Copyright (c) 2019 PQINA\n * https://pqina.nl/filepond\n * \n * Licensed under the MIT license.\n */\n\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FilePond = exports.FileStatus = exports.registerPlugin = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _filepond = require('filepond');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// Import required methods and styles from the FilePond module, should not need anything else\n\n\n// We need to be able to call the registerPlugin method directly so we can add plugins\nexports.registerPlugin = _filepond.registerPlugin;\nexports.FileStatus = _filepond.FileStatus;\n\n// Do this once\n\nvar isSupported = (0, _filepond.supported)();\n\n// filtered methods\nvar filteredMethods = ['setOptions', 'on', 'off', 'onOnce', 'appendTo', 'insertAfter', 'insertBefore', 'isAttachedTo', 'replaceElement', 'restoreElement', 'destroy'];\n\n// The React <FilePond/> wrapper\n\nvar FilePond = exports.FilePond = function (_React$Component) {\n  _inherits(FilePond, _React$Component);\n\n  function FilePond(props) {\n    _classCallCheck(this, FilePond);\n\n    var _this = _possibleConstructorReturn(this, (FilePond.__proto__ || Object.getPrototypeOf(FilePond)).call(this, props));\n\n    _this.allowFilesSync = true;\n    return _this;\n  }\n\n  // Will setup FilePond instance when mounted\n\n\n  _createClass(FilePond, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      // exit here if not supported\n      if (!isSupported) return;\n\n      var options = Object.assign({}, this.props);\n\n      // if onupdate files is defined, make sure setFiles does not cause race condition\n      if (options.onupdatefiles) {\n        var cb = options.onupdatefiles;\n        options.onupdatefiles = function (items) {\n          _this2.allowFilesSync = false;\n          cb(items);\n        };\n      }\n\n      // Create our pond\n      this._pond = (0, _filepond.create)(this._element, options);\n\n      // Reference pond methods to FilePond component instance\n      Object.keys(this._pond).filter(function (key) {\n        return !filteredMethods.includes(key);\n      }).forEach(function (key) {\n        _this2[key] = _this2._pond[key];\n      });\n    }\n\n    // Will clean up FilePond instance when unmounted\n\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      // exit when no pond defined\n      if (!this._pond) return;\n      this._pond.destroy();\n      this.allowFilesSync = true;\n    }\n  }, {\n    key: 'shouldComponentUpdate',\n    value: function shouldComponentUpdate() {\n      if (!this.allowFilesSync) {\n        this.allowFilesSync = true;\n        return false;\n      }\n      return true;\n    }\n\n    // Something changed\n\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n\n      // exit when no pond defined\n      if (!this._pond) return;\n\n      var options = Object.assign({}, this.props);\n\n      // this is only set onces, on didmount\n      delete options.onupdatefiles;\n\n      // update pond options based on new props\n      this._pond.setOptions(options);\n    }\n\n    // Renders basic element hook for FilePond to attach to\n\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this3 = this;\n\n      var _props = this.props,\n          id = _props.id,\n          name = _props.name,\n          className = _props.className,\n          allowMultiple = _props.allowMultiple,\n          required = _props.required,\n          captureMethod = _props.captureMethod,\n          acceptedFileTypes = _props.acceptedFileTypes;\n\n      return (0, _react.createElement)('div', { className: 'filepond--wrapper' }, (0, _react.createElement)('input', {\n        type: 'file',\n        name: name,\n        id: id,\n        accept: acceptedFileTypes,\n        multiple: allowMultiple,\n        required: required,\n        className: className,\n        capture: captureMethod,\n        ref: function ref(element) {\n          return _this3._element = element;\n        }\n      }));\n    }\n  }]);\n\n  return FilePond;\n}(_react2.default.Component);\n\n\n","/*!\n * FilePondPluginImageExifOrientation 1.0.9\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined'\n    ? (module.exports = factory())\n    : typeof define === 'function' && define.amd\n    ? define(factory)\n    : ((global = global || self),\n      (global.FilePondPluginImageExifOrientation = factory()));\n})(this, function() {\n  'use strict';\n\n  // test if file is of type image\n  var isJPEG = function isJPEG(file) {\n    return /^image\\/jpeg/.test(file.type);\n  };\n\n  var Marker = {\n    JPEG: 0xffd8,\n    APP1: 0xffe1,\n    EXIF: 0x45786966,\n    TIFF: 0x4949,\n    Orientation: 0x0112,\n    Unknown: 0xff00\n  };\n\n  var getUint16 = function getUint16(view, offset) {\n    var little =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    return view.getUint16(offset, little);\n  };\n  var getUint32 = function getUint32(view, offset) {\n    var little =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    return view.getUint32(offset, little);\n  };\n\n  var getImageOrientation = function getImageOrientation(file) {\n    return new Promise(function(resolve, reject) {\n      var reader = new FileReader();\n      reader.onload = function(e) {\n        var view = new DataView(e.target.result);\n\n        // Every JPEG file starts from binary value '0xFFD8'\n        if (getUint16(view, 0) !== Marker.JPEG) {\n          // This aint no JPEG\n          resolve(-1);\n          return;\n        }\n\n        var length = view.byteLength;\n        var offset = 2;\n\n        while (offset < length) {\n          var marker = getUint16(view, offset);\n          offset += 2;\n\n          // There's our APP1 Marker\n          if (marker === Marker.APP1) {\n            if (getUint32(view, (offset += 2)) !== Marker.EXIF) {\n              // no EXIF info defined\n              break;\n            }\n\n            // Get TIFF Header\n            var little = getUint16(view, (offset += 6)) === Marker.TIFF;\n            offset += getUint32(view, offset + 4, little);\n\n            var tags = getUint16(view, offset, little);\n            offset += 2;\n\n            for (var i = 0; i < tags; i++) {\n              // found the orientation tag\n              if (\n                getUint16(view, offset + i * 12, little) === Marker.Orientation\n              ) {\n                resolve(getUint16(view, offset + i * 12 + 8, little));\n\n                return;\n              }\n            }\n          } else if ((marker & Marker.Unknown) !== Marker.Unknown) {\n            // Invalid\n            break;\n          } else {\n            offset += getUint16(view, offset);\n          }\n        }\n\n        // Nothing found\n        resolve(-1);\n      };\n\n      // we don't need to read the entire file to get the orientation\n      reader.readAsArrayBuffer(file.slice(0, 64 * 1024));\n    });\n  };\n\n  var IS_BROWSER = (function() {\n    return (\n      typeof window !== 'undefined' && typeof window.document !== 'undefined'\n    );\n  })();\n  var isBrowser = function isBrowser() {\n    return IS_BROWSER;\n  };\n\n  // 2x1 pixel image 90CW rotated with orientation header\n  var testSrc =\n    'data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=';\n\n  // should correct orientation if is presented in landscape, in which case the browser doesn't autocorrect\n  var shouldCorrect = undefined;\n  var testImage = isBrowser() ? new Image() : {};\n  testImage.onload = function() {\n    return (shouldCorrect = testImage.naturalWidth > testImage.naturalHeight);\n  };\n  testImage.src = testSrc;\n\n  var shouldCorrectImageExifOrientation = function shouldCorrectImageExifOrientation() {\n    return shouldCorrect;\n  };\n\n  /**\n   * Read Image Orientation Plugin\n   */\n  var plugin = function plugin(_ref) {\n    var addFilter = _ref.addFilter,\n      utils = _ref.utils;\n    var Type = utils.Type,\n      isFile = utils.isFile;\n\n    // subscribe to file load and append required info\n    addFilter('DID_LOAD_ITEM', function(item, _ref2) {\n      var query = _ref2.query;\n      return new Promise(function(resolve, reject) {\n        // get file reference\n        var file = item.file;\n\n        // if this is not a jpeg image we are not interested\n        if (\n          !isFile(file) ||\n          !isJPEG(file) ||\n          !query('GET_ALLOW_IMAGE_EXIF_ORIENTATION') ||\n          !shouldCorrectImageExifOrientation()\n        ) {\n          // continue with the unaltered dataset\n          return resolve(item);\n        }\n\n        // get orientation from exif data\n        getImageOrientation(file).then(function(orientation) {\n          item.setMetadata('exif', { orientation: orientation });\n          resolve(item);\n        });\n      });\n    });\n\n    // Expose plugin options\n    return {\n      options: {\n        // Enable or disable image orientation reading\n        allowImageExifOrientation: [true, Type.BOOLEAN]\n      }\n    };\n  };\n\n  // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n  var isBrowser$1 =\n    typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  if (isBrowser$1) {\n    document.dispatchEvent(\n      new CustomEvent('FilePond:pluginloaded', { detail: plugin })\n    );\n  }\n\n  return plugin;\n});\n","/*!\n * FilePondPluginImagePreview 4.6.4\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined'\n    ? (module.exports = factory())\n    : typeof define === 'function' && define.amd\n    ? define(factory)\n    : ((global = global || self),\n      (global.FilePondPluginImagePreview = factory()));\n})(this, function() {\n  'use strict';\n\n  // test if file is of type image and can be viewed in canvas\n  var isPreviewableImage = function isPreviewableImage(file) {\n    return /^image/.test(file.type);\n  };\n\n  function _typeof(obj) {\n    if (typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol') {\n      _typeof = function(obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function(obj) {\n        return obj &&\n          typeof Symbol === 'function' &&\n          obj.constructor === Symbol &&\n          obj !== Symbol.prototype\n          ? 'symbol'\n          : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  var REACT_ELEMENT_TYPE;\n\n  function _jsx(type, props, key, children) {\n    if (!REACT_ELEMENT_TYPE) {\n      REACT_ELEMENT_TYPE =\n        (typeof Symbol === 'function' &&\n          Symbol.for &&\n          Symbol.for('react.element')) ||\n        0xeac7;\n    }\n\n    var defaultProps = type && type.defaultProps;\n    var childrenLength = arguments.length - 3;\n\n    if (!props && childrenLength !== 0) {\n      props = {\n        children: void 0\n      };\n    }\n\n    if (props && defaultProps) {\n      for (var propName in defaultProps) {\n        if (props[propName] === void 0) {\n          props[propName] = defaultProps[propName];\n        }\n      }\n    } else if (!props) {\n      props = defaultProps || {};\n    }\n\n    if (childrenLength === 1) {\n      props.children = children;\n    } else if (childrenLength > 1) {\n      var childArray = new Array(childrenLength);\n\n      for (var i = 0; i < childrenLength; i++) {\n        childArray[i] = arguments[i + 3];\n      }\n\n      props.children = childArray;\n    }\n\n    return {\n      $$typeof: REACT_ELEMENT_TYPE,\n      type: type,\n      key: key === undefined ? null : '' + key,\n      ref: null,\n      props: props,\n      _owner: null\n    };\n  }\n\n  function _asyncIterator(iterable) {\n    var method;\n\n    if (typeof Symbol === 'function') {\n      if (Symbol.asyncIterator) {\n        method = iterable[Symbol.asyncIterator];\n        if (method != null) return method.call(iterable);\n      }\n\n      if (Symbol.iterator) {\n        method = iterable[Symbol.iterator];\n        if (method != null) return method.call(iterable);\n      }\n    }\n\n    throw new TypeError('Object is not async iterable');\n  }\n\n  function _AwaitValue(value) {\n    this.wrapped = value;\n  }\n\n  function _AsyncGenerator(gen) {\n    var front, back;\n\n    function send(key, arg) {\n      return new Promise(function(resolve, reject) {\n        var request = {\n          key: key,\n          arg: arg,\n          resolve: resolve,\n          reject: reject,\n          next: null\n        };\n\n        if (back) {\n          back = back.next = request;\n        } else {\n          front = back = request;\n          resume(key, arg);\n        }\n      });\n    }\n\n    function resume(key, arg) {\n      try {\n        var result = gen[key](arg);\n        var value = result.value;\n        var wrappedAwait = value instanceof _AwaitValue;\n        Promise.resolve(wrappedAwait ? value.wrapped : value).then(\n          function(arg) {\n            if (wrappedAwait) {\n              resume('next', arg);\n              return;\n            }\n\n            settle(result.done ? 'return' : 'normal', arg);\n          },\n          function(err) {\n            resume('throw', err);\n          }\n        );\n      } catch (err) {\n        settle('throw', err);\n      }\n    }\n\n    function settle(type, value) {\n      switch (type) {\n        case 'return':\n          front.resolve({\n            value: value,\n            done: true\n          });\n          break;\n\n        case 'throw':\n          front.reject(value);\n          break;\n\n        default:\n          front.resolve({\n            value: value,\n            done: false\n          });\n          break;\n      }\n\n      front = front.next;\n\n      if (front) {\n        resume(front.key, front.arg);\n      } else {\n        back = null;\n      }\n    }\n\n    this._invoke = send;\n\n    if (typeof gen.return !== 'function') {\n      this.return = undefined;\n    }\n  }\n\n  if (typeof Symbol === 'function' && Symbol.asyncIterator) {\n    _AsyncGenerator.prototype[Symbol.asyncIterator] = function() {\n      return this;\n    };\n  }\n\n  _AsyncGenerator.prototype.next = function(arg) {\n    return this._invoke('next', arg);\n  };\n\n  _AsyncGenerator.prototype.throw = function(arg) {\n    return this._invoke('throw', arg);\n  };\n\n  _AsyncGenerator.prototype.return = function(arg) {\n    return this._invoke('return', arg);\n  };\n\n  function _wrapAsyncGenerator(fn) {\n    return function() {\n      return new _AsyncGenerator(fn.apply(this, arguments));\n    };\n  }\n\n  function _awaitAsyncGenerator(value) {\n    return new _AwaitValue(value);\n  }\n\n  function _asyncGeneratorDelegate(inner, awaitWrap) {\n    var iter = {},\n      waiting = false;\n\n    function pump(key, value) {\n      waiting = true;\n      value = new Promise(function(resolve) {\n        resolve(inner[key](value));\n      });\n      return {\n        done: false,\n        value: awaitWrap(value)\n      };\n    }\n\n    if (typeof Symbol === 'function' && Symbol.iterator) {\n      iter[Symbol.iterator] = function() {\n        return this;\n      };\n    }\n\n    iter.next = function(value) {\n      if (waiting) {\n        waiting = false;\n        return value;\n      }\n\n      return pump('next', value);\n    };\n\n    if (typeof inner.throw === 'function') {\n      iter.throw = function(value) {\n        if (waiting) {\n          waiting = false;\n          throw value;\n        }\n\n        return pump('throw', value);\n      };\n    }\n\n    if (typeof inner.return === 'function') {\n      iter.return = function(value) {\n        return pump('return', value);\n      };\n    }\n\n    return iter;\n  }\n\n  function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n    try {\n      var info = gen[key](arg);\n      var value = info.value;\n    } catch (error) {\n      reject(error);\n      return;\n    }\n\n    if (info.done) {\n      resolve(value);\n    } else {\n      Promise.resolve(value).then(_next, _throw);\n    }\n  }\n\n  function _asyncToGenerator(fn) {\n    return function() {\n      var self = this,\n        args = arguments;\n      return new Promise(function(resolve, reject) {\n        var gen = fn.apply(self, args);\n\n        function _next(value) {\n          asyncGeneratorStep(\n            gen,\n            resolve,\n            reject,\n            _next,\n            _throw,\n            'next',\n            value\n          );\n        }\n\n        function _throw(err) {\n          asyncGeneratorStep(gen, resolve, reject, _next, _throw, 'throw', err);\n        }\n\n        _next(undefined);\n      });\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError('Cannot call a class as a function');\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if ('value' in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineEnumerableProperties(obj, descs) {\n    for (var key in descs) {\n      var desc = descs[key];\n      desc.configurable = desc.enumerable = true;\n      if ('value' in desc) desc.writable = true;\n      Object.defineProperty(obj, key, desc);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var objectSymbols = Object.getOwnPropertySymbols(descs);\n\n      for (var i = 0; i < objectSymbols.length; i++) {\n        var sym = objectSymbols[i];\n        var desc = descs[sym];\n        desc.configurable = desc.enumerable = true;\n        if ('value' in desc) desc.writable = true;\n        Object.defineProperty(obj, sym, desc);\n      }\n    }\n\n    return obj;\n  }\n\n  function _defaults(obj, defaults) {\n    var keys = Object.getOwnPropertyNames(defaults);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n      if (value && value.configurable && obj[key] === undefined) {\n        Object.defineProperty(obj, key, value);\n      }\n    }\n\n    return obj;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _extends() {\n    _extends =\n      Object.assign ||\n      function(target) {\n        for (var i = 1; i < arguments.length; i++) {\n          var source = arguments[i];\n\n          for (var key in source) {\n            if (Object.prototype.hasOwnProperty.call(source, key)) {\n              target[key] = source[key];\n            }\n          }\n        }\n\n        return target;\n      };\n\n    return _extends.apply(this, arguments);\n  }\n\n  function _objectSpread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n      var ownKeys = Object.keys(source);\n\n      if (typeof Object.getOwnPropertySymbols === 'function') {\n        ownKeys = ownKeys.concat(\n          Object.getOwnPropertySymbols(source).filter(function(sym) {\n            return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n          })\n        );\n      }\n\n      ownKeys.forEach(function(key) {\n        _defineProperty(target, key, source[key]);\n      });\n    }\n\n    return target;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== 'function' && superClass !== null) {\n      throw new TypeError('Super expression must either be null or a function');\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _inheritsLoose(subClass, superClass) {\n    subClass.prototype = Object.create(superClass.prototype);\n    subClass.prototype.constructor = subClass;\n    subClass.__proto__ = superClass;\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf\n      ? Object.getPrototypeOf\n      : function _getPrototypeOf(o) {\n          return o.__proto__ || Object.getPrototypeOf(o);\n        };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf =\n      Object.setPrototypeOf ||\n      function _setPrototypeOf(o, p) {\n        o.__proto__ = p;\n        return o;\n      };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function isNativeReflectConstruct() {\n    if (typeof Reflect === 'undefined' || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === 'function') return true;\n\n    try {\n      Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function _construct(Parent, args, Class) {\n    if (isNativeReflectConstruct()) {\n      _construct = Reflect.construct;\n    } else {\n      _construct = function _construct(Parent, args, Class) {\n        var a = [null];\n        a.push.apply(a, args);\n        var Constructor = Function.bind.apply(Parent, a);\n        var instance = new Constructor();\n        if (Class) _setPrototypeOf(instance, Class.prototype);\n        return instance;\n      };\n    }\n\n    return _construct.apply(null, arguments);\n  }\n\n  function _isNativeFunction(fn) {\n    return Function.toString.call(fn).indexOf('[native code]') !== -1;\n  }\n\n  function _wrapNativeSuper(Class) {\n    var _cache = typeof Map === 'function' ? new Map() : undefined;\n\n    _wrapNativeSuper = function _wrapNativeSuper(Class) {\n      if (Class === null || !_isNativeFunction(Class)) return Class;\n\n      if (typeof Class !== 'function') {\n        throw new TypeError(\n          'Super expression must either be null or a function'\n        );\n      }\n\n      if (typeof _cache !== 'undefined') {\n        if (_cache.has(Class)) return _cache.get(Class);\n\n        _cache.set(Class, Wrapper);\n      }\n\n      function Wrapper() {\n        return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n      }\n\n      Wrapper.prototype = Object.create(Class.prototype, {\n        constructor: {\n          value: Wrapper,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      return _setPrototypeOf(Wrapper, Class);\n    };\n\n    return _wrapNativeSuper(Class);\n  }\n\n  function _instanceof(left, right) {\n    if (\n      right != null &&\n      typeof Symbol !== 'undefined' &&\n      right[Symbol.hasInstance]\n    ) {\n      return right[Symbol.hasInstance](left);\n    } else {\n      return left instanceof right;\n    }\n  }\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule\n      ? obj\n      : {\n          default: obj\n        };\n  }\n\n  function _interopRequireWildcard(obj) {\n    if (obj && obj.__esModule) {\n      return obj;\n    } else {\n      var newObj = {};\n\n      if (obj != null) {\n        for (var key in obj) {\n          if (Object.prototype.hasOwnProperty.call(obj, key)) {\n            var desc =\n              Object.defineProperty && Object.getOwnPropertyDescriptor\n                ? Object.getOwnPropertyDescriptor(obj, key)\n                : {};\n\n            if (desc.get || desc.set) {\n              Object.defineProperty(newObj, key, desc);\n            } else {\n              newObj[key] = obj[key];\n            }\n          }\n        }\n      }\n\n      newObj.default = obj;\n      return newObj;\n    }\n  }\n\n  function _newArrowCheck(innerThis, boundThis) {\n    if (innerThis !== boundThis) {\n      throw new TypeError('Cannot instantiate an arrow function');\n    }\n  }\n\n  function _objectDestructuringEmpty(obj) {\n    if (obj == null) throw new TypeError('Cannot destructure undefined');\n  }\n\n  function _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n\n    for (i = 0; i < sourceKeys.length; i++) {\n      key = sourceKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      target[key] = source[key];\n    }\n\n    return target;\n  }\n\n  function _objectWithoutProperties(source, excluded) {\n    if (source == null) return {};\n\n    var target = _objectWithoutPropertiesLoose(source, excluded);\n\n    var key, i;\n\n    if (Object.getOwnPropertySymbols) {\n      var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n      for (i = 0; i < sourceSymbolKeys.length; i++) {\n        key = sourceSymbolKeys[i];\n        if (excluded.indexOf(key) >= 0) continue;\n        if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n        target[key] = source[key];\n      }\n    }\n\n    return target;\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\n        \"this hasn't been initialised - super() hasn't been called\"\n      );\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === 'object' || typeof call === 'function')) {\n      return call;\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  function _superPropBase(object, property) {\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\n      object = _getPrototypeOf(object);\n      if (object === null) break;\n    }\n\n    return object;\n  }\n\n  function _get(target, property, receiver) {\n    if (typeof Reflect !== 'undefined' && Reflect.get) {\n      _get = Reflect.get;\n    } else {\n      _get = function _get(target, property, receiver) {\n        var base = _superPropBase(target, property);\n\n        if (!base) return;\n        var desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.get) {\n          return desc.get.call(receiver);\n        }\n\n        return desc.value;\n      };\n    }\n\n    return _get(target, property, receiver || target);\n  }\n\n  function set(target, property, value, receiver) {\n    if (typeof Reflect !== 'undefined' && Reflect.set) {\n      set = Reflect.set;\n    } else {\n      set = function set(target, property, value, receiver) {\n        var base = _superPropBase(target, property);\n\n        var desc;\n\n        if (base) {\n          desc = Object.getOwnPropertyDescriptor(base, property);\n\n          if (desc.set) {\n            desc.set.call(receiver, value);\n            return true;\n          } else if (!desc.writable) {\n            return false;\n          }\n        }\n\n        desc = Object.getOwnPropertyDescriptor(receiver, property);\n\n        if (desc) {\n          if (!desc.writable) {\n            return false;\n          }\n\n          desc.value = value;\n          Object.defineProperty(receiver, property, desc);\n        } else {\n          _defineProperty(receiver, property, value);\n        }\n\n        return true;\n      };\n    }\n\n    return set(target, property, value, receiver);\n  }\n\n  function _set(target, property, value, receiver, isStrict) {\n    var s = set(target, property, value, receiver || target);\n\n    if (!s && isStrict) {\n      throw new Error('failed to set property');\n    }\n\n    return value;\n  }\n\n  function _taggedTemplateLiteral(strings, raw) {\n    if (!raw) {\n      raw = strings.slice(0);\n    }\n\n    return Object.freeze(\n      Object.defineProperties(strings, {\n        raw: {\n          value: Object.freeze(raw)\n        }\n      })\n    );\n  }\n\n  function _taggedTemplateLiteralLoose(strings, raw) {\n    if (!raw) {\n      raw = strings.slice(0);\n    }\n\n    strings.raw = raw;\n    return strings;\n  }\n\n  function _temporalRef(val, name) {\n    if (val === _temporalUndefined) {\n      throw new ReferenceError(name + ' is not defined - temporal dead zone');\n    } else {\n      return val;\n    }\n  }\n\n  function _readOnlyError(name) {\n    throw new Error('\"' + name + '\" is read-only');\n  }\n\n  function _classNameTDZError(name) {\n    throw new Error(\n      'Class \"' + name + '\" cannot be referenced in computed property keys.'\n    );\n  }\n\n  var _temporalUndefined = {};\n\n  function _slicedToArray(arr, i) {\n    return (\n      _arrayWithHoles(arr) ||\n      _iterableToArrayLimit(arr, i) ||\n      _nonIterableRest()\n    );\n  }\n\n  function _slicedToArrayLoose(arr, i) {\n    return (\n      _arrayWithHoles(arr) ||\n      _iterableToArrayLimitLoose(arr, i) ||\n      _nonIterableRest()\n    );\n  }\n\n  function _toArray(arr) {\n    return _arrayWithHoles(arr) || _iterableToArray(arr) || _nonIterableRest();\n  }\n\n  function _toConsumableArray(arr) {\n    return (\n      _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread()\n    );\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) {\n      for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++)\n        arr2[i] = arr[i];\n\n      return arr2;\n    }\n  }\n\n  function _arrayWithHoles(arr) {\n    if (Array.isArray(arr)) return arr;\n  }\n\n  function _iterableToArray(iter) {\n    if (\n      Symbol.iterator in Object(iter) ||\n      Object.prototype.toString.call(iter) === '[object Arguments]'\n    )\n      return Array.from(iter);\n  }\n\n  function _iterableToArrayLimit(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (\n        var _i = arr[Symbol.iterator](), _s;\n        !(_n = (_s = _i.next()).done);\n        _n = true\n      ) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i['return'] != null) _i['return']();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  function _iterableToArrayLimitLoose(arr, i) {\n    var _arr = [];\n\n    for (\n      var _iterator = arr[Symbol.iterator](), _step;\n      !(_step = _iterator.next()).done;\n\n    ) {\n      _arr.push(_step.value);\n\n      if (i && _arr.length === i) break;\n    }\n\n    return _arr;\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError('Invalid attempt to spread non-iterable instance');\n  }\n\n  function _nonIterableRest() {\n    throw new TypeError('Invalid attempt to destructure non-iterable instance');\n  }\n\n  function _skipFirstGeneratorNext(fn) {\n    return function() {\n      var it = fn.apply(this, arguments);\n      it.next();\n      return it;\n    };\n  }\n\n  function _toPrimitive(input, hint) {\n    if (typeof input !== 'object' || input === null) return input;\n    var prim = input[Symbol.toPrimitive];\n\n    if (prim !== undefined) {\n      var res = prim.call(input, hint || 'default');\n      if (typeof res !== 'object') return res;\n      throw new TypeError('@@toPrimitive must return a primitive value.');\n    }\n\n    return (hint === 'string' ? String : Number)(input);\n  }\n\n  function _toPropertyKey(arg) {\n    var key = _toPrimitive(arg, 'string');\n\n    return typeof key === 'symbol' ? key : String(key);\n  }\n\n  function _initializerWarningHelper(descriptor, context) {\n    throw new Error(\n      'Decorating class property failed. Please ensure that ' +\n        'proposal-class-properties is enabled and set to use loose mode. ' +\n        'To use proposal-class-properties in spec mode with decorators, wait for ' +\n        'the next major version of decorators in stage 2.'\n    );\n  }\n\n  function _initializerDefineProperty(target, property, descriptor, context) {\n    if (!descriptor) return;\n    Object.defineProperty(target, property, {\n      enumerable: descriptor.enumerable,\n      configurable: descriptor.configurable,\n      writable: descriptor.writable,\n      value: descriptor.initializer\n        ? descriptor.initializer.call(context)\n        : void 0\n    });\n  }\n\n  function _applyDecoratedDescriptor(\n    target,\n    property,\n    decorators,\n    descriptor,\n    context\n  ) {\n    var desc = {};\n    Object.keys(descriptor).forEach(function(key) {\n      desc[key] = descriptor[key];\n    });\n    desc.enumerable = !!desc.enumerable;\n    desc.configurable = !!desc.configurable;\n\n    if ('value' in desc || desc.initializer) {\n      desc.writable = true;\n    }\n\n    desc = decorators\n      .slice()\n      .reverse()\n      .reduce(function(desc, decorator) {\n        return decorator(target, property, desc) || desc;\n      }, desc);\n\n    if (context && desc.initializer !== void 0) {\n      desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n      desc.initializer = undefined;\n    }\n\n    if (desc.initializer === void 0) {\n      Object.defineProperty(target, property, desc);\n      desc = null;\n    }\n\n    return desc;\n  }\n\n  var id = 0;\n\n  function _classPrivateFieldLooseKey(name) {\n    return '__private_' + id++ + '_' + name;\n  }\n\n  function _classPrivateFieldLooseBase(receiver, privateKey) {\n    if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) {\n      throw new TypeError('attempted to use private field on non-instance');\n    }\n\n    return receiver;\n  }\n\n  function _classPrivateFieldGet(receiver, privateMap) {\n    if (!privateMap.has(receiver)) {\n      throw new TypeError('attempted to get private field on non-instance');\n    }\n\n    var descriptor = privateMap.get(receiver);\n\n    if (descriptor.get) {\n      return descriptor.get.call(receiver);\n    }\n\n    return descriptor.value;\n  }\n\n  function _classPrivateFieldSet(receiver, privateMap, value) {\n    if (!privateMap.has(receiver)) {\n      throw new TypeError('attempted to set private field on non-instance');\n    }\n\n    var descriptor = privateMap.get(receiver);\n\n    if (descriptor.set) {\n      descriptor.set.call(receiver, value);\n    } else {\n      if (!descriptor.writable) {\n        throw new TypeError('attempted to set read only private field');\n      }\n\n      descriptor.value = value;\n    }\n\n    return value;\n  }\n\n  function _classStaticPrivateFieldSpecGet(\n    receiver,\n    classConstructor,\n    descriptor\n  ) {\n    if (receiver !== classConstructor) {\n      throw new TypeError('Private static access of wrong provenance');\n    }\n\n    return descriptor.value;\n  }\n\n  function _classStaticPrivateFieldSpecSet(\n    receiver,\n    classConstructor,\n    descriptor,\n    value\n  ) {\n    if (receiver !== classConstructor) {\n      throw new TypeError('Private static access of wrong provenance');\n    }\n\n    if (!descriptor.writable) {\n      throw new TypeError('attempted to set read only private field');\n    }\n\n    descriptor.value = value;\n    return value;\n  }\n\n  function _classStaticPrivateMethodGet(receiver, classConstructor, method) {\n    if (receiver !== classConstructor) {\n      throw new TypeError('Private static access of wrong provenance');\n    }\n\n    return method;\n  }\n\n  function _classStaticPrivateMethodSet() {\n    throw new TypeError('attempted to set read only static private field');\n  }\n\n  function _decorate(decorators, factory, superClass, mixins) {\n    var api = _getDecoratorsApi();\n\n    if (mixins) {\n      for (var i = 0; i < mixins.length; i++) {\n        api = mixins[i](api);\n      }\n    }\n\n    var r = factory(function initialize(O) {\n      api.initializeInstanceElements(O, decorated.elements);\n    }, superClass);\n    var decorated = api.decorateClass(\n      _coalesceClassElements(r.d.map(_createElementDescriptor)),\n      decorators\n    );\n    api.initializeClassElements(r.F, decorated.elements);\n    return api.runClassFinishers(r.F, decorated.finishers);\n  }\n\n  function _getDecoratorsApi() {\n    _getDecoratorsApi = function() {\n      return api;\n    };\n\n    var api = {\n      elementsDefinitionOrder: [['method'], ['field']],\n      initializeInstanceElements: function(O, elements) {\n        ['method', 'field'].forEach(function(kind) {\n          elements.forEach(function(element) {\n            if (element.kind === kind && element.placement === 'own') {\n              this.defineClassElement(O, element);\n            }\n          }, this);\n        }, this);\n      },\n      initializeClassElements: function(F, elements) {\n        var proto = F.prototype;\n        ['method', 'field'].forEach(function(kind) {\n          elements.forEach(function(element) {\n            var placement = element.placement;\n\n            if (\n              element.kind === kind &&\n              (placement === 'static' || placement === 'prototype')\n            ) {\n              var receiver = placement === 'static' ? F : proto;\n              this.defineClassElement(receiver, element);\n            }\n          }, this);\n        }, this);\n      },\n      defineClassElement: function(receiver, element) {\n        var descriptor = element.descriptor;\n\n        if (element.kind === 'field') {\n          var initializer = element.initializer;\n          descriptor = {\n            enumerable: descriptor.enumerable,\n            writable: descriptor.writable,\n            configurable: descriptor.configurable,\n            value: initializer === void 0 ? void 0 : initializer.call(receiver)\n          };\n        }\n\n        Object.defineProperty(receiver, element.key, descriptor);\n      },\n      decorateClass: function(elements, decorators) {\n        var newElements = [];\n        var finishers = [];\n        var placements = {\n          static: [],\n          prototype: [],\n          own: []\n        };\n        elements.forEach(function(element) {\n          this.addElementPlacement(element, placements);\n        }, this);\n        elements.forEach(function(element) {\n          if (!_hasDecorators(element)) return newElements.push(element);\n          var elementFinishersExtras = this.decorateElement(\n            element,\n            placements\n          );\n          newElements.push(elementFinishersExtras.element);\n          newElements.push.apply(newElements, elementFinishersExtras.extras);\n          finishers.push.apply(finishers, elementFinishersExtras.finishers);\n        }, this);\n\n        if (!decorators) {\n          return {\n            elements: newElements,\n            finishers: finishers\n          };\n        }\n\n        var result = this.decorateConstructor(newElements, decorators);\n        finishers.push.apply(finishers, result.finishers);\n        result.finishers = finishers;\n        return result;\n      },\n      addElementPlacement: function(element, placements, silent) {\n        var keys = placements[element.placement];\n\n        if (!silent && keys.indexOf(element.key) !== -1) {\n          throw new TypeError('Duplicated element (' + element.key + ')');\n        }\n\n        keys.push(element.key);\n      },\n      decorateElement: function(element, placements) {\n        var extras = [];\n        var finishers = [];\n\n        for (\n          var decorators = element.decorators, i = decorators.length - 1;\n          i >= 0;\n          i--\n        ) {\n          var keys = placements[element.placement];\n          keys.splice(keys.indexOf(element.key), 1);\n          var elementObject = this.fromElementDescriptor(element);\n          var elementFinisherExtras = this.toElementFinisherExtras(\n            (0, decorators[i])(elementObject) || elementObject\n          );\n          element = elementFinisherExtras.element;\n          this.addElementPlacement(element, placements);\n\n          if (elementFinisherExtras.finisher) {\n            finishers.push(elementFinisherExtras.finisher);\n          }\n\n          var newExtras = elementFinisherExtras.extras;\n\n          if (newExtras) {\n            for (var j = 0; j < newExtras.length; j++) {\n              this.addElementPlacement(newExtras[j], placements);\n            }\n\n            extras.push.apply(extras, newExtras);\n          }\n        }\n\n        return {\n          element: element,\n          finishers: finishers,\n          extras: extras\n        };\n      },\n      decorateConstructor: function(elements, decorators) {\n        var finishers = [];\n\n        for (var i = decorators.length - 1; i >= 0; i--) {\n          var obj = this.fromClassDescriptor(elements);\n          var elementsAndFinisher = this.toClassDescriptor(\n            (0, decorators[i])(obj) || obj\n          );\n\n          if (elementsAndFinisher.finisher !== undefined) {\n            finishers.push(elementsAndFinisher.finisher);\n          }\n\n          if (elementsAndFinisher.elements !== undefined) {\n            elements = elementsAndFinisher.elements;\n\n            for (var j = 0; j < elements.length - 1; j++) {\n              for (var k = j + 1; k < elements.length; k++) {\n                if (\n                  elements[j].key === elements[k].key &&\n                  elements[j].placement === elements[k].placement\n                ) {\n                  throw new TypeError(\n                    'Duplicated element (' + elements[j].key + ')'\n                  );\n                }\n              }\n            }\n          }\n        }\n\n        return {\n          elements: elements,\n          finishers: finishers\n        };\n      },\n      fromElementDescriptor: function(element) {\n        var obj = {\n          kind: element.kind,\n          key: element.key,\n          placement: element.placement,\n          descriptor: element.descriptor\n        };\n        var desc = {\n          value: 'Descriptor',\n          configurable: true\n        };\n        Object.defineProperty(obj, Symbol.toStringTag, desc);\n        if (element.kind === 'field') obj.initializer = element.initializer;\n        return obj;\n      },\n      toElementDescriptors: function(elementObjects) {\n        if (elementObjects === undefined) return;\n        return _toArray(elementObjects).map(function(elementObject) {\n          var element = this.toElementDescriptor(elementObject);\n          this.disallowProperty(\n            elementObject,\n            'finisher',\n            'An element descriptor'\n          );\n          this.disallowProperty(\n            elementObject,\n            'extras',\n            'An element descriptor'\n          );\n          return element;\n        }, this);\n      },\n      toElementDescriptor: function(elementObject) {\n        var kind = String(elementObject.kind);\n\n        if (kind !== 'method' && kind !== 'field') {\n          throw new TypeError(\n            'An element descriptor\\'s .kind property must be either \"method\" or' +\n              ' \"field\", but a decorator created an element descriptor with' +\n              ' .kind \"' +\n              kind +\n              '\"'\n          );\n        }\n\n        var key = _toPropertyKey(elementObject.key);\n\n        var placement = String(elementObject.placement);\n\n        if (\n          placement !== 'static' &&\n          placement !== 'prototype' &&\n          placement !== 'own'\n        ) {\n          throw new TypeError(\n            'An element descriptor\\'s .placement property must be one of \"static\",' +\n              ' \"prototype\" or \"own\", but a decorator created an element descriptor' +\n              ' with .placement \"' +\n              placement +\n              '\"'\n          );\n        }\n\n        var descriptor = elementObject.descriptor;\n        this.disallowProperty(\n          elementObject,\n          'elements',\n          'An element descriptor'\n        );\n        var element = {\n          kind: kind,\n          key: key,\n          placement: placement,\n          descriptor: Object.assign({}, descriptor)\n        };\n\n        if (kind !== 'field') {\n          this.disallowProperty(\n            elementObject,\n            'initializer',\n            'A method descriptor'\n          );\n        } else {\n          this.disallowProperty(\n            descriptor,\n            'get',\n            'The property descriptor of a field descriptor'\n          );\n          this.disallowProperty(\n            descriptor,\n            'set',\n            'The property descriptor of a field descriptor'\n          );\n          this.disallowProperty(\n            descriptor,\n            'value',\n            'The property descriptor of a field descriptor'\n          );\n          element.initializer = elementObject.initializer;\n        }\n\n        return element;\n      },\n      toElementFinisherExtras: function(elementObject) {\n        var element = this.toElementDescriptor(elementObject);\n\n        var finisher = _optionalCallableProperty(elementObject, 'finisher');\n\n        var extras = this.toElementDescriptors(elementObject.extras);\n        return {\n          element: element,\n          finisher: finisher,\n          extras: extras\n        };\n      },\n      fromClassDescriptor: function(elements) {\n        var obj = {\n          kind: 'class',\n          elements: elements.map(this.fromElementDescriptor, this)\n        };\n        var desc = {\n          value: 'Descriptor',\n          configurable: true\n        };\n        Object.defineProperty(obj, Symbol.toStringTag, desc);\n        return obj;\n      },\n      toClassDescriptor: function(obj) {\n        var kind = String(obj.kind);\n\n        if (kind !== 'class') {\n          throw new TypeError(\n            'A class descriptor\\'s .kind property must be \"class\", but a decorator' +\n              ' created a class descriptor with .kind \"' +\n              kind +\n              '\"'\n          );\n        }\n\n        this.disallowProperty(obj, 'key', 'A class descriptor');\n        this.disallowProperty(obj, 'placement', 'A class descriptor');\n        this.disallowProperty(obj, 'descriptor', 'A class descriptor');\n        this.disallowProperty(obj, 'initializer', 'A class descriptor');\n        this.disallowProperty(obj, 'extras', 'A class descriptor');\n\n        var finisher = _optionalCallableProperty(obj, 'finisher');\n\n        var elements = this.toElementDescriptors(obj.elements);\n        return {\n          elements: elements,\n          finisher: finisher\n        };\n      },\n      runClassFinishers: function(constructor, finishers) {\n        for (var i = 0; i < finishers.length; i++) {\n          var newConstructor = (0, finishers[i])(constructor);\n\n          if (newConstructor !== undefined) {\n            if (typeof newConstructor !== 'function') {\n              throw new TypeError('Finishers must return a constructor.');\n            }\n\n            constructor = newConstructor;\n          }\n        }\n\n        return constructor;\n      },\n      disallowProperty: function(obj, name, objectType) {\n        if (obj[name] !== undefined) {\n          throw new TypeError(\n            objectType + \" can't have a .\" + name + ' property.'\n          );\n        }\n      }\n    };\n    return api;\n  }\n\n  function _createElementDescriptor(def) {\n    var key = _toPropertyKey(def.key);\n\n    var descriptor;\n\n    if (def.kind === 'method') {\n      descriptor = {\n        value: def.value,\n        writable: true,\n        configurable: true,\n        enumerable: false\n      };\n    } else if (def.kind === 'get') {\n      descriptor = {\n        get: def.value,\n        configurable: true,\n        enumerable: false\n      };\n    } else if (def.kind === 'set') {\n      descriptor = {\n        set: def.value,\n        configurable: true,\n        enumerable: false\n      };\n    } else if (def.kind === 'field') {\n      descriptor = {\n        configurable: true,\n        writable: true,\n        enumerable: true\n      };\n    }\n\n    var element = {\n      kind: def.kind === 'field' ? 'field' : 'method',\n      key: key,\n      placement: def.static\n        ? 'static'\n        : def.kind === 'field'\n        ? 'own'\n        : 'prototype',\n      descriptor: descriptor\n    };\n    if (def.decorators) element.decorators = def.decorators;\n    if (def.kind === 'field') element.initializer = def.value;\n    return element;\n  }\n\n  function _coalesceGetterSetter(element, other) {\n    if (element.descriptor.get !== undefined) {\n      other.descriptor.get = element.descriptor.get;\n    } else {\n      other.descriptor.set = element.descriptor.set;\n    }\n  }\n\n  function _coalesceClassElements(elements) {\n    var newElements = [];\n\n    var isSameElement = function(other) {\n      return (\n        other.kind === 'method' &&\n        other.key === element.key &&\n        other.placement === element.placement\n      );\n    };\n\n    for (var i = 0; i < elements.length; i++) {\n      var element = elements[i];\n      var other;\n\n      if (\n        element.kind === 'method' &&\n        (other = newElements.find(isSameElement))\n      ) {\n        if (\n          _isDataDescriptor(element.descriptor) ||\n          _isDataDescriptor(other.descriptor)\n        ) {\n          if (_hasDecorators(element) || _hasDecorators(other)) {\n            throw new ReferenceError(\n              'Duplicated methods (' + element.key + \") can't be decorated.\"\n            );\n          }\n\n          other.descriptor = element.descriptor;\n        } else {\n          if (_hasDecorators(element)) {\n            if (_hasDecorators(other)) {\n              throw new ReferenceError(\n                \"Decorators can't be placed on different accessors with for \" +\n                  'the same property (' +\n                  element.key +\n                  ').'\n              );\n            }\n\n            other.decorators = element.decorators;\n          }\n\n          _coalesceGetterSetter(element, other);\n        }\n      } else {\n        newElements.push(element);\n      }\n    }\n\n    return newElements;\n  }\n\n  function _hasDecorators(element) {\n    return element.decorators && element.decorators.length;\n  }\n\n  function _isDataDescriptor(desc) {\n    return (\n      desc !== undefined &&\n      !(desc.value === undefined && desc.writable === undefined)\n    );\n  }\n\n  function _optionalCallableProperty(obj, name) {\n    var value = obj[name];\n\n    if (value !== undefined && typeof value !== 'function') {\n      throw new TypeError(\"Expected '\" + name + \"' to be a function\");\n    }\n\n    return value;\n  }\n\n  function _classPrivateMethodGet(receiver, privateSet, fn) {\n    if (!privateSet.has(receiver)) {\n      throw new TypeError('attempted to get private field on non-instance');\n    }\n\n    return fn;\n  }\n\n  function _classPrivateMethodSet() {\n    throw new TypeError('attempted to reassign private method');\n  }\n\n  function _wrapRegExp(re, groups) {\n    _wrapRegExp = function(re, groups) {\n      return new BabelRegExp(re, groups);\n    };\n\n    var _RegExp = _wrapNativeSuper(RegExp);\n\n    var _super = RegExp.prototype;\n\n    var _groups = new WeakMap();\n\n    function BabelRegExp(re, groups) {\n      var _this = _RegExp.call(this, re);\n\n      _groups.set(_this, groups);\n\n      return _this;\n    }\n\n    _inherits(BabelRegExp, _RegExp);\n\n    BabelRegExp.prototype.exec = function(str) {\n      var result = _super.exec.call(this, str);\n\n      if (result) result.groups = buildGroups(result, this);\n      return result;\n    };\n\n    BabelRegExp.prototype[Symbol.replace] = function(str, substitution) {\n      if (typeof substitution === 'string') {\n        var groups = _groups.get(this);\n\n        return _super[Symbol.replace].call(\n          this,\n          str,\n          substitution.replace(/\\$<([^>]+)>/g, function(_, name) {\n            return '$' + groups[name];\n          })\n        );\n      } else if (typeof substitution === 'function') {\n        var _this = this;\n\n        return _super[Symbol.replace].call(this, str, function() {\n          var args = [];\n          args.push.apply(args, arguments);\n\n          if (typeof args[args.length - 1] !== 'object') {\n            args.push(buildGroups(args, _this));\n          }\n\n          return substitution.apply(this, args);\n        });\n      } else {\n        return _super[Symbol.replace].call(this, str, substitution);\n      }\n    };\n\n    function buildGroups(result, re) {\n      var g = _groups.get(re);\n\n      return Object.keys(g).reduce(function(groups, name) {\n        groups[name] = result[g[name]];\n        return groups;\n      }, Object.create(null));\n    }\n\n    return _wrapRegExp.apply(this, arguments);\n  }\n\n  var vectorMultiply = function vectorMultiply(v, amount) {\n    return createVector(v.x * amount, v.y * amount);\n  };\n\n  var vectorAdd = function vectorAdd(a, b) {\n    return createVector(a.x + b.x, a.y + b.y);\n  };\n\n  var vectorNormalize = function vectorNormalize(v) {\n    var l = Math.sqrt(v.x * v.x + v.y * v.y);\n    if (l === 0) {\n      return {\n        x: 0,\n        y: 0\n      };\n    }\n    return createVector(v.x / l, v.y / l);\n  };\n\n  var vectorRotate = function vectorRotate(v, radians, origin) {\n    var cos = Math.cos(radians);\n    var sin = Math.sin(radians);\n    var t = createVector(v.x - origin.x, v.y - origin.y);\n    return createVector(\n      origin.x + cos * t.x - sin * t.y,\n      origin.y + sin * t.x + cos * t.y\n    );\n  };\n\n  var createVector = function createVector() {\n    var x =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    return { x: x, y: y };\n  };\n\n  var getMarkupValue = function getMarkupValue(value, size) {\n    var scalar =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n    var axis = arguments.length > 3 ? arguments[3] : undefined;\n    if (typeof value === 'string') {\n      return parseFloat(value) * scalar;\n    }\n    if (typeof value === 'number') {\n      return value * (axis ? size[axis] : Math.min(size.width, size.height));\n    }\n    return;\n  };\n\n  var getMarkupStyles = function getMarkupStyles(markup, size, scale) {\n    var lineStyle = markup.borderStyle || markup.lineStyle || 'solid';\n    var fill = markup.backgroundColor || markup.fontColor || 'transparent';\n    var stroke = markup.borderColor || markup.lineColor || 'transparent';\n    var strokeWidth = getMarkupValue(\n      markup.borderWidth || markup.lineWidth,\n      size,\n      scale\n    );\n    var lineCap = markup.lineCap || 'round';\n    var lineJoin = markup.lineJoin || 'round';\n    var dashes =\n      typeof lineStyle === 'string'\n        ? ''\n        : lineStyle\n            .map(function(v) {\n              return getMarkupValue(v, size, scale);\n            })\n            .join(',');\n    var opacity = markup.opacity || 1;\n    return {\n      'stroke-linecap': lineCap,\n      'stroke-linejoin': lineJoin,\n      'stroke-width': strokeWidth || 0,\n      'stroke-dasharray': dashes,\n      stroke: stroke,\n      fill: fill,\n      opacity: opacity\n    };\n  };\n\n  var isDefined = function isDefined(value) {\n    return value != null;\n  };\n\n  var getMarkupRect = function getMarkupRect(rect, size) {\n    var scalar =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n    var left =\n      getMarkupValue(rect.x, size, scalar, 'width') ||\n      getMarkupValue(rect.left, size, scalar, 'width');\n    var top =\n      getMarkupValue(rect.y, size, scalar, 'height') ||\n      getMarkupValue(rect.top, size, scalar, 'height');\n    var width = getMarkupValue(rect.width, size, scalar, 'width');\n    var height = getMarkupValue(rect.height, size, scalar, 'height');\n    var right = getMarkupValue(rect.right, size, scalar, 'width');\n    var bottom = getMarkupValue(rect.bottom, size, scalar, 'height');\n\n    if (!isDefined(top)) {\n      if (isDefined(height) && isDefined(bottom)) {\n        top = size.height - height - bottom;\n      } else {\n        top = bottom;\n      }\n    }\n\n    if (!isDefined(left)) {\n      if (isDefined(width) && isDefined(right)) {\n        left = size.width - width - right;\n      } else {\n        left = right;\n      }\n    }\n\n    if (!isDefined(width)) {\n      if (isDefined(left) && isDefined(right)) {\n        width = size.width - left - right;\n      } else {\n        width = 0;\n      }\n    }\n\n    if (!isDefined(height)) {\n      if (isDefined(top) && isDefined(bottom)) {\n        height = size.height - top - bottom;\n      } else {\n        height = 0;\n      }\n    }\n\n    return {\n      x: left || 0,\n      y: top || 0,\n      width: width || 0,\n      height: height || 0\n    };\n  };\n\n  var pointsToPathShape = function pointsToPathShape(points) {\n    return points\n      .map(function(point, index) {\n        return ''\n          .concat(index === 0 ? 'M' : 'L', ' ')\n          .concat(point.x, ' ')\n          .concat(point.y);\n      })\n      .join(' ');\n  };\n\n  var setAttributes = function setAttributes(element, attr) {\n    return Object.keys(attr).forEach(function(key) {\n      return element.setAttribute(key, attr[key]);\n    });\n  };\n\n  var ns = 'http://www.w3.org/2000/svg';\n  var svg = function svg(tag, attr) {\n    var element = document.createElementNS(ns, tag);\n    if (attr) {\n      setAttributes(element, attr);\n    }\n    return element;\n  };\n\n  var updateRect = function updateRect(element) {\n    return setAttributes(\n      element,\n      Object.assign({}, element.rect, element.styles)\n    );\n  };\n\n  var updateEllipse = function updateEllipse(element) {\n    var cx = element.rect.x + element.rect.width * 0.5;\n    var cy = element.rect.y + element.rect.height * 0.5;\n    var rx = element.rect.width * 0.5;\n    var ry = element.rect.height * 0.5;\n    return setAttributes(\n      element,\n      Object.assign(\n        {\n          cx: cx,\n          cy: cy,\n          rx: rx,\n          ry: ry\n        },\n        element.styles\n      )\n    );\n  };\n\n  var IMAGE_FIT_STYLE = {\n    contain: 'xMidYMid meet',\n    cover: 'xMidYMid slice'\n  };\n\n  var updateImage = function updateImage(element, markup) {\n    setAttributes(\n      element,\n      Object.assign({}, element.rect, element.styles, {\n        preserveAspectRatio: IMAGE_FIT_STYLE[markup.fit] || 'none'\n      })\n    );\n  };\n\n  var TEXT_ANCHOR = {\n    left: 'start',\n    center: 'middle',\n    right: 'end'\n  };\n\n  var updateText = function updateText(element, markup, size, scale) {\n    var fontSize = getMarkupValue(markup.fontSize, size, scale);\n    var fontFamily = markup.fontFamily || 'sans-serif';\n    var fontWeight = markup.fontWeight || 'normal';\n    var textAlign = TEXT_ANCHOR[markup.textAlign] || 'start';\n\n    setAttributes(\n      element,\n      Object.assign({}, element.rect, element.styles, {\n        'stroke-width': 0,\n        'font-weight': fontWeight,\n        'font-size': fontSize,\n        'font-family': fontFamily,\n        'text-anchor': textAlign\n      })\n    );\n\n    // update text\n    if (element.text !== markup.text) {\n      element.text = markup.text;\n      element.textContent = markup.text.length ? markup.text : ' ';\n    }\n  };\n\n  var updateLine = function updateLine(element, markup, size, scale) {\n    setAttributes(\n      element,\n      Object.assign({}, element.rect, element.styles, {\n        fill: 'none'\n      })\n    );\n\n    var line = element.childNodes[0];\n    var begin = element.childNodes[1];\n    var end = element.childNodes[2];\n\n    var origin = element.rect;\n\n    var target = {\n      x: element.rect.x + element.rect.width,\n      y: element.rect.y + element.rect.height\n    };\n\n    setAttributes(line, {\n      x1: origin.x,\n      y1: origin.y,\n      x2: target.x,\n      y2: target.y\n    });\n\n    if (!markup.lineDecoration) return;\n\n    begin.style.display = 'none';\n    end.style.display = 'none';\n\n    var v = vectorNormalize({\n      x: target.x - origin.x,\n      y: target.y - origin.y\n    });\n\n    var l = getMarkupValue(0.05, size, scale);\n\n    if (markup.lineDecoration.indexOf('arrow-begin') !== -1) {\n      var arrowBeginRotationPoint = vectorMultiply(v, l);\n      var arrowBeginCenter = vectorAdd(origin, arrowBeginRotationPoint);\n      var arrowBeginA = vectorRotate(origin, 2, arrowBeginCenter);\n      var arrowBeginB = vectorRotate(origin, -2, arrowBeginCenter);\n\n      setAttributes(begin, {\n        style: 'display:block;',\n        d: 'M'\n          .concat(arrowBeginA.x, ',')\n          .concat(arrowBeginA.y, ' L')\n          .concat(origin.x, ',')\n          .concat(origin.y, ' L')\n          .concat(arrowBeginB.x, ',')\n          .concat(arrowBeginB.y)\n      });\n    }\n\n    if (markup.lineDecoration.indexOf('arrow-end') !== -1) {\n      var arrowEndRotationPoint = vectorMultiply(v, -l);\n      var arrowEndCenter = vectorAdd(target, arrowEndRotationPoint);\n      var arrowEndA = vectorRotate(target, 2, arrowEndCenter);\n      var arrowEndB = vectorRotate(target, -2, arrowEndCenter);\n\n      setAttributes(end, {\n        style: 'display:block;',\n        d: 'M'\n          .concat(arrowEndA.x, ',')\n          .concat(arrowEndA.y, ' L')\n          .concat(target.x, ',')\n          .concat(target.y, ' L')\n          .concat(arrowEndB.x, ',')\n          .concat(arrowEndB.y)\n      });\n    }\n  };\n\n  var updatePath = function updatePath(element, markup, size, scale) {\n    setAttributes(\n      element,\n      Object.assign({}, element.styles, {\n        fill: 'none',\n        d: pointsToPathShape(\n          markup.points.map(function(point) {\n            return {\n              x: getMarkupValue(point.x, size, scale, 'width'),\n              y: getMarkupValue(point.y, size, scale, 'height')\n            };\n          })\n        )\n      })\n    );\n  };\n\n  var createShape = function createShape(node) {\n    return function(markup) {\n      return svg(node, { id: markup.id });\n    };\n  };\n\n  var createImage = function createImage(markup) {\n    var shape = svg('image', {\n      id: markup.id,\n      'stroke-linecap': 'round',\n      'stroke-linejoin': 'round',\n      opacity: '0'\n    });\n\n    shape.onload = function() {\n      shape.setAttribute('opacity', markup.opacity || 1);\n    };\n    shape.setAttributeNS(\n      'http://www.w3.org/1999/xlink',\n      'xlink:href',\n      markup.src\n    );\n    return shape;\n  };\n\n  var createLine = function createLine(markup) {\n    var shape = svg('g', {\n      id: markup.id,\n      'stroke-linecap': 'round',\n      'stroke-linejoin': 'round'\n    });\n\n    var line = svg('line');\n    shape.appendChild(line);\n\n    var begin = svg('path');\n    shape.appendChild(begin);\n\n    var end = svg('path');\n    shape.appendChild(end);\n\n    return shape;\n  };\n\n  var CREATE_TYPE_ROUTES = {\n    image: createImage,\n    rect: createShape('rect'),\n    ellipse: createShape('ellipse'),\n    text: createShape('text'),\n    path: createShape('path'),\n    line: createLine\n  };\n\n  var UPDATE_TYPE_ROUTES = {\n    rect: updateRect,\n    ellipse: updateEllipse,\n    image: updateImage,\n    text: updateText,\n    path: updatePath,\n    line: updateLine\n  };\n\n  var createMarkupByType = function createMarkupByType(type, markup) {\n    return CREATE_TYPE_ROUTES[type](markup);\n  };\n\n  var updateMarkupByType = function updateMarkupByType(\n    element,\n    type,\n    markup,\n    size,\n    scale\n  ) {\n    if (type !== 'path') {\n      element.rect = getMarkupRect(markup, size, scale);\n    }\n    element.styles = getMarkupStyles(markup, size, scale);\n    UPDATE_TYPE_ROUTES[type](element, markup, size, scale);\n  };\n\n  var MARKUP_RECT = [\n    'x',\n    'y',\n    'left',\n    'top',\n    'right',\n    'bottom',\n    'width',\n    'height'\n  ];\n\n  var toOptionalFraction = function toOptionalFraction(value) {\n    return typeof value === 'string' && /%/.test(value)\n      ? parseFloat(value) / 100\n      : value;\n  };\n\n  // adds default markup properties, clones markup\n  var prepareMarkup = function prepareMarkup(markup) {\n    var _markup = _slicedToArray(markup, 2),\n      type = _markup[0],\n      props = _markup[1];\n\n    var rect = props.points\n      ? {}\n      : MARKUP_RECT.reduce(function(prev, curr) {\n          prev[curr] = toOptionalFraction(props[curr]);\n          return prev;\n        }, {});\n\n    return [\n      type,\n      Object.assign(\n        {\n          zIndex: 0\n        },\n        props,\n        rect\n      )\n    ];\n  };\n\n  var sortMarkupByZIndex = function sortMarkupByZIndex(a, b) {\n    if (a[1].zIndex > b[1].zIndex) {\n      return 1;\n    }\n    if (a[1].zIndex < b[1].zIndex) {\n      return -1;\n    }\n    return 0;\n  };\n\n  var createMarkupView = function createMarkupView(_) {\n    return _.utils.createView({\n      name: 'image-preview-markup',\n      tag: 'svg',\n      ignoreRect: true,\n      mixins: {\n        apis: ['width', 'height', 'crop', 'markup', 'resize', 'dirty']\n      },\n\n      write: function write(_ref) {\n        var root = _ref.root,\n          props = _ref.props;\n\n        if (!props.dirty) return;\n        var crop = props.crop,\n          resize = props.resize,\n          markup = props.markup;\n\n        var viewWidth = props.width;\n        var viewHeight = props.height;\n\n        var cropWidth = crop.width;\n        var cropHeight = crop.height;\n\n        if (resize) {\n          var _size = resize.size;\n\n          var outputWidth = _size && _size.width;\n          var outputHeight = _size && _size.height;\n          var outputFit = resize.mode;\n          var outputUpscale = resize.upscale;\n\n          if (outputWidth && !outputHeight) outputHeight = outputWidth;\n          if (outputHeight && !outputWidth) outputWidth = outputHeight;\n\n          var shouldUpscale =\n            cropWidth < outputWidth && cropHeight < outputHeight;\n\n          if (!shouldUpscale || (shouldUpscale && outputUpscale)) {\n            var scalarWidth = outputWidth / cropWidth;\n            var scalarHeight = outputHeight / cropHeight;\n\n            if (outputFit === 'force') {\n              cropWidth = outputWidth;\n              cropHeight = outputHeight;\n            } else {\n              var scalar;\n              if (outputFit === 'cover') {\n                scalar = Math.max(scalarWidth, scalarHeight);\n              } else if (outputFit === 'contain') {\n                scalar = Math.min(scalarWidth, scalarHeight);\n              }\n              cropWidth = cropWidth * scalar;\n              cropHeight = cropHeight * scalar;\n            }\n          }\n        }\n\n        var size = {\n          width: viewWidth,\n          height: viewHeight\n        };\n\n        root.element.setAttribute('width', size.width);\n        root.element.setAttribute('height', size.height);\n\n        var scale = Math.min(viewWidth / cropWidth, viewHeight / cropHeight);\n\n        // clear\n        root.element.innerHTML = '';\n\n        // get filter\n        var markupFilter = root.query('GET_IMAGE_PREVIEW_MARKUP_FILTER');\n\n        // draw new\n        markup\n          .filter(markupFilter)\n          .map(prepareMarkup)\n          .sort(sortMarkupByZIndex)\n          .forEach(function(markup) {\n            var _markup = _slicedToArray(markup, 2),\n              type = _markup[0],\n              settings = _markup[1];\n\n            // create\n            var element = createMarkupByType(type, settings);\n\n            // update\n            updateMarkupByType(element, type, settings, size, scale);\n\n            // add\n            root.element.appendChild(element);\n          });\n      }\n    });\n  };\n\n  var createVector$1 = function createVector(x, y) {\n    return { x: x, y: y };\n  };\n\n  var vectorDot = function vectorDot(a, b) {\n    return a.x * b.x + a.y * b.y;\n  };\n\n  var vectorSubtract = function vectorSubtract(a, b) {\n    return createVector$1(a.x - b.x, a.y - b.y);\n  };\n\n  var vectorDistanceSquared = function vectorDistanceSquared(a, b) {\n    return vectorDot(vectorSubtract(a, b), vectorSubtract(a, b));\n  };\n\n  var vectorDistance = function vectorDistance(a, b) {\n    return Math.sqrt(vectorDistanceSquared(a, b));\n  };\n\n  var getOffsetPointOnEdge = function getOffsetPointOnEdge(length, rotation) {\n    var a = length;\n\n    var A = 1.5707963267948966;\n    var B = rotation;\n    var C = 1.5707963267948966 - rotation;\n\n    var sinA = Math.sin(A);\n    var sinB = Math.sin(B);\n    var sinC = Math.sin(C);\n    var cosC = Math.cos(C);\n    var ratio = a / sinA;\n    var b = ratio * sinB;\n    var c = ratio * sinC;\n\n    return createVector$1(cosC * b, cosC * c);\n  };\n\n  var getRotatedRectSize = function getRotatedRectSize(rect, rotation) {\n    var w = rect.width;\n    var h = rect.height;\n\n    var hor = getOffsetPointOnEdge(w, rotation);\n    var ver = getOffsetPointOnEdge(h, rotation);\n\n    var tl = createVector$1(rect.x + Math.abs(hor.x), rect.y - Math.abs(hor.y));\n\n    var tr = createVector$1(\n      rect.x + rect.width + Math.abs(ver.y),\n      rect.y + Math.abs(ver.x)\n    );\n\n    var bl = createVector$1(\n      rect.x - Math.abs(ver.y),\n      rect.y + rect.height - Math.abs(ver.x)\n    );\n\n    return {\n      width: vectorDistance(tl, tr),\n      height: vectorDistance(tl, bl)\n    };\n  };\n\n  var calculateCanvasSize = function calculateCanvasSize(\n    image,\n    canvasAspectRatio\n  ) {\n    var zoom =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n    var imageAspectRatio = image.height / image.width;\n\n    // determine actual pixels on x and y axis\n    var canvasWidth = 1;\n    var canvasHeight = canvasAspectRatio;\n    var imgWidth = 1;\n    var imgHeight = imageAspectRatio;\n    if (imgHeight > canvasHeight) {\n      imgHeight = canvasHeight;\n      imgWidth = imgHeight / imageAspectRatio;\n    }\n\n    var scalar = Math.max(canvasWidth / imgWidth, canvasHeight / imgHeight);\n    var width = image.width / (zoom * scalar * imgWidth);\n    var height = width * canvasAspectRatio;\n\n    return {\n      width: width,\n      height: height\n    };\n  };\n\n  var getImageRectZoomFactor = function getImageRectZoomFactor(\n    imageRect,\n    cropRect,\n    rotation,\n    center\n  ) {\n    // calculate available space round image center position\n    var cx = center.x > 0.5 ? 1 - center.x : center.x;\n    var cy = center.y > 0.5 ? 1 - center.y : center.y;\n    var imageWidth = cx * 2 * imageRect.width;\n    var imageHeight = cy * 2 * imageRect.height;\n\n    // calculate rotated crop rectangle size\n    var rotatedCropSize = getRotatedRectSize(cropRect, rotation);\n\n    // calculate scalar required to fit image\n    return Math.max(\n      rotatedCropSize.width / imageWidth,\n      rotatedCropSize.height / imageHeight\n    );\n  };\n\n  var getCenteredCropRect = function getCenteredCropRect(\n    container,\n    aspectRatio\n  ) {\n    var width = container.width;\n    var height = width * aspectRatio;\n    if (height > container.height) {\n      height = container.height;\n      width = height / aspectRatio;\n    }\n    var x = (container.width - width) * 0.5;\n    var y = (container.height - height) * 0.5;\n\n    return {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    };\n  };\n\n  var getCurrentCropSize = function getCurrentCropSize(imageSize) {\n    var crop =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var zoom = crop.zoom,\n      rotation = crop.rotation,\n      center = crop.center,\n      aspectRatio = crop.aspectRatio;\n\n    if (!aspectRatio) aspectRatio = imageSize.height / imageSize.width;\n\n    var canvasSize = calculateCanvasSize(imageSize, aspectRatio, zoom);\n\n    var canvasCenter = {\n      x: canvasSize.width * 0.5,\n      y: canvasSize.height * 0.5\n    };\n\n    var stage = {\n      x: 0,\n      y: 0,\n      width: canvasSize.width,\n      height: canvasSize.height,\n      center: canvasCenter\n    };\n\n    var shouldLimit = typeof crop.scaleToFit === 'undefined' || crop.scaleToFit;\n\n    var stageZoomFactor = getImageRectZoomFactor(\n      imageSize,\n      getCenteredCropRect(stage, aspectRatio),\n      rotation,\n      shouldLimit ? center : { x: 0.5, y: 0.5 }\n    );\n\n    var scale = zoom * stageZoomFactor;\n\n    // start drawing\n    return {\n      widthFloat: canvasSize.width / scale,\n      heightFloat: canvasSize.height / scale,\n      width: Math.round(canvasSize.width / scale),\n      height: Math.round(canvasSize.height / scale)\n    };\n  };\n\n  var IMAGE_SCALE_SPRING_PROPS = {\n    type: 'spring',\n    stiffness: 0.5,\n    damping: 0.45,\n    mass: 10\n  };\n\n  // does horizontal and vertical flipping\n  var createBitmapView = function createBitmapView(_) {\n    return _.utils.createView({\n      name: 'image-bitmap',\n      ignoreRect: true,\n      mixins: { styles: ['scaleX', 'scaleY'] },\n      create: function create(_ref) {\n        var root = _ref.root,\n          props = _ref.props;\n        root.appendChild(props.image);\n      }\n    });\n  };\n\n  // shifts and rotates image\n  var createImageCanvasWrapper = function createImageCanvasWrapper(_) {\n    return _.utils.createView({\n      name: 'image-canvas-wrapper',\n      tag: 'div',\n      ignoreRect: true,\n      mixins: {\n        apis: ['crop', 'width', 'height'],\n\n        styles: [\n          'originX',\n          'originY',\n          'translateX',\n          'translateY',\n          'scaleX',\n          'scaleY',\n          'rotateZ'\n        ],\n\n        animations: {\n          originX: IMAGE_SCALE_SPRING_PROPS,\n          originY: IMAGE_SCALE_SPRING_PROPS,\n          scaleX: IMAGE_SCALE_SPRING_PROPS,\n          scaleY: IMAGE_SCALE_SPRING_PROPS,\n          translateX: IMAGE_SCALE_SPRING_PROPS,\n          translateY: IMAGE_SCALE_SPRING_PROPS,\n          rotateZ: IMAGE_SCALE_SPRING_PROPS\n        }\n      },\n\n      create: function create(_ref2) {\n        var root = _ref2.root,\n          props = _ref2.props;\n        props.width = props.image.width;\n        props.height = props.image.height;\n        root.ref.bitmap = root.appendChildView(\n          root.createChildView(createBitmapView(_), { image: props.image })\n        );\n      },\n      write: function write(_ref3) {\n        var root = _ref3.root,\n          props = _ref3.props;\n        var flip = props.crop.flip;\n        var bitmap = root.ref.bitmap;\n        bitmap.scaleX = flip.horizontal ? -1 : 1;\n        bitmap.scaleY = flip.vertical ? -1 : 1;\n      }\n    });\n  };\n\n  // clips canvas to correct aspect ratio\n  var createClipView = function createClipView(_) {\n    return _.utils.createView({\n      name: 'image-clip',\n      tag: 'div',\n      ignoreRect: true,\n      mixins: {\n        apis: [\n          'crop',\n          'markup',\n          'resize',\n          'width',\n          'height',\n          'dirty',\n          'background'\n        ],\n\n        styles: ['width', 'height', 'opacity'],\n        animations: {\n          opacity: { type: 'tween', duration: 250 }\n        }\n      },\n\n      didWriteView: function didWriteView(_ref4) {\n        var root = _ref4.root,\n          props = _ref4.props;\n        if (!props.background) return;\n        root.element.style.backgroundColor = props.background;\n      },\n      create: function create(_ref5) {\n        var root = _ref5.root,\n          props = _ref5.props;\n\n        root.ref.image = root.appendChildView(\n          root.createChildView(\n            createImageCanvasWrapper(_),\n            Object.assign({}, props)\n          )\n        );\n\n        root.ref.createMarkup = function() {\n          if (root.ref.markup) return;\n          root.ref.markup = root.appendChildView(\n            root.createChildView(createMarkupView(_), Object.assign({}, props))\n          );\n        };\n\n        root.ref.destroyMarkup = function() {\n          if (!root.ref.markup) return;\n          root.removeChildView(root.ref.markup);\n          root.ref.markup = null;\n        };\n\n        // set up transparency grid\n        var transparencyIndicator = root.query(\n          'GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR'\n        );\n        if (transparencyIndicator === null) return;\n\n        // grid pattern\n        if (transparencyIndicator === 'grid') {\n          root.element.dataset.transparencyIndicator = transparencyIndicator;\n        }\n        // basic color\n        else {\n          root.element.dataset.transparencyIndicator = 'color';\n        }\n      },\n      write: function write(_ref6) {\n        var root = _ref6.root,\n          props = _ref6.props,\n          shouldOptimize = _ref6.shouldOptimize;\n        var crop = props.crop,\n          markup = props.markup,\n          resize = props.resize,\n          dirty = props.dirty,\n          width = props.width,\n          height = props.height;\n\n        root.ref.image.crop = crop;\n\n        var stage = {\n          x: 0,\n          y: 0,\n          width: width,\n          height: height,\n          center: {\n            x: width * 0.5,\n            y: height * 0.5\n          }\n        };\n\n        var image = {\n          width: root.ref.image.width,\n          height: root.ref.image.height\n        };\n\n        var origin = {\n          x: crop.center.x * image.width,\n          y: crop.center.y * image.height\n        };\n\n        var translation = {\n          x: stage.center.x - image.width * crop.center.x,\n          y: stage.center.y - image.height * crop.center.y\n        };\n\n        var rotation = Math.PI * 2 + (crop.rotation % (Math.PI * 2));\n\n        var cropAspectRatio = crop.aspectRatio || image.height / image.width;\n\n        var shouldLimit =\n          typeof crop.scaleToFit === 'undefined' || crop.scaleToFit;\n\n        var stageZoomFactor = getImageRectZoomFactor(\n          image,\n          getCenteredCropRect(stage, cropAspectRatio),\n\n          rotation,\n          shouldLimit ? crop.center : { x: 0.5, y: 0.5 }\n        );\n\n        var scale = crop.zoom * stageZoomFactor;\n\n        // update markup view\n        if (markup && markup.length) {\n          root.ref.createMarkup();\n          root.ref.markup.width = width;\n          root.ref.markup.height = height;\n          root.ref.markup.resize = resize;\n          root.ref.markup.dirty = dirty;\n          root.ref.markup.markup = markup;\n          root.ref.markup.crop = getCurrentCropSize(image, crop);\n        } else if (root.ref.markup) {\n          root.ref.destroyMarkup();\n        }\n\n        // update image view\n        var imageView = root.ref.image;\n\n        // don't update clip layout\n        if (shouldOptimize) {\n          imageView.originX = null;\n          imageView.originY = null;\n          imageView.translateX = null;\n          imageView.translateY = null;\n          imageView.rotateZ = null;\n          imageView.scaleX = null;\n          imageView.scaleY = null;\n          return;\n        }\n\n        imageView.originX = origin.x;\n        imageView.originY = origin.y;\n        imageView.translateX = translation.x;\n        imageView.translateY = translation.y;\n        imageView.rotateZ = rotation;\n        imageView.scaleX = scale;\n        imageView.scaleY = scale;\n      }\n    });\n  };\n\n  var createImageView = function createImageView(_) {\n    return _.utils.createView({\n      name: 'image-preview',\n      tag: 'div',\n      ignoreRect: true,\n      mixins: {\n        apis: ['image', 'crop', 'markup', 'resize', 'dirty', 'background'],\n\n        styles: ['translateY', 'scaleX', 'scaleY', 'opacity'],\n\n        animations: {\n          scaleX: IMAGE_SCALE_SPRING_PROPS,\n          scaleY: IMAGE_SCALE_SPRING_PROPS,\n          translateY: IMAGE_SCALE_SPRING_PROPS,\n          opacity: { type: 'tween', duration: 400 }\n        }\n      },\n\n      create: function create(_ref7) {\n        var root = _ref7.root,\n          props = _ref7.props;\n        root.ref.clip = root.appendChildView(\n          root.createChildView(createClipView(_), {\n            id: props.id,\n            image: props.image,\n            crop: props.crop,\n            markup: props.markup,\n            resize: props.resize,\n            dirty: props.dirty,\n            background: props.background\n          })\n        );\n      },\n      write: function write(_ref8) {\n        var root = _ref8.root,\n          props = _ref8.props,\n          shouldOptimize = _ref8.shouldOptimize;\n        var clip = root.ref.clip;\n        var image = props.image,\n          crop = props.crop,\n          markup = props.markup,\n          resize = props.resize,\n          dirty = props.dirty;\n\n        clip.crop = crop;\n        clip.markup = markup;\n        clip.resize = resize;\n        clip.dirty = dirty;\n\n        // don't update clip layout\n        clip.opacity = shouldOptimize ? 0 : 1;\n\n        // don't re-render if optimizing or hidden (width will be zero resulting in weird animations)\n        if (shouldOptimize || root.rect.element.hidden) return;\n\n        // calculate scaled preview image size\n        var imageAspectRatio = image.height / image.width;\n        var aspectRatio = crop.aspectRatio || imageAspectRatio;\n\n        // calculate container size\n        var containerWidth = root.rect.inner.width;\n        var containerHeight = root.rect.inner.height;\n\n        var fixedPreviewHeight = root.query('GET_IMAGE_PREVIEW_HEIGHT');\n        var minPreviewHeight = root.query('GET_IMAGE_PREVIEW_MIN_HEIGHT');\n        var maxPreviewHeight = root.query('GET_IMAGE_PREVIEW_MAX_HEIGHT');\n\n        var panelAspectRatio = root.query('GET_PANEL_ASPECT_RATIO');\n        var allowMultiple = root.query('GET_ALLOW_MULTIPLE');\n\n        if (panelAspectRatio && !allowMultiple) {\n          fixedPreviewHeight = containerWidth * panelAspectRatio;\n          aspectRatio = panelAspectRatio;\n        }\n\n        // determine clip width and height\n        var clipHeight =\n          fixedPreviewHeight !== null\n            ? fixedPreviewHeight\n            : Math.max(\n                minPreviewHeight,\n                Math.min(containerWidth * aspectRatio, maxPreviewHeight)\n              );\n\n        var clipWidth = clipHeight / aspectRatio;\n        if (clipWidth > containerWidth) {\n          clipWidth = containerWidth;\n          clipHeight = clipWidth * aspectRatio;\n        }\n\n        if (clipHeight > containerHeight) {\n          clipHeight = containerHeight;\n          clipWidth = containerHeight / aspectRatio;\n        }\n\n        clip.width = clipWidth;\n        clip.height = clipHeight;\n      }\n    });\n  };\n\n  var SVG_MASK =\n    '<svg width=\"500\" height=\"200\" viewBox=\"0 0 500 200\" preserveAspectRatio=\"none\">\\n    <defs>\\n        <radialGradient id=\"gradient-__UID__\" cx=\".5\" cy=\"1.25\" r=\"1.15\">\\n            <stop offset=\\'50%\\' stop-color=\\'#000000\\'/>\\n            <stop offset=\\'56%\\' stop-color=\\'#0a0a0a\\'/>\\n            <stop offset=\\'63%\\' stop-color=\\'#262626\\'/>\\n            <stop offset=\\'69%\\' stop-color=\\'#4f4f4f\\'/>\\n            <stop offset=\\'75%\\' stop-color=\\'#808080\\'/>\\n            <stop offset=\\'81%\\' stop-color=\\'#b1b1b1\\'/>\\n            <stop offset=\\'88%\\' stop-color=\\'#dadada\\'/>\\n            <stop offset=\\'94%\\' stop-color=\\'#f6f6f6\\'/>\\n            <stop offset=\\'100%\\' stop-color=\\'#ffffff\\'/>\\n        </radialGradient>\\n        <mask id=\"mask-__UID__\">\\n            <rect x=\"0\" y=\"0\" width=\"500\" height=\"200\" fill=\"url(#gradient-__UID__)\"></rect>\\n        </mask>\\n    </defs>\\n    <rect x=\"0\" width=\"500\" height=\"200\" fill=\"currentColor\" mask=\"url(#mask-__UID__)\"></rect>\\n</svg>';\n\n  var checkedMyBases = false;\n  var SVGMaskUniqueId = 0;\n\n  var createImageOverlayView = function createImageOverlayView(fpAPI) {\n    return fpAPI.utils.createView({\n      name: 'image-preview-overlay',\n      tag: 'div',\n      ignoreRect: true,\n      create: function create(_ref) {\n        var root = _ref.root,\n          props = _ref.props;\n\n        if (!checkedMyBases && document.querySelector('base')) {\n          SVG_MASK = SVG_MASK.replace(\n            /url\\(\\#/g,\n            'url(' +\n              window.location.href.replace(window.location.hash, '') +\n              '#'\n          );\n          checkedMyBases = true;\n        }\n\n        SVGMaskUniqueId++;\n        root.element.classList.add(\n          'filepond--image-preview-overlay-'.concat(props.status)\n        );\n        root.element.innerHTML = SVG_MASK.replace(/__UID__/g, SVGMaskUniqueId);\n      },\n      mixins: {\n        styles: ['opacity'],\n        animations: {\n          opacity: { type: 'spring', mass: 25 }\n        }\n      }\n    });\n  };\n\n  /**\n   * Bitmap Worker\n   */\n  var BitmapWorker = function BitmapWorker() {\n    self.onmessage = function(e) {\n      createImageBitmap(e.data.message.file).then(function(bitmap) {\n        self.postMessage({ id: e.data.id, message: bitmap }, [bitmap]);\n      });\n    };\n  };\n\n  /**\n   * ColorMatrix Worker\n   */\n  var ColorMatrixWorker = function ColorMatrixWorker() {\n    self.onmessage = function(e) {\n      var imageData = e.data.message.imageData;\n      var matrix = e.data.message.colorMatrix;\n\n      var data = imageData.data;\n      var l = data.length;\n\n      var m11 = matrix[0];\n      var m12 = matrix[1];\n      var m13 = matrix[2];\n      var m14 = matrix[3];\n      var m15 = matrix[4];\n\n      var m21 = matrix[5];\n      var m22 = matrix[6];\n      var m23 = matrix[7];\n      var m24 = matrix[8];\n      var m25 = matrix[9];\n\n      var m31 = matrix[10];\n      var m32 = matrix[11];\n      var m33 = matrix[12];\n      var m34 = matrix[13];\n      var m35 = matrix[14];\n\n      var m41 = matrix[15];\n      var m42 = matrix[16];\n      var m43 = matrix[17];\n      var m44 = matrix[18];\n      var m45 = matrix[19];\n\n      var index = 0,\n        r = 0.0,\n        g = 0.0,\n        b = 0.0,\n        a = 0.0;\n\n      for (; index < l; index += 4) {\n        r = data[index] / 255;\n        g = data[index + 1] / 255;\n        b = data[index + 2] / 255;\n        a = data[index + 3] / 255;\n        data[index] = Math.max(\n          0,\n          Math.min((r * m11 + g * m12 + b * m13 + a * m14 + m15) * 255, 255)\n        );\n        data[index + 1] = Math.max(\n          0,\n          Math.min((r * m21 + g * m22 + b * m23 + a * m24 + m25) * 255, 255)\n        );\n        data[index + 2] = Math.max(\n          0,\n          Math.min((r * m31 + g * m32 + b * m33 + a * m34 + m35) * 255, 255)\n        );\n        data[index + 3] = Math.max(\n          0,\n          Math.min((r * m41 + g * m42 + b * m43 + a * m44 + m45) * 255, 255)\n        );\n      }\n\n      self.postMessage({ id: e.data.id, message: imageData }, [\n        imageData.data.buffer\n      ]);\n    };\n  };\n\n  var getImageSize = function getImageSize(url, cb) {\n    var image = new Image();\n    image.onload = function() {\n      var width = image.naturalWidth;\n      var height = image.naturalHeight;\n      image = null;\n      cb(width, height);\n    };\n    image.src = url;\n  };\n\n  var transforms = {\n    1: function _() {\n      return [1, 0, 0, 1, 0, 0];\n    },\n    2: function _(width) {\n      return [-1, 0, 0, 1, width, 0];\n    },\n    3: function _(width, height) {\n      return [-1, 0, 0, -1, width, height];\n    },\n    4: function _(width, height) {\n      return [1, 0, 0, -1, 0, height];\n    },\n    5: function _() {\n      return [0, 1, 1, 0, 0, 0];\n    },\n    6: function _(width, height) {\n      return [0, 1, -1, 0, height, 0];\n    },\n    7: function _(width, height) {\n      return [0, -1, -1, 0, height, width];\n    },\n    8: function _(width) {\n      return [0, -1, 1, 0, 0, width];\n    }\n  };\n\n  var fixImageOrientation = function fixImageOrientation(\n    ctx,\n    width,\n    height,\n    orientation\n  ) {\n    // no orientation supplied\n    if (orientation === -1) {\n      return;\n    }\n\n    ctx.transform.apply(ctx, transforms[orientation](width, height));\n  };\n\n  // draws the preview image to canvas\n  var createPreviewImage = function createPreviewImage(\n    data,\n    width,\n    height,\n    orientation\n  ) {\n    // can't draw on half pixels\n    width = Math.round(width);\n    height = Math.round(height);\n\n    // draw image\n    var canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    var ctx = canvas.getContext('2d');\n\n    // if is rotated incorrectly swap width and height\n    if (orientation >= 5 && orientation <= 8) {\n      var _ref = [height, width];\n      width = _ref[0];\n      height = _ref[1];\n    }\n\n    // correct image orientation\n    fixImageOrientation(ctx, width, height, orientation);\n\n    // draw the image\n    ctx.drawImage(data, 0, 0, width, height);\n\n    return canvas;\n  };\n\n  var isBitmap = function isBitmap(file) {\n    return /^image/.test(file.type) && !/svg/.test(file.type);\n  };\n\n  var MAX_WIDTH = 10;\n  var MAX_HEIGHT = 10;\n\n  var calculateAverageColor = function calculateAverageColor(image) {\n    var scalar = Math.min(MAX_WIDTH / image.width, MAX_HEIGHT / image.height);\n\n    var canvas = document.createElement('canvas');\n    var ctx = canvas.getContext('2d');\n    var width = (canvas.width = Math.ceil(image.width * scalar));\n    var height = (canvas.height = Math.ceil(image.height * scalar));\n    ctx.drawImage(image, 0, 0, width, height);\n    var data = null;\n    try {\n      data = ctx.getImageData(0, 0, width, height).data;\n    } catch (e) {\n      return null;\n    }\n    var l = data.length;\n\n    var r = 0;\n    var g = 0;\n    var b = 0;\n    var i = 0;\n\n    for (; i < l; i += 4) {\n      r += data[i] * data[i];\n      g += data[i + 1] * data[i + 1];\n      b += data[i + 2] * data[i + 2];\n    }\n\n    r = averageColor(r, l);\n    g = averageColor(g, l);\n    b = averageColor(b, l);\n\n    return { r: r, g: g, b: b };\n  };\n\n  var averageColor = function averageColor(c, l) {\n    return Math.floor(Math.sqrt(c / (l / 4)));\n  };\n\n  var cloneCanvas = function cloneCanvas(origin, target) {\n    target = target || document.createElement('canvas');\n    target.width = origin.width;\n    target.height = origin.height;\n    var ctx = target.getContext('2d');\n    ctx.drawImage(origin, 0, 0);\n    return target;\n  };\n\n  var cloneImageData = function cloneImageData(imageData) {\n    var id;\n    try {\n      id = new ImageData(imageData.width, imageData.height);\n    } catch (e) {\n      var canvas = document.createElement('canvas');\n      var ctx = canvas.getContext('2d');\n      id = ctx.createImageData(imageData.width, imageData.height);\n    }\n    id.data.set(new Uint8ClampedArray(imageData.data));\n    return id;\n  };\n\n  var loadImage = function loadImage(url) {\n    return new Promise(function(resolve, reject) {\n      var img = new Image();\n      img.crossOrigin = 'Anonymous';\n      img.onload = function() {\n        resolve(img);\n      };\n      img.onerror = function(e) {\n        reject(e);\n      };\n      img.src = url;\n    });\n  };\n\n  var createImageWrapperView = function createImageWrapperView(_) {\n    // create overlay view\n    var OverlayView = createImageOverlayView(_);\n\n    var ImageView = createImageView(_);\n    var createWorker = _.utils.createWorker;\n\n    var applyFilter = function applyFilter(root, filter, target) {\n      return new Promise(function(resolve) {\n        // will store image data for future filter updates\n        if (!root.ref.imageData) {\n          root.ref.imageData = target\n            .getContext('2d')\n            .getImageData(0, 0, target.width, target.height);\n        }\n\n        // get image data reference\n        var imageData = cloneImageData(root.ref.imageData);\n\n        if (!filter || filter.length !== 20) {\n          target.getContext('2d').putImageData(imageData, 0, 0);\n          return resolve();\n        }\n\n        var worker = createWorker(ColorMatrixWorker);\n        worker.post(\n          {\n            imageData: imageData,\n            colorMatrix: filter\n          },\n\n          function(response) {\n            // apply filtered colors\n            target.getContext('2d').putImageData(response, 0, 0);\n\n            // stop worker\n            worker.terminate();\n\n            // done!\n            resolve();\n          },\n          [imageData.data.buffer]\n        );\n      });\n    };\n\n    var removeImageView = function removeImageView(root, imageView) {\n      root.removeChildView(imageView);\n      imageView.image.width = 1;\n      imageView.image.height = 1;\n      imageView._destroy();\n    };\n\n    // remove an image\n    var shiftImage = function shiftImage(_ref) {\n      var root = _ref.root;\n      var imageView = root.ref.images.shift();\n      imageView.opacity = 0;\n      imageView.translateY = -15;\n      root.ref.imageViewBin.push(imageView);\n      return imageView;\n    };\n\n    // add new image\n    var pushImage = function pushImage(_ref2) {\n      var root = _ref2.root,\n        props = _ref2.props,\n        image = _ref2.image;\n\n      var id = props.id;\n      var item = root.query('GET_ITEM', { id: id });\n      if (!item) return;\n\n      var crop = item.getMetadata('crop') || {\n        center: {\n          x: 0.5,\n          y: 0.5\n        },\n\n        flip: {\n          horizontal: false,\n          vertical: false\n        },\n\n        zoom: 1,\n        rotation: 0,\n        aspectRatio: null\n      };\n\n      var background = root.query(\n        'GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR'\n      );\n\n      var markup;\n      var resize;\n      var dirty = false;\n      if (root.query('GET_IMAGE_PREVIEW_MARKUP_SHOW')) {\n        markup = item.getMetadata('markup') || [];\n        resize = item.getMetadata('resize');\n        dirty = true;\n      }\n\n      // append image presenter\n      var imageView = root.appendChildView(\n        root.createChildView(ImageView, {\n          id: id,\n          image: image,\n          crop: crop,\n          resize: resize,\n          markup: markup,\n          dirty: dirty,\n          background: background,\n          opacity: 0,\n          scaleX: 1.15,\n          scaleY: 1.15,\n          translateY: 15\n        }),\n\n        root.childViews.length\n      );\n\n      root.ref.images.push(imageView);\n\n      // reveal the preview image\n      imageView.opacity = 1;\n      imageView.scaleX = 1;\n      imageView.scaleY = 1;\n      imageView.translateY = 0;\n\n      // the preview is now ready to be drawn\n      setTimeout(function() {\n        root.dispatch('DID_IMAGE_PREVIEW_SHOW', { id: id });\n      }, 250);\n    };\n\n    var updateImage = function updateImage(_ref3) {\n      var root = _ref3.root,\n        props = _ref3.props;\n      var item = root.query('GET_ITEM', { id: props.id });\n      if (!item) return;\n      var imageView = root.ref.images[root.ref.images.length - 1];\n      imageView.crop = item.getMetadata('crop');\n      imageView.background = root.query(\n        'GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR'\n      );\n      if (root.query('GET_IMAGE_PREVIEW_MARKUP_SHOW')) {\n        imageView.dirty = true;\n        imageView.resize = item.getMetadata('resize');\n        imageView.markup = item.getMetadata('markup');\n      }\n    };\n\n    // replace image preview\n    var didUpdateItemMetadata = function didUpdateItemMetadata(_ref4) {\n      var root = _ref4.root,\n        props = _ref4.props,\n        action = _ref4.action;\n\n      // only filter and crop trigger redraw\n      if (!/crop|filter|markup|resize/.test(action.change.key)) return;\n\n      // no images to update, exit\n      if (!root.ref.images.length) return;\n\n      // no item found, exit\n      var item = root.query('GET_ITEM', { id: props.id });\n      if (!item) return;\n\n      // for now, update existing image when filtering\n      if (/filter/.test(action.change.key)) {\n        var imageView = root.ref.images[root.ref.images.length - 1];\n        applyFilter(root, action.change.value, imageView.image);\n        return;\n      }\n\n      if (/crop|markup|resize/.test(action.change.key)) {\n        var crop = item.getMetadata('crop');\n        var image = root.ref.images[root.ref.images.length - 1];\n\n        // if aspect ratio has changed, we need to create a new image\n        if (Math.abs(crop.aspectRatio - image.crop.aspectRatio) > 0.00001) {\n          var _imageView = shiftImage({ root: root });\n          pushImage({\n            root: root,\n            props: props,\n            image: cloneCanvas(_imageView.image)\n          });\n        }\n        // if not, we can update the current image\n        else {\n          updateImage({ root: root, props: props });\n        }\n      }\n    };\n\n    var canCreateImageBitmap = function canCreateImageBitmap(file) {\n      // Firefox versions before 58 will freeze when running createImageBitmap\n      // in a Web Worker so we detect those versions and return false for support\n      var userAgent = window.navigator.userAgent;\n      var isFirefox = userAgent.match(/Firefox\\/([0-9]+)\\./);\n      var firefoxVersion = isFirefox ? parseInt(isFirefox[1]) : null;\n      if (firefoxVersion <= 58) return false;\n\n      return 'createImageBitmap' in window && isBitmap(file);\n    };\n\n    /**\n     * Write handler for when preview container has been created\n     */\n    var didCreatePreviewContainer = function didCreatePreviewContainer(_ref5) {\n      var root = _ref5.root,\n        props = _ref5.props;\n      var id = props.id;\n\n      // we need to get the file data to determine the eventual image size\n      var item = root.query('GET_ITEM', id);\n      if (!item) return;\n\n      // get url to file (we'll revoke it later on when done)\n      var fileURL = URL.createObjectURL(item.file);\n\n      // determine image size of this item\n      getImageSize(fileURL, function(width, height) {\n        // we can now scale the panel to the final size\n        root.dispatch('DID_IMAGE_PREVIEW_CALCULATE_SIZE', {\n          id: id,\n          width: width,\n          height: height\n        });\n      });\n    };\n\n    var drawPreview = function drawPreview(_ref6) {\n      var root = _ref6.root,\n        props = _ref6.props;\n      var id = props.id;\n\n      // we need to get the file data to determine the eventual image size\n      var item = root.query('GET_ITEM', id);\n      if (!item) return;\n\n      // get url to file (we'll revoke it later on when done)\n      var fileURL = URL.createObjectURL(item.file);\n\n      // fallback\n      var loadPreviewFallback = function loadPreviewFallback() {\n        // let's scale the image in the main thread :(\n        loadImage(fileURL).then(previewImageLoaded);\n      };\n\n      // image is now ready\n      var previewImageLoaded = function previewImageLoaded(imageData) {\n        // the file url is no longer needed\n        URL.revokeObjectURL(fileURL);\n\n        // draw the scaled down version here and use that as source so bitmapdata can be closed\n        // orientation info\n        var exif = item.getMetadata('exif') || {};\n        var orientation = exif.orientation || -1;\n\n        // get width and height from action, and swap if orientation is incorrect\n        var width = imageData.width,\n          height = imageData.height;\n        if (orientation >= 5 && orientation <= 8) {\n          var _ref7 = [height, width];\n          width = _ref7[0];\n          height = _ref7[1];\n        }\n\n        // scale canvas based on pixel density\n        // we multiply by .75 as that creates smaller but still clear images on screens with high res displays\n        var pixelDensityFactor = Math.max(1, window.devicePixelRatio * 0.75);\n\n        // we want as much pixels to work with as possible,\n        // this multiplies the minimum image resolution,\n        // so when zooming in it doesn't get too blurry\n        var zoomFactor = root.query('GET_IMAGE_PREVIEW_ZOOM_FACTOR');\n\n        // imaeg scale factor\n        var scaleFactor = zoomFactor * pixelDensityFactor;\n\n        // calculate scaled preview image size\n        var previewImageRatio = height / width;\n\n        // calculate image preview height and width\n        var previewContainerWidth = root.rect.element.width;\n        var previewContainerHeight = root.rect.element.height;\n\n        var imageWidth = previewContainerWidth;\n        var imageHeight = imageWidth * previewImageRatio;\n\n        if (previewImageRatio > 1) {\n          imageWidth = Math.min(width, previewContainerWidth * scaleFactor);\n          imageHeight = imageWidth * previewImageRatio;\n        } else {\n          imageHeight = Math.min(height, previewContainerHeight * scaleFactor);\n          imageWidth = imageHeight / previewImageRatio;\n        }\n\n        // transfer to image tag so no canvas memory wasted on iOS\n        var previewImage = createPreviewImage(\n          imageData,\n          imageWidth,\n          imageHeight,\n          orientation\n        );\n\n        // done\n        var done = function done() {\n          // calculate average image color, disabled for now\n          var averageColor = root.query(\n            'GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR'\n          )\n            ? calculateAverageColor(data)\n            : null;\n          item.setMetadata('color', averageColor, true);\n\n          // data has been transferred to canvas ( if was ImageBitmap )\n          if ('close' in imageData) {\n            imageData.close();\n          }\n\n          // show the overlay\n          root.ref.overlayShadow.opacity = 1;\n\n          // create the first image\n          pushImage({ root: root, props: props, image: previewImage });\n        };\n\n        // apply filter\n        var filter = item.getMetadata('filter');\n        if (filter) {\n          applyFilter(root, filter, previewImage).then(done);\n        } else {\n          done();\n        }\n      };\n\n      // if we support scaling using createImageBitmap we use a worker\n      if (canCreateImageBitmap(item.file)) {\n        // let's scale the image in a worker\n        var worker = createWorker(BitmapWorker);\n\n        worker.post(\n          {\n            file: item.file\n          },\n\n          function(imageBitmap) {\n            // destroy worker\n            worker.terminate();\n\n            // no bitmap returned, must be something wrong,\n            // try the oldschool way\n            if (!imageBitmap) {\n              loadPreviewFallback();\n              return;\n            }\n\n            // yay we got our bitmap, let's continue showing the preview\n            previewImageLoaded(imageBitmap);\n          }\n        );\n      } else {\n        // create fallback preview\n        loadPreviewFallback();\n      }\n    };\n\n    /**\n     * Write handler for when the preview image is ready to be animated\n     */\n    var didDrawPreview = function didDrawPreview(_ref8) {\n      var root = _ref8.root;\n      // get last added image\n      var image = root.ref.images[root.ref.images.length - 1];\n      image.translateY = 0;\n      image.scaleX = 1.0;\n      image.scaleY = 1.0;\n      image.opacity = 1;\n    };\n\n    /**\n     * Write handler for when the preview has been loaded\n     */\n    var restoreOverlay = function restoreOverlay(_ref9) {\n      var root = _ref9.root;\n      root.ref.overlayShadow.opacity = 1;\n      root.ref.overlayError.opacity = 0;\n      root.ref.overlaySuccess.opacity = 0;\n    };\n\n    var didThrowError = function didThrowError(_ref10) {\n      var root = _ref10.root;\n      root.ref.overlayShadow.opacity = 0.25;\n      root.ref.overlayError.opacity = 1;\n    };\n\n    var didCompleteProcessing = function didCompleteProcessing(_ref11) {\n      var root = _ref11.root;\n      root.ref.overlayShadow.opacity = 0.25;\n      root.ref.overlaySuccess.opacity = 1;\n    };\n\n    /**\n     * Constructor\n     */\n    var create = function create(_ref12) {\n      var root = _ref12.root;\n\n      // image view\n      root.ref.images = [];\n\n      // the preview image data (we need this to filter the image)\n      root.ref.imageData = null;\n\n      // image bin\n      root.ref.imageViewBin = [];\n\n      // image overlays\n      root.ref.overlayShadow = root.appendChildView(\n        root.createChildView(OverlayView, {\n          opacity: 0,\n          status: 'idle'\n        })\n      );\n\n      root.ref.overlaySuccess = root.appendChildView(\n        root.createChildView(OverlayView, {\n          opacity: 0,\n          status: 'success'\n        })\n      );\n\n      root.ref.overlayError = root.appendChildView(\n        root.createChildView(OverlayView, {\n          opacity: 0,\n          status: 'failure'\n        })\n      );\n    };\n\n    return _.utils.createView({\n      name: 'image-preview-wrapper',\n      create: create,\n      styles: ['height'],\n\n      apis: ['height'],\n\n      destroy: function destroy(_ref13) {\n        var root = _ref13.root;\n        // we resize the image so memory on iOS 12 is released more quickly (it seems)\n        root.ref.images.forEach(function(imageView) {\n          imageView.image.width = 1;\n          imageView.image.height = 1;\n        });\n      },\n      didWriteView: function didWriteView(_ref14) {\n        var root = _ref14.root;\n        root.ref.images.forEach(function(imageView) {\n          imageView.dirty = false;\n        });\n      },\n      write: _.utils.createRoute(\n        {\n          // image preview stated\n          DID_IMAGE_PREVIEW_DRAW: didDrawPreview,\n          DID_IMAGE_PREVIEW_CONTAINER_CREATE: didCreatePreviewContainer,\n          DID_FINISH_CALCULATE_PREVIEWSIZE: drawPreview,\n          DID_UPDATE_ITEM_METADATA: didUpdateItemMetadata,\n\n          // file states\n          DID_THROW_ITEM_LOAD_ERROR: didThrowError,\n          DID_THROW_ITEM_PROCESSING_ERROR: didThrowError,\n          DID_THROW_ITEM_INVALID: didThrowError,\n          DID_COMPLETE_ITEM_PROCESSING: didCompleteProcessing,\n          DID_START_ITEM_PROCESSING: restoreOverlay,\n          DID_REVERT_ITEM_PROCESSING: restoreOverlay\n        },\n        function(_ref15) {\n          var root = _ref15.root;\n\n          // views on death row\n          var viewsToRemove = root.ref.imageViewBin.filter(function(imageView) {\n            return imageView.opacity === 0;\n          });\n\n          // views to retain\n          root.ref.imageViewBin = root.ref.imageViewBin.filter(function(\n            imageView\n          ) {\n            return imageView.opacity > 0;\n          });\n\n          // remove these views\n          viewsToRemove.forEach(function(imageView) {\n            return removeImageView(root, imageView);\n          });\n          viewsToRemove.length = 0;\n        }\n      )\n    });\n  };\n\n  /**\n   * Image Preview Plugin\n   */\n  var plugin = function plugin(fpAPI) {\n    var addFilter = fpAPI.addFilter,\n      utils = fpAPI.utils;\n    var Type = utils.Type,\n      createRoute = utils.createRoute,\n      isFile = utils.isFile;\n\n    // imagePreviewView\n    var imagePreviewView = createImageWrapperView(fpAPI);\n\n    // called for each view that is created right after the 'create' method\n    addFilter('CREATE_VIEW', function(viewAPI) {\n      // get reference to created view\n      var is = viewAPI.is,\n        view = viewAPI.view,\n        query = viewAPI.query;\n\n      // only hook up to item view and only if is enabled for this cropper\n      if (!is('file') || !query('GET_ALLOW_IMAGE_PREVIEW')) return;\n\n      // create the image preview plugin, but only do so if the item is an image\n      var didLoadItem = function didLoadItem(_ref) {\n        var root = _ref.root,\n          props = _ref.props;\n        var id = props.id;\n        var item = query('GET_ITEM', id);\n\n        // item could theoretically have been removed in the mean time\n        if (!item || !isFile(item.file) || item.archived) return;\n\n        // get the file object\n        var file = item.file;\n\n        // exit if this is not an image\n        if (!isPreviewableImage(file)) return;\n\n        // test if is filtered\n        if (!query('GET_IMAGE_PREVIEW_FILTER_ITEM')(item)) return;\n\n        // exit if image size is too high and no createImageBitmap support\n        // this would simply bring the browser to its knees and that is not what we want\n        var supportsCreateImageBitmap = 'createImageBitmap' in (window || {});\n        var maxPreviewFileSize = query('GET_IMAGE_PREVIEW_MAX_FILE_SIZE');\n        if (\n          !supportsCreateImageBitmap &&\n          maxPreviewFileSize &&\n          file.size > maxPreviewFileSize\n        )\n          return;\n\n        // set preview view\n        root.ref.imagePreview = view.appendChildView(\n          view.createChildView(imagePreviewView, { id: id })\n        );\n\n        // update height if is fixed\n        var fixedPreviewHeight = root.query('GET_IMAGE_PREVIEW_HEIGHT');\n        if (fixedPreviewHeight) {\n          root.dispatch('DID_UPDATE_PANEL_HEIGHT', {\n            id: item.id,\n            height: fixedPreviewHeight\n          });\n        }\n\n        // now ready\n        var queue =\n          !supportsCreateImageBitmap &&\n          file.size > query('GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE');\n        root.dispatch('DID_IMAGE_PREVIEW_CONTAINER_CREATE', { id: id }, queue);\n      };\n\n      var rescaleItem = function rescaleItem(root, props) {\n        if (!root.ref.imagePreview) return;\n        var id = props.id;\n\n        // get item\n        var item = root.query('GET_ITEM', { id: id });\n        if (!item) return;\n\n        // if is fixed height or panel has aspect ratio, exit here, height has already been defined\n        var panelAspectRatio = root.query('GET_PANEL_ASPECT_RATIO');\n        var itemPanelAspectRatio = root.query('GET_ITEM_PANEL_ASPECT_RATIO');\n        var fixedHeight = root.query('GET_IMAGE_PREVIEW_HEIGHT');\n        if (panelAspectRatio || itemPanelAspectRatio || fixedHeight) return;\n\n        // no data!\n        var _root$ref = root.ref,\n          imageWidth = _root$ref.imageWidth,\n          imageHeight = _root$ref.imageHeight;\n        if (!imageWidth || !imageHeight) return;\n\n        // get height min and max\n        var minPreviewHeight = root.query('GET_IMAGE_PREVIEW_MIN_HEIGHT');\n        var maxPreviewHeight = root.query('GET_IMAGE_PREVIEW_MAX_HEIGHT');\n\n        // orientation info\n        var exif = item.getMetadata('exif') || {};\n        var orientation = exif.orientation || -1;\n\n        // get width and height from action, and swap of orientation is incorrect\n        if (orientation >= 5 && orientation <= 8) {\n          var _ref2 = [imageHeight, imageWidth];\n          imageWidth = _ref2[0];\n          imageHeight = _ref2[1];\n        }\n\n        // scale up width and height when we're dealing with an SVG\n        if (!isBitmap(item.file) || root.query('GET_IMAGE_PREVIEW_UPSCALE')) {\n          var scalar = 2048 / imageWidth;\n          imageWidth *= scalar;\n          imageHeight *= scalar;\n        }\n\n        // image aspect ratio\n        var imageAspectRatio = imageHeight / imageWidth;\n\n        // we need the item to get to the crop size\n        var previewAspectRatio =\n          (item.getMetadata('crop') || {}).aspectRatio || imageAspectRatio;\n\n        // preview height range\n        var previewHeightMax = Math.max(\n          minPreviewHeight,\n          Math.min(imageHeight, maxPreviewHeight)\n        );\n        var itemWidth = root.rect.element.width;\n        var previewHeight = Math.min(\n          itemWidth * previewAspectRatio,\n          previewHeightMax\n        );\n\n        // request update to panel height\n        root.dispatch('DID_UPDATE_PANEL_HEIGHT', {\n          id: item.id,\n          height: previewHeight\n        });\n      };\n\n      var didResizeView = function didResizeView(_ref3) {\n        var root = _ref3.root;\n        // actions in next write operation\n        root.ref.shouldRescale = true;\n      };\n\n      var didUpdateItemMetadata = function didUpdateItemMetadata(_ref4) {\n        var root = _ref4.root,\n          action = _ref4.action;\n\n        if (action.change.key !== 'crop') return;\n\n        // actions in next write operation\n        root.ref.shouldRescale = true;\n      };\n\n      var didCalculatePreviewSize = function didCalculatePreviewSize(_ref5) {\n        var root = _ref5.root,\n          action = _ref5.action;\n\n        // remember dimensions\n        root.ref.imageWidth = action.width;\n        root.ref.imageHeight = action.height;\n\n        // actions in next write operation\n        root.ref.shouldRescale = true;\n        root.ref.shouldDrawPreview = true;\n\n        // as image load could take a while and fire when draw loop is resting we need to give it a kick\n        root.dispatch('KICK');\n      };\n\n      // start writing\n      view.registerWriter(\n        createRoute(\n          {\n            DID_RESIZE_ROOT: didResizeView,\n            DID_STOP_RESIZE: didResizeView,\n            DID_LOAD_ITEM: didLoadItem,\n            DID_IMAGE_PREVIEW_CALCULATE_SIZE: didCalculatePreviewSize,\n            DID_UPDATE_ITEM_METADATA: didUpdateItemMetadata\n          },\n          function(_ref6) {\n            var root = _ref6.root,\n              props = _ref6.props;\n\n            // no preview view attached\n            if (!root.ref.imagePreview) return;\n\n            // don't do anything while hidden\n            if (root.rect.element.hidden) return;\n\n            // resize the item panel\n            if (root.ref.shouldRescale) {\n              rescaleItem(root, props);\n              root.ref.shouldRescale = false;\n            }\n\n            if (root.ref.shouldDrawPreview) {\n              // queue till next frame so we're sure the height has been applied this forces the draw image call inside the wrapper view to use the correct height\n              requestAnimationFrame(function() {\n                root.dispatch('DID_FINISH_CALCULATE_PREVIEWSIZE', {\n                  id: props.id\n                });\n              });\n              root.ref.shouldDrawPreview = false;\n            }\n          }\n        )\n      );\n    });\n\n    // expose plugin\n    return {\n      options: {\n        // Enable or disable image preview\n        allowImagePreview: [true, Type.BOOLEAN],\n\n        // filters file items to determine which are shown as preview\n        imagePreviewFilterItem: [\n          function() {\n            return true;\n          },\n          Type.FUNCTION\n        ],\n\n        // Fixed preview height\n        imagePreviewHeight: [null, Type.INT],\n\n        // Min image height\n        imagePreviewMinHeight: [44, Type.INT],\n\n        // Max image height\n        imagePreviewMaxHeight: [256, Type.INT],\n\n        // Max size of preview file for when createImageBitmap is not supported\n        imagePreviewMaxFileSize: [null, Type.INT],\n\n        // The amount of extra pixels added to the image preview to allow comfortable zooming\n        imagePreviewZoomFactor: [2, Type.INT],\n\n        // Should we upscale small images to fit the max bounding box of the preview area\n        imagePreviewUpscale: [false, Type.BOOLEAN],\n\n        // Max size of preview file that we allow to try to instant preview if createImageBitmap is not supported, else image is queued for loading\n        imagePreviewMaxInstantPreviewFileSize: [1000000, Type.INT],\n\n        // Style of the transparancy indicator used behind images\n        imagePreviewTransparencyIndicator: [null, Type.STRING],\n\n        // Enables or disables reading average image color\n        imagePreviewCalculateAverageImageColor: [false, Type.BOOLEAN],\n\n        // Enables or disables the previewing of markup\n        imagePreviewMarkupShow: [true, Type.BOOLEAN],\n\n        // Allows filtering of markup to only show certain shapes\n        imagePreviewMarkupFilter: [\n          function() {\n            return true;\n          },\n          Type.FUNCTION\n        ]\n      }\n    };\n  };\n\n  // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n  var isBrowser =\n    typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  if (isBrowser) {\n    document.dispatchEvent(\n      new CustomEvent('FilePond:pluginloaded', { detail: plugin })\n    );\n  }\n\n  return plugin;\n});\n","/*!\n * FilePondPluginFileEncode 2.1.9\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined'\n    ? (module.exports = factory())\n    : typeof define === 'function' && define.amd\n    ? define(factory)\n    : ((global = global || self),\n      (global.FilePondPluginFileEncode = factory()));\n})(this, function() {\n  'use strict';\n\n  var DataURIWorker = function DataURIWorker() {\n    // route messages\n    self.onmessage = function(e) {\n      convert(e.data.message, function(response) {\n        self.postMessage({ id: e.data.id, message: response });\n      });\n    };\n\n    // convert file to data uri\n    var convert = function convert(options, cb) {\n      var file = options.file;\n\n      var reader = new FileReader();\n      reader.onloadend = function() {\n        cb(reader.result.replace('data:', '').replace(/^.+,/, ''));\n      };\n      reader.readAsDataURL(file);\n    };\n  };\n\n  var plugin = function plugin(_ref) {\n    var addFilter = _ref.addFilter,\n      utils = _ref.utils;\n\n    // get quick reference to Type utils\n    var Type = utils.Type,\n      createWorker = utils.createWorker,\n      createRoute = utils.createRoute,\n      isFile = utils.isFile;\n\n    var encode = function encode(_ref2) {\n      var name = _ref2.name,\n        file = _ref2.file;\n      return new Promise(function(resolve) {\n        var worker = createWorker(DataURIWorker);\n        worker.post({ file: file }, function(data) {\n          resolve({ name: name, data: data });\n          worker.terminate();\n        });\n      });\n    };\n\n    // holds base64 strings till can be moved to item\n    var base64Cache = [];\n    addFilter('DID_CREATE_ITEM', function(item, _ref3) {\n      var query = _ref3.query;\n\n      if (!query('GET_ALLOW_FILE_ENCODE')) return;\n\n      item.extend('getFileEncodeBase64String', function() {\n        return base64Cache[item.id] && base64Cache[item.id].data;\n      });\n      item.extend('getFileEncodeDataURL', function() {\n        return 'data:'\n          .concat(item.fileType, ';base64,')\n          .concat(base64Cache[item.id].data);\n      });\n    });\n\n    addFilter('SHOULD_PREPARE_OUTPUT', function(shouldPrepareOutput, _ref4) {\n      var query = _ref4.query;\n      return new Promise(function(resolve) {\n        resolve(query('GET_ALLOW_FILE_ENCODE'));\n      });\n    });\n\n    addFilter('COMPLETE_PREPARE_OUTPUT', function(file, _ref5) {\n      var item = _ref5.item,\n        query = _ref5.query;\n      return new Promise(function(resolve) {\n        // if it's not a file or a list of files, continue\n        if (\n          !query('GET_ALLOW_FILE_ENCODE') ||\n          (!isFile(file) && !Array.isArray(file))\n        ) {\n          return resolve(file);\n        }\n\n        // store metadata settings for this cache\n        base64Cache[item.id] = {\n          metadata: item.getMetadata(),\n          data: null\n        };\n\n        // wait for all file items to be encoded\n        Promise.all(\n          (file instanceof Blob ? [{ name: null, file: file }] : file).map(\n            encode\n          )\n        ).then(function(dataItems) {\n          base64Cache[item.id].data =\n            file instanceof Blob ? dataItems[0].data : dataItems;\n          resolve(file);\n        });\n      });\n    });\n\n    // called for each view that is created right after the 'create' method\n    addFilter('CREATE_VIEW', function(viewAPI) {\n      // get reference to created view\n      var is = viewAPI.is,\n        view = viewAPI.view,\n        query = viewAPI.query;\n\n      // only hook up to item view\n      if (!is('file-wrapper') || !query('GET_ALLOW_FILE_ENCODE')) {\n        return;\n      }\n\n      view.registerWriter(\n        createRoute({\n          DID_PREPARE_OUTPUT: function DID_PREPARE_OUTPUT(_ref6) {\n            var root = _ref6.root,\n              action = _ref6.action;\n\n            // only do this if is not uploading async\n            if (query('IS_ASYNC')) {\n              return;\n            }\n\n            var item = query('GET_ITEM', action.id);\n            if (!item) return;\n\n            // extract base64 string\n            var cache = base64Cache[item.id];\n            var metadata = cache.metadata;\n            var data = cache.data;\n\n            // create JSON string from encoded data\n            var value = JSON.stringify({\n              id: item.id,\n              name: item.file.name,\n              type: item.file.type,\n              size: item.file.size,\n              metadata: metadata,\n              data: data\n            });\n\n            // for filepond < 4.13.0\n            if (root.ref.data) {\n              root.ref.data.value = value;\n            }\n            // newer versions\n            else {\n              root.dispatch('DID_DEFINE_VALUE', {\n                id: item.id,\n                value: value\n              });\n            }\n          },\n          DID_REMOVE_ITEM: function DID_REMOVE_ITEM(_ref7) {\n            var action = _ref7.action;\n            var item = query('GET_ITEM', action.id);\n            if (!item) return;\n            delete base64Cache[item.id];\n          }\n        })\n      );\n    });\n\n    return {\n      options: {\n        // Enable or disable file encoding\n        allowFileEncode: [true, Type.BOOLEAN]\n      }\n    };\n  };\n\n  // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n  var isBrowser =\n    typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  if (isBrowser) {\n    document.dispatchEvent(\n      new CustomEvent('FilePond:pluginloaded', { detail: plugin })\n    );\n  }\n\n  return plugin;\n});\n","/*!\n * FilePondPluginImageResize 2.0.7\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined'\n    ? (module.exports = factory())\n    : typeof define === 'function' && define.amd\n    ? define(factory)\n    : ((global = global || self),\n      (global.FilePondPluginImageResize = factory()));\n})(this, function() {\n  'use strict';\n\n  // test if file is of type image\n  var isImage = function isImage(file) {\n    return /^image/.test(file.type);\n  };\n\n  var getImageSize = function getImageSize(url, cb) {\n    var image = new Image();\n    image.onload = function() {\n      var width = image.naturalWidth;\n      var height = image.naturalHeight;\n      image = null;\n      cb({ width: width, height: height });\n    };\n    image.onerror = function() {\n      return cb(null);\n    };\n    image.src = url;\n  };\n\n  /**\n   * Image Auto Resize Plugin\n   */\n  var plugin = function plugin(_ref) {\n    var addFilter = _ref.addFilter,\n      utils = _ref.utils;\n    var Type = utils.Type;\n\n    // subscribe to file load and append required transformations\n    addFilter('DID_LOAD_ITEM', function(item, _ref2) {\n      var query = _ref2.query;\n      return new Promise(function(resolve, reject) {\n        // get file reference\n        var file = item.file;\n\n        // if this is not an image we do not have any business cropping it\n        if (!isImage(file) || !query('GET_ALLOW_IMAGE_RESIZE')) {\n          // continue with the unaltered dataset\n          return resolve(item);\n        }\n\n        var mode = query('GET_IMAGE_RESIZE_MODE');\n        var width = query('GET_IMAGE_RESIZE_TARGET_WIDTH');\n        var height = query('GET_IMAGE_RESIZE_TARGET_HEIGHT');\n        var upscale = query('GET_IMAGE_RESIZE_UPSCALE');\n\n        // no resizing to be done\n        if (width === null && height === null) {\n          return resolve(item);\n        }\n\n        var targetWidth = width === null ? height : width;\n        var targetHeight = height === null ? targetWidth : height;\n\n        // if should not upscale, we need to determine the size of the file\n        var fileURL = URL.createObjectURL(file);\n        getImageSize(fileURL, function(size) {\n          URL.revokeObjectURL(fileURL);\n\n          // something went wrong\n          if (!size) return resolve(item);\n          var imageWidth = size.width,\n            imageHeight = size.height;\n\n          // get exif orientation\n          var orientation = (item.getMetadata('exif') || {}).orientation || -1;\n\n          // swap width and height if orientation needs correcting\n          if (orientation >= 5 && orientation <= 8) {\n            var _ref3 = [imageHeight, imageWidth];\n            imageWidth = _ref3[0];\n            imageHeight = _ref3[1];\n          }\n\n          // image is already perfect size, no transformations required\n          if (imageWidth === targetWidth && imageHeight === targetHeight) {\n            return resolve(item);\n          }\n\n          // image is smaller than target size but no upscaling is allowed\n          if (\n            imageWidth <= targetWidth &&\n            imageHeight <= targetHeight &&\n            !upscale\n          ) {\n            return resolve(item);\n          }\n\n          // the image needs to be resized\n          item.setMetadata('resize', {\n            mode: mode,\n            upscale: upscale,\n            size: {\n              width: targetWidth,\n              height: targetHeight\n            }\n          });\n\n          resolve(item);\n        });\n      });\n    });\n\n    // Expose plugin options\n    return {\n      options: {\n        // Enable or disable image resizing\n        allowImageResize: [true, Type.BOOLEAN],\n\n        // the method of rescaling\n        // - force => force set size\n        // - cover => pick biggest dimension\n        // - contain => pick smaller dimension\n        imageResizeMode: ['cover', Type.STRING],\n\n        // set to false to disable upscaling of image smaller than the target width / height\n        imageResizeUpscale: [true, Type.BOOLEAN],\n\n        // target width\n        imageResizeTargetWidth: [null, Type.INT],\n\n        // target height\n        imageResizeTargetHeight: [null, Type.INT]\n      }\n    };\n  };\n\n  // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n  var isBrowser =\n    typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  if (isBrowser) {\n    document.dispatchEvent(\n      new CustomEvent('FilePond:pluginloaded', { detail: plugin })\n    );\n  }\n\n  return plugin;\n});\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","/** @license React v17.0.0-rc.0\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var l=require(\"object-assign\"),n=60103,p=60106;exports.Fragment=60107;exports.StrictMode=60108;exports.Profiler=60114;var q=60109,r=60110,t=60112;exports.Suspense=60113;var u=60115,v=60116;\nif(\"function\"===typeof Symbol&&Symbol.for){var w=Symbol.for;n=w(\"react.element\");p=w(\"react.portal\");exports.Fragment=w(\"react.fragment\");exports.StrictMode=w(\"react.strict_mode\");exports.Profiler=w(\"react.profiler\");q=w(\"react.provider\");r=w(\"react.context\");t=w(\"react.forward_ref\");exports.Suspense=w(\"react.suspense\");u=w(\"react.memo\");v=w(\"react.lazy\")}var x=\"function\"===typeof Symbol&&Symbol.iterator;\nfunction y(a){if(null===a||\"object\"!==typeof a)return null;a=x&&a[x]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}function z(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}\nvar A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B={};function C(a,b,c){this.props=a;this.context=b;this.refs=B;this.updater=c||A}C.prototype.isReactComponent={};C.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw Error(z(85));this.updater.enqueueSetState(this,a,b,\"setState\")};C.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};\nfunction D(){}D.prototype=C.prototype;function E(a,b,c){this.props=a;this.context=b;this.refs=B;this.updater=c||A}var F=E.prototype=new D;F.constructor=E;l(F,C.prototype);F.isPureReactComponent=!0;var G={current:null},H=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};\nfunction J(a,b,c){var e,d={},k=null,h=null;if(null!=b)for(e in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(k=\"\"+b.key),b)H.call(b,e)&&!I.hasOwnProperty(e)&&(d[e]=b[e]);var g=arguments.length-2;if(1===g)d.children=c;else if(1<g){for(var f=Array(g),m=0;m<g;m++)f[m]=arguments[m+2];d.children=f}if(a&&a.defaultProps)for(e in g=a.defaultProps,g)void 0===d[e]&&(d[e]=g[e]);return{$$typeof:n,type:a,key:k,ref:h,props:d,_owner:G.current}}\nfunction K(a,b){return{$$typeof:n,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function L(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===n}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+a.replace(/[=:]/g,function(a){return b[a]})}var M=/\\/+/g;function N(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(\"\"+a.key):b.toString(36)}\nfunction O(a,b,c,e,d){var k=typeof a;if(\"undefined\"===k||\"boolean\"===k)a=null;var h=!1;if(null===a)h=!0;else switch(k){case \"string\":case \"number\":h=!0;break;case \"object\":switch(a.$$typeof){case n:case p:h=!0}}if(h)return h=a,d=d(h),a=\"\"===e?\".\"+N(h,0):e,Array.isArray(d)?(c=\"\",null!=a&&(c=a.replace(M,\"$&/\")+\"/\"),O(d,b,c,\"\",function(a){return a})):null!=d&&(L(d)&&(d=K(d,c+(!d.key||h&&h.key===d.key?\"\":(\"\"+d.key).replace(M,\"$&/\")+\"/\")+a)),b.push(d)),1;h=0;e=\"\"===e?\".\":e+\":\";if(Array.isArray(a))for(var g=\n0;g<a.length;g++){k=a[g];var f=e+N(k,g);h+=O(k,b,c,f,d)}else if(f=y(a),\"function\"===typeof f)for(a=f.call(a),g=0;!(k=a.next()).done;)k=k.value,f=e+N(k,g++),h+=O(k,b,c,f,d);else if(\"object\"===k)throw b=\"\"+a,Error(z(31,\"[object Object]\"===b?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":b));return h}function P(a,b,c){if(null==a)return a;var e=[],d=0;O(a,e,\"\",\"\",function(a){return b.call(c,a,d++)});return e}\nfunction Q(a){if(-1===a._status){var b=a._result;b=b();a._status=0;a._result=b;b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)})}if(1===a._status)return a._result;throw a._result;}var R={current:null};function S(){var a=R.current;if(null===a)throw Error(z(321));return a}var T={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:G,IsSomeRendererActing:{current:!1},assign:l};\nexports.Children={map:P,forEach:function(a,b,c){P(a,function(){b.apply(this,arguments)},c)},count:function(a){var b=0;P(a,function(){b++});return b},toArray:function(a){return P(a,function(a){return a})||[]},only:function(a){if(!L(a))throw Error(z(143));return a}};exports.Component=C;exports.PureComponent=E;exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T;\nexports.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(z(267,a));var e=l({},a.props),d=a.key,k=a.ref,h=a._owner;if(null!=b){void 0!==b.ref&&(k=b.ref,h=G.current);void 0!==b.key&&(d=\"\"+b.key);if(a.type&&a.type.defaultProps)var g=a.type.defaultProps;for(f in b)H.call(b,f)&&!I.hasOwnProperty(f)&&(e[f]=void 0===b[f]&&void 0!==g?g[f]:b[f])}var f=arguments.length-2;if(1===f)e.children=c;else if(1<f){g=Array(f);for(var m=0;m<f;m++)g[m]=arguments[m+2];e.children=g}return{$$typeof:n,type:a.type,\nkey:d,ref:k,props:e,_owner:h}};exports.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:r,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:q,_context:a};return a.Consumer=a};exports.createElement=J;exports.createFactory=function(a){var b=J.bind(null,a);b.type=a;return b};exports.createRef=function(){return{current:null}};exports.forwardRef=function(a){return{$$typeof:t,render:a}};exports.isValidElement=L;\nexports.lazy=function(a){return{$$typeof:v,_payload:{_status:-1,_result:a},_init:Q}};exports.memo=function(a,b){return{$$typeof:u,type:a,compare:void 0===b?null:b}};exports.useCallback=function(a,b){return S().useCallback(a,b)};exports.useContext=function(a,b){return S().useContext(a,b)};exports.useDebugValue=function(){};exports.useEffect=function(a,b){return S().useEffect(a,b)};exports.useImperativeHandle=function(a,b,c){return S().useImperativeHandle(a,b,c)};\nexports.useLayoutEffect=function(a,b){return S().useLayoutEffect(a,b)};exports.useMemo=function(a,b){return S().useMemo(a,b)};exports.useReducer=function(a,b,c){return S().useReducer(a,b,c)};exports.useRef=function(a){return S().useRef(a)};exports.useState=function(a){return S().useState(a)};exports.version=\"17.0.0-rc.0\";\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/*!\n * FilePond 4.19.2\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined'\n    ? factory(exports)\n    : typeof define === 'function' && define.amd\n    ? define(['exports'], factory)\n    : ((global = global || self), factory((global.FilePond = {})));\n})(this, function(exports) {\n  'use strict';\n\n  var isNode = function isNode(value) {\n    return value instanceof HTMLElement;\n  };\n\n  var createStore = function createStore(initialState) {\n    var queries =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var actions =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    // internal state\n    var state = Object.assign({}, initialState);\n\n    // contains all actions for next frame, is clear when actions are requested\n    var actionQueue = [];\n    var dispatchQueue = [];\n\n    // returns a duplicate of the current state\n    var getState = function getState() {\n      return Object.assign({}, state);\n    };\n\n    // returns a duplicate of the actions array and clears the actions array\n    var processActionQueue = function processActionQueue() {\n      // create copy of actions queue\n      var queue = [].concat(actionQueue);\n\n      // clear actions queue (we don't want no double actions)\n      actionQueue.length = 0;\n\n      return queue;\n    };\n\n    // processes actions that might block the main UI thread\n    var processDispatchQueue = function processDispatchQueue() {\n      // create copy of actions queue\n      var queue = [].concat(dispatchQueue);\n\n      // clear actions queue (we don't want no double actions)\n      dispatchQueue.length = 0;\n\n      // now dispatch these actions\n      queue.forEach(function(_ref) {\n        var type = _ref.type,\n          data = _ref.data;\n        dispatch(type, data);\n      });\n    };\n\n    // adds a new action, calls its handler and\n    var dispatch = function dispatch(type, data, isBlocking) {\n      // is blocking action (should never block if document is hidden)\n      if (isBlocking && !document.hidden) {\n        dispatchQueue.push({ type: type, data: data });\n        return;\n      }\n\n      // if this action has a handler, handle the action\n      if (actionHandlers[type]) {\n        actionHandlers[type](data);\n      }\n\n      // now add action\n      actionQueue.push({\n        type: type,\n        data: data\n      });\n    };\n\n    var query = function query(str) {\n      var _queryHandles;\n      for (\n        var _len = arguments.length,\n          args = new Array(_len > 1 ? _len - 1 : 0),\n          _key = 1;\n        _key < _len;\n        _key++\n      ) {\n        args[_key - 1] = arguments[_key];\n      }\n      return queryHandles[str]\n        ? (_queryHandles = queryHandles)[str].apply(_queryHandles, args)\n        : null;\n    };\n\n    var api = {\n      getState: getState,\n      processActionQueue: processActionQueue,\n      processDispatchQueue: processDispatchQueue,\n      dispatch: dispatch,\n      query: query\n    };\n\n    var queryHandles = {};\n    queries.forEach(function(query) {\n      queryHandles = Object.assign({}, query(state), {}, queryHandles);\n    });\n\n    var actionHandlers = {};\n    actions.forEach(function(action) {\n      actionHandlers = Object.assign(\n        {},\n        action(dispatch, query, state),\n        {},\n        actionHandlers\n      );\n    });\n\n    return api;\n  };\n\n  var defineProperty = function defineProperty(obj, property, definition) {\n    if (typeof definition === 'function') {\n      obj[property] = definition;\n      return;\n    }\n    Object.defineProperty(obj, property, Object.assign({}, definition));\n  };\n\n  var forin = function forin(obj, cb) {\n    for (var key in obj) {\n      if (!obj.hasOwnProperty(key)) {\n        continue;\n      }\n\n      cb(key, obj[key]);\n    }\n  };\n\n  var createObject = function createObject(definition) {\n    var obj = {};\n    forin(definition, function(property) {\n      defineProperty(obj, property, definition[property]);\n    });\n    return obj;\n  };\n\n  var attr = function attr(node, name) {\n    var value =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    if (value === null) {\n      return node.getAttribute(name) || node.hasAttribute(name);\n    }\n    node.setAttribute(name, value);\n  };\n\n  var ns = 'http://www.w3.org/2000/svg';\n  var svgElements = ['svg', 'path']; // only svg elements used\n\n  var isSVGElement = function isSVGElement(tag) {\n    return svgElements.includes(tag);\n  };\n\n  var createElement = function createElement(tag, className) {\n    var attributes =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    if (typeof className === 'object') {\n      attributes = className;\n      className = null;\n    }\n    var element = isSVGElement(tag)\n      ? document.createElementNS(ns, tag)\n      : document.createElement(tag);\n    if (className) {\n      if (isSVGElement(tag)) {\n        attr(element, 'class', className);\n      } else {\n        element.className = className;\n      }\n    }\n    forin(attributes, function(name, value) {\n      attr(element, name, value);\n    });\n    return element;\n  };\n\n  var appendChild = function appendChild(parent) {\n    return function(child, index) {\n      if (typeof index !== 'undefined' && parent.children[index]) {\n        parent.insertBefore(child, parent.children[index]);\n      } else {\n        parent.appendChild(child);\n      }\n    };\n  };\n\n  var appendChildView = function appendChildView(parent, childViews) {\n    return function(view, index) {\n      if (typeof index !== 'undefined') {\n        childViews.splice(index, 0, view);\n      } else {\n        childViews.push(view);\n      }\n\n      return view;\n    };\n  };\n\n  var removeChildView = function removeChildView(parent, childViews) {\n    return function(view) {\n      // remove from child views\n      childViews.splice(childViews.indexOf(view), 1);\n\n      // remove the element\n      if (view.element.parentNode) {\n        parent.removeChild(view.element);\n      }\n\n      return view;\n    };\n  };\n\n  var IS_BROWSER = (function() {\n    return (\n      typeof window !== 'undefined' && typeof window.document !== 'undefined'\n    );\n  })();\n  var isBrowser = function isBrowser() {\n    return IS_BROWSER;\n  };\n\n  var testElement = isBrowser() ? createElement('svg') : {};\n  var getChildCount =\n    'children' in testElement\n      ? function(el) {\n          return el.children.length;\n        }\n      : function(el) {\n          return el.childNodes.length;\n        };\n\n  var getViewRect = function getViewRect(\n    elementRect,\n    childViews,\n    offset,\n    scale\n  ) {\n    var left = offset[0] || elementRect.left;\n    var top = offset[1] || elementRect.top;\n    var right = left + elementRect.width;\n    var bottom = top + elementRect.height * (scale[1] || 1);\n\n    var rect = {\n      // the rectangle of the element itself\n      element: Object.assign({}, elementRect),\n\n      // the rectangle of the element expanded to contain its children, does not include any margins\n      inner: {\n        left: elementRect.left,\n        top: elementRect.top,\n        right: elementRect.right,\n        bottom: elementRect.bottom\n      },\n\n      // the rectangle of the element expanded to contain its children including own margin and child margins\n      // margins will be added after we've recalculated the size\n      outer: {\n        left: left,\n        top: top,\n        right: right,\n        bottom: bottom\n      }\n    };\n\n    // expand rect to fit all child rectangles\n    childViews\n      .filter(function(childView) {\n        return !childView.isRectIgnored();\n      })\n      .map(function(childView) {\n        return childView.rect;\n      })\n      .forEach(function(childViewRect) {\n        expandRect(rect.inner, Object.assign({}, childViewRect.inner));\n        expandRect(rect.outer, Object.assign({}, childViewRect.outer));\n      });\n\n    // calculate inner width and height\n    calculateRectSize(rect.inner);\n\n    // append additional margin (top and left margins are included in top and left automatically)\n    rect.outer.bottom += rect.element.marginBottom;\n    rect.outer.right += rect.element.marginRight;\n\n    // calculate outer width and height\n    calculateRectSize(rect.outer);\n\n    return rect;\n  };\n\n  var expandRect = function expandRect(parent, child) {\n    // adjust for parent offset\n    child.top += parent.top;\n    child.right += parent.left;\n    child.bottom += parent.top;\n    child.left += parent.left;\n\n    if (child.bottom > parent.bottom) {\n      parent.bottom = child.bottom;\n    }\n\n    if (child.right > parent.right) {\n      parent.right = child.right;\n    }\n  };\n\n  var calculateRectSize = function calculateRectSize(rect) {\n    rect.width = rect.right - rect.left;\n    rect.height = rect.bottom - rect.top;\n  };\n\n  var isNumber = function isNumber(value) {\n    return typeof value === 'number';\n  };\n\n  /**\n   * Determines if position is at destination\n   * @param position\n   * @param destination\n   * @param velocity\n   * @param errorMargin\n   * @returns {boolean}\n   */\n  var thereYet = function thereYet(position, destination, velocity) {\n    var errorMargin =\n      arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0.001;\n    return (\n      Math.abs(position - destination) < errorMargin &&\n      Math.abs(velocity) < errorMargin\n    );\n  };\n\n  /**\n   * Spring animation\n   */\n  var spring =\n    // default options\n    function spring() // method definition\n    {\n      var _ref =\n          arguments.length > 0 && arguments[0] !== undefined\n            ? arguments[0]\n            : {},\n        _ref$stiffness = _ref.stiffness,\n        stiffness = _ref$stiffness === void 0 ? 0.5 : _ref$stiffness,\n        _ref$damping = _ref.damping,\n        damping = _ref$damping === void 0 ? 0.75 : _ref$damping,\n        _ref$mass = _ref.mass,\n        mass = _ref$mass === void 0 ? 10 : _ref$mass;\n      var target = null;\n      var position = null;\n      var velocity = 0;\n      var resting = false;\n\n      // updates spring state\n      var interpolate = function interpolate(ts, skipToEndState) {\n        // in rest, don't animate\n        if (resting) return;\n\n        // need at least a target or position to do springy things\n        if (!(isNumber(target) && isNumber(position))) {\n          resting = true;\n          velocity = 0;\n          return;\n        }\n\n        // calculate spring force\n        var f = -(position - target) * stiffness;\n\n        // update velocity by adding force based on mass\n        velocity += f / mass;\n\n        // update position by adding velocity\n        position += velocity;\n\n        // slow down based on amount of damping\n        velocity *= damping;\n\n        // we've arrived if we're near target and our velocity is near zero\n        if (thereYet(position, target, velocity) || skipToEndState) {\n          position = target;\n          velocity = 0;\n          resting = true;\n\n          // we done\n          api.onupdate(position);\n          api.oncomplete(position);\n        } else {\n          // progress update\n          api.onupdate(position);\n        }\n      };\n\n      /**\n       * Set new target value\n       * @param value\n       */\n      var setTarget = function setTarget(value) {\n        // if currently has no position, set target and position to this value\n        if (isNumber(value) && !isNumber(position)) {\n          position = value;\n        }\n\n        // next target value will not be animated to\n        if (target === null) {\n          target = value;\n          position = value;\n        }\n\n        // let start moving to target\n        target = value;\n\n        // already at target\n        if (position === target || typeof target === 'undefined') {\n          // now resting as target is current position, stop moving\n          resting = true;\n          velocity = 0;\n\n          // done!\n          api.onupdate(position);\n          api.oncomplete(position);\n\n          return;\n        }\n\n        resting = false;\n      };\n\n      // need 'api' to call onupdate callback\n      var api = createObject({\n        interpolate: interpolate,\n        target: {\n          set: setTarget,\n          get: function get() {\n            return target;\n          }\n        },\n\n        resting: {\n          get: function get() {\n            return resting;\n          }\n        },\n\n        onupdate: function onupdate(value) {},\n        oncomplete: function oncomplete(value) {}\n      });\n\n      return api;\n    };\n\n  var easeLinear = function easeLinear(t) {\n    return t;\n  };\n  var easeInOutQuad = function easeInOutQuad(t) {\n    return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n  };\n\n  var tween =\n    // default values\n    function tween() // method definition\n    {\n      var _ref =\n          arguments.length > 0 && arguments[0] !== undefined\n            ? arguments[0]\n            : {},\n        _ref$duration = _ref.duration,\n        duration = _ref$duration === void 0 ? 500 : _ref$duration,\n        _ref$easing = _ref.easing,\n        easing = _ref$easing === void 0 ? easeInOutQuad : _ref$easing,\n        _ref$delay = _ref.delay,\n        delay = _ref$delay === void 0 ? 0 : _ref$delay;\n      var start = null;\n      var t;\n      var p;\n      var resting = true;\n      var reverse = false;\n      var target = null;\n\n      var interpolate = function interpolate(ts, skipToEndState) {\n        if (resting || target === null) return;\n\n        if (start === null) {\n          start = ts;\n        }\n\n        if (ts - start < delay) return;\n\n        t = ts - start - delay;\n\n        if (t >= duration || skipToEndState) {\n          t = 1;\n          p = reverse ? 0 : 1;\n          api.onupdate(p * target);\n          api.oncomplete(p * target);\n          resting = true;\n        } else {\n          p = t / duration;\n          api.onupdate((t >= 0 ? easing(reverse ? 1 - p : p) : 0) * target);\n        }\n      };\n\n      // need 'api' to call onupdate callback\n      var api = createObject({\n        interpolate: interpolate,\n        target: {\n          get: function get() {\n            return reverse ? 0 : target;\n          },\n          set: function set(value) {\n            // is initial value\n            if (target === null) {\n              target = value;\n              api.onupdate(value);\n              api.oncomplete(value);\n              return;\n            }\n\n            // want to tween to a smaller value and have a current value\n            if (value < target) {\n              target = 1;\n              reverse = true;\n            } else {\n              // not tweening to a smaller value\n              reverse = false;\n              target = value;\n            }\n\n            // let's go!\n            resting = false;\n            start = null;\n          }\n        },\n\n        resting: {\n          get: function get() {\n            return resting;\n          }\n        },\n\n        onupdate: function onupdate(value) {},\n        oncomplete: function oncomplete(value) {}\n      });\n\n      return api;\n    };\n\n  var animator = {\n    spring: spring,\n    tween: tween\n  };\n\n  /*\n                       { type: 'spring', stiffness: .5, damping: .75, mass: 10 };\n                       { translation: { type: 'spring', ... }, ... }\n                       { translation: { x: { type: 'spring', ... } } }\n                      */\n  var createAnimator = function createAnimator(definition, category, property) {\n    // default is single definition\n    // we check if transform is set, if so, we check if property is set\n    var def =\n      definition[category] && typeof definition[category][property] === 'object'\n        ? definition[category][property]\n        : definition[category] || definition;\n\n    var type = typeof def === 'string' ? def : def.type;\n    var props = typeof def === 'object' ? Object.assign({}, def) : {};\n\n    return animator[type] ? animator[type](props) : null;\n  };\n\n  var addGetSet = function addGetSet(keys, obj, props) {\n    var overwrite =\n      arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    obj = Array.isArray(obj) ? obj : [obj];\n    obj.forEach(function(o) {\n      keys.forEach(function(key) {\n        var name = key;\n        var getter = function getter() {\n          return props[key];\n        };\n        var setter = function setter(value) {\n          return (props[key] = value);\n        };\n\n        if (typeof key === 'object') {\n          name = key.key;\n          getter = key.getter || getter;\n          setter = key.setter || setter;\n        }\n\n        if (o[name] && !overwrite) {\n          return;\n        }\n\n        o[name] = {\n          get: getter,\n          set: setter\n        };\n      });\n    });\n  };\n\n  // add to state,\n  // add getters and setters to internal and external api (if not set)\n  // setup animators\n\n  var animations = function animations(_ref) {\n    var mixinConfig = _ref.mixinConfig,\n      viewProps = _ref.viewProps,\n      viewInternalAPI = _ref.viewInternalAPI,\n      viewExternalAPI = _ref.viewExternalAPI;\n    // initial properties\n    var initialProps = Object.assign({}, viewProps);\n\n    // list of all active animations\n    var animations = [];\n\n    // setup animators\n    forin(mixinConfig, function(property, animation) {\n      var animator = createAnimator(animation);\n      if (!animator) {\n        return;\n      }\n\n      // when the animator updates, update the view state value\n      animator.onupdate = function(value) {\n        viewProps[property] = value;\n      };\n\n      // set animator target\n      animator.target = initialProps[property];\n\n      // when value is set, set the animator target value\n      var prop = {\n        key: property,\n        setter: function setter(value) {\n          // if already at target, we done!\n          if (animator.target === value) {\n            return;\n          }\n\n          animator.target = value;\n        },\n        getter: function getter() {\n          return viewProps[property];\n        }\n      };\n\n      // add getters and setters\n      addGetSet([prop], [viewInternalAPI, viewExternalAPI], viewProps, true);\n\n      // add it to the list for easy updating from the _write method\n      animations.push(animator);\n    });\n\n    // expose internal write api\n    return {\n      write: function write(ts) {\n        var skipToEndState = document.hidden;\n        var resting = true;\n        animations.forEach(function(animation) {\n          if (!animation.resting) resting = false;\n          animation.interpolate(ts, skipToEndState);\n        });\n        return resting;\n      },\n      destroy: function destroy() {}\n    };\n  };\n\n  var addEvent = function addEvent(element) {\n    return function(type, fn) {\n      element.addEventListener(type, fn);\n    };\n  };\n\n  var removeEvent = function removeEvent(element) {\n    return function(type, fn) {\n      element.removeEventListener(type, fn);\n    };\n  };\n\n  // mixin\n  var listeners = function listeners(_ref) {\n    var mixinConfig = _ref.mixinConfig,\n      viewProps = _ref.viewProps,\n      viewInternalAPI = _ref.viewInternalAPI,\n      viewExternalAPI = _ref.viewExternalAPI,\n      viewState = _ref.viewState,\n      view = _ref.view;\n    var events = [];\n\n    var add = addEvent(view.element);\n    var remove = removeEvent(view.element);\n\n    viewExternalAPI.on = function(type, fn) {\n      events.push({\n        type: type,\n        fn: fn\n      });\n\n      add(type, fn);\n    };\n\n    viewExternalAPI.off = function(type, fn) {\n      events.splice(\n        events.findIndex(function(event) {\n          return event.type === type && event.fn === fn;\n        }),\n        1\n      );\n\n      remove(type, fn);\n    };\n\n    return {\n      write: function write() {\n        // not busy\n        return true;\n      },\n      destroy: function destroy() {\n        events.forEach(function(event) {\n          remove(event.type, event.fn);\n        });\n      }\n    };\n  };\n\n  // add to external api and link to props\n\n  var apis = function apis(_ref) {\n    var mixinConfig = _ref.mixinConfig,\n      viewProps = _ref.viewProps,\n      viewExternalAPI = _ref.viewExternalAPI;\n    addGetSet(mixinConfig, viewExternalAPI, viewProps);\n  };\n\n  var isDefined = function isDefined(value) {\n    return value != null;\n  };\n\n  // add to state,\n  // add getters and setters to internal and external api (if not set)\n  // set initial state based on props in viewProps\n  // apply as transforms each frame\n\n  var defaults = {\n    opacity: 1,\n    scaleX: 1,\n    scaleY: 1,\n    translateX: 0,\n    translateY: 0,\n    rotateX: 0,\n    rotateY: 0,\n    rotateZ: 0,\n    originX: 0,\n    originY: 0\n  };\n\n  var styles = function styles(_ref) {\n    var mixinConfig = _ref.mixinConfig,\n      viewProps = _ref.viewProps,\n      viewInternalAPI = _ref.viewInternalAPI,\n      viewExternalAPI = _ref.viewExternalAPI,\n      view = _ref.view;\n    // initial props\n    var initialProps = Object.assign({}, viewProps);\n\n    // current props\n    var currentProps = {};\n\n    // we will add those properties to the external API and link them to the viewState\n    addGetSet(mixinConfig, [viewInternalAPI, viewExternalAPI], viewProps);\n\n    // override rect on internal and external rect getter so it takes in account transforms\n    var getOffset = function getOffset() {\n      return [viewProps['translateX'] || 0, viewProps['translateY'] || 0];\n    };\n\n    var getScale = function getScale() {\n      return [viewProps['scaleX'] || 0, viewProps['scaleY'] || 0];\n    };\n    var getRect = function getRect() {\n      return view.rect\n        ? getViewRect(view.rect, view.childViews, getOffset(), getScale())\n        : null;\n    };\n    viewInternalAPI.rect = { get: getRect };\n    viewExternalAPI.rect = { get: getRect };\n\n    // apply view props\n    mixinConfig.forEach(function(key) {\n      viewProps[key] =\n        typeof initialProps[key] === 'undefined'\n          ? defaults[key]\n          : initialProps[key];\n    });\n\n    // expose api\n    return {\n      write: function write() {\n        // see if props have changed\n        if (!propsHaveChanged(currentProps, viewProps)) {\n          return;\n        }\n\n        // moves element to correct position on screen\n        applyStyles(view.element, viewProps);\n\n        // store new transforms\n        Object.assign(currentProps, Object.assign({}, viewProps));\n\n        // no longer busy\n        return true;\n      },\n      destroy: function destroy() {}\n    };\n  };\n\n  var propsHaveChanged = function propsHaveChanged(currentProps, newProps) {\n    // different amount of keys\n    if (Object.keys(currentProps).length !== Object.keys(newProps).length) {\n      return true;\n    }\n\n    // lets analyze the individual props\n    for (var prop in newProps) {\n      if (newProps[prop] !== currentProps[prop]) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  var applyStyles = function applyStyles(element, _ref2) {\n    var opacity = _ref2.opacity,\n      perspective = _ref2.perspective,\n      translateX = _ref2.translateX,\n      translateY = _ref2.translateY,\n      scaleX = _ref2.scaleX,\n      scaleY = _ref2.scaleY,\n      rotateX = _ref2.rotateX,\n      rotateY = _ref2.rotateY,\n      rotateZ = _ref2.rotateZ,\n      originX = _ref2.originX,\n      originY = _ref2.originY,\n      width = _ref2.width,\n      height = _ref2.height;\n\n    var transforms = '';\n    var styles = '';\n\n    // handle transform origin\n    if (isDefined(originX) || isDefined(originY)) {\n      styles +=\n        'transform-origin: ' + (originX || 0) + 'px ' + (originY || 0) + 'px;';\n    }\n\n    // transform order is relevant\n    // 0. perspective\n    if (isDefined(perspective)) {\n      transforms += 'perspective(' + perspective + 'px) ';\n    }\n\n    // 1. translate\n    if (isDefined(translateX) || isDefined(translateY)) {\n      transforms +=\n        'translate3d(' +\n        (translateX || 0) +\n        'px, ' +\n        (translateY || 0) +\n        'px, 0) ';\n    }\n\n    // 2. scale\n    if (isDefined(scaleX) || isDefined(scaleY)) {\n      transforms +=\n        'scale3d(' +\n        (isDefined(scaleX) ? scaleX : 1) +\n        ', ' +\n        (isDefined(scaleY) ? scaleY : 1) +\n        ', 1) ';\n    }\n\n    // 3. rotate\n    if (isDefined(rotateZ)) {\n      transforms += 'rotateZ(' + rotateZ + 'rad) ';\n    }\n\n    if (isDefined(rotateX)) {\n      transforms += 'rotateX(' + rotateX + 'rad) ';\n    }\n\n    if (isDefined(rotateY)) {\n      transforms += 'rotateY(' + rotateY + 'rad) ';\n    }\n\n    // add transforms\n    if (transforms.length) {\n      styles += 'transform:' + transforms + ';';\n    }\n\n    // add opacity\n    if (isDefined(opacity)) {\n      styles += 'opacity:' + opacity + ';';\n\n      // if we reach zero, we make the element inaccessible\n      if (opacity === 0) {\n        styles += 'visibility:hidden;';\n      }\n\n      // if we're below 100% opacity this element can't be clicked\n      if (opacity < 1) {\n        styles += 'pointer-events:none;';\n      }\n    }\n\n    // add height\n    if (isDefined(height)) {\n      styles += 'height:' + height + 'px;';\n    }\n\n    // add width\n    if (isDefined(width)) {\n      styles += 'width:' + width + 'px;';\n    }\n\n    // apply styles\n    var elementCurrentStyle = element.elementCurrentStyle || '';\n\n    // if new styles does not match current styles, lets update!\n    if (\n      styles.length !== elementCurrentStyle.length ||\n      styles !== elementCurrentStyle\n    ) {\n      element.style.cssText = styles;\n      // store current styles so we can compare them to new styles later on\n      // _not_ getting the style value is faster\n      element.elementCurrentStyle = styles;\n    }\n  };\n\n  var Mixins = {\n    styles: styles,\n    listeners: listeners,\n    animations: animations,\n    apis: apis\n  };\n\n  var updateRect = function updateRect() {\n    var rect =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var element =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var style =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    if (!element.layoutCalculated) {\n      rect.paddingTop = parseInt(style.paddingTop, 10) || 0;\n      rect.marginTop = parseInt(style.marginTop, 10) || 0;\n      rect.marginRight = parseInt(style.marginRight, 10) || 0;\n      rect.marginBottom = parseInt(style.marginBottom, 10) || 0;\n      rect.marginLeft = parseInt(style.marginLeft, 10) || 0;\n      element.layoutCalculated = true;\n    }\n\n    rect.left = element.offsetLeft || 0;\n    rect.top = element.offsetTop || 0;\n    rect.width = element.offsetWidth || 0;\n    rect.height = element.offsetHeight || 0;\n\n    rect.right = rect.left + rect.width;\n    rect.bottom = rect.top + rect.height;\n\n    rect.scrollTop = element.scrollTop;\n\n    rect.hidden = element.offsetParent === null;\n\n    return rect;\n  };\n\n  var createView =\n    // default view definition\n    function createView() {\n      var _ref =\n          arguments.length > 0 && arguments[0] !== undefined\n            ? arguments[0]\n            : {},\n        _ref$tag = _ref.tag,\n        tag = _ref$tag === void 0 ? 'div' : _ref$tag,\n        _ref$name = _ref.name,\n        name = _ref$name === void 0 ? null : _ref$name,\n        _ref$attributes = _ref.attributes,\n        attributes = _ref$attributes === void 0 ? {} : _ref$attributes,\n        _ref$read = _ref.read,\n        read = _ref$read === void 0 ? function() {} : _ref$read,\n        _ref$write = _ref.write,\n        write = _ref$write === void 0 ? function() {} : _ref$write,\n        _ref$create = _ref.create,\n        create = _ref$create === void 0 ? function() {} : _ref$create,\n        _ref$destroy = _ref.destroy,\n        destroy = _ref$destroy === void 0 ? function() {} : _ref$destroy,\n        _ref$filterFrameActio = _ref.filterFrameActionsForChild,\n        filterFrameActionsForChild =\n          _ref$filterFrameActio === void 0\n            ? function(child, actions) {\n                return actions;\n              }\n            : _ref$filterFrameActio,\n        _ref$didCreateView = _ref.didCreateView,\n        didCreateView =\n          _ref$didCreateView === void 0 ? function() {} : _ref$didCreateView,\n        _ref$didWriteView = _ref.didWriteView,\n        didWriteView =\n          _ref$didWriteView === void 0 ? function() {} : _ref$didWriteView,\n        _ref$ignoreRect = _ref.ignoreRect,\n        ignoreRect = _ref$ignoreRect === void 0 ? false : _ref$ignoreRect,\n        _ref$ignoreRectUpdate = _ref.ignoreRectUpdate,\n        ignoreRectUpdate =\n          _ref$ignoreRectUpdate === void 0 ? false : _ref$ignoreRectUpdate,\n        _ref$mixins = _ref.mixins,\n        mixins = _ref$mixins === void 0 ? [] : _ref$mixins;\n      return function(\n        // each view requires reference to store\n        store\n      ) {\n        var props =\n          arguments.length > 1 && arguments[1] !== undefined\n            ? arguments[1]\n            : {};\n        // root element should not be changed\n        var element = createElement(tag, 'filepond--' + name, attributes);\n\n        // style reference should also not be changed\n        var style = window.getComputedStyle(element, null);\n\n        // element rectangle\n        var rect = updateRect();\n        var frameRect = null;\n\n        // rest state\n        var isResting = false;\n\n        // pretty self explanatory\n        var childViews = [];\n\n        // loaded mixins\n        var activeMixins = [];\n\n        // references to created children\n        var ref = {};\n\n        // state used for each instance\n        var state = {};\n\n        // list of writers that will be called to update this view\n        var writers = [\n          write // default writer\n        ];\n\n        var readers = [\n          read // default reader\n        ];\n\n        var destroyers = [\n          destroy // default destroy\n        ];\n\n        // core view methods\n        var getElement = function getElement() {\n          return element;\n        };\n        var getChildViews = function getChildViews() {\n          return childViews.concat();\n        };\n        var getReference = function getReference() {\n          return ref;\n        };\n        var createChildView = function createChildView(store) {\n          return function(view, props) {\n            return view(store, props);\n          };\n        };\n        var getRect = function getRect() {\n          if (frameRect) {\n            return frameRect;\n          }\n          frameRect = getViewRect(rect, childViews, [0, 0], [1, 1]);\n          return frameRect;\n        };\n        var getStyle = function getStyle() {\n          return style;\n        };\n\n        /**\n         * Read data from DOM\n         * @private\n         */\n        var _read = function _read() {\n          frameRect = null;\n\n          // read child views\n          childViews.forEach(function(child) {\n            return child._read();\n          });\n\n          var shouldUpdate = !(ignoreRectUpdate && rect.width && rect.height);\n          if (shouldUpdate) {\n            updateRect(rect, element, style);\n          }\n\n          // readers\n          var api = { root: internalAPI, props: props, rect: rect };\n          readers.forEach(function(reader) {\n            return reader(api);\n          });\n        };\n\n        /**\n         * Write data to DOM\n         * @private\n         */\n        var _write = function _write(ts, frameActions, shouldOptimize) {\n          // if no actions, we assume that the view is resting\n          var resting = frameActions.length === 0;\n\n          // writers\n          writers.forEach(function(writer) {\n            var writerResting = writer({\n              props: props,\n              root: internalAPI,\n              actions: frameActions,\n              timestamp: ts,\n              shouldOptimize: shouldOptimize\n            });\n\n            if (writerResting === false) {\n              resting = false;\n            }\n          });\n\n          // run mixins\n          activeMixins.forEach(function(mixin) {\n            // if one of the mixins is still busy after write operation, we are not resting\n            var mixinResting = mixin.write(ts);\n            if (mixinResting === false) {\n              resting = false;\n            }\n          });\n\n          // updates child views that are currently attached to the DOM\n          childViews\n            .filter(function(child) {\n              return !!child.element.parentNode;\n            })\n            .forEach(function(child) {\n              // if a child view is not resting, we are not resting\n              var childResting = child._write(\n                ts,\n                filterFrameActionsForChild(child, frameActions),\n                shouldOptimize\n              );\n\n              if (!childResting) {\n                resting = false;\n              }\n            });\n\n          // append new elements to DOM and update those\n          childViews\n            //.filter(child => !child.element.parentNode)\n            .forEach(function(child, index) {\n              // skip\n              if (child.element.parentNode) {\n                return;\n              }\n\n              // append to DOM\n              internalAPI.appendChild(child.element, index);\n\n              // call read (need to know the size of these elements)\n              child._read();\n\n              // re-call write\n              child._write(\n                ts,\n                filterFrameActionsForChild(child, frameActions),\n                shouldOptimize\n              );\n\n              // we just added somthing to the dom, no rest\n              resting = false;\n            });\n\n          // update resting state\n          isResting = resting;\n\n          didWriteView({\n            props: props,\n            root: internalAPI,\n            actions: frameActions,\n            timestamp: ts\n          });\n\n          // let parent know if we are resting\n          return resting;\n        };\n\n        var _destroy = function _destroy() {\n          activeMixins.forEach(function(mixin) {\n            return mixin.destroy();\n          });\n          destroyers.forEach(function(destroyer) {\n            destroyer({ root: internalAPI, props: props });\n          });\n          childViews.forEach(function(child) {\n            return child._destroy();\n          });\n        };\n\n        // sharedAPI\n        var sharedAPIDefinition = {\n          element: {\n            get: getElement\n          },\n\n          style: {\n            get: getStyle\n          },\n\n          childViews: {\n            get: getChildViews\n          }\n        };\n\n        // private API definition\n        var internalAPIDefinition = Object.assign({}, sharedAPIDefinition, {\n          rect: {\n            get: getRect\n          },\n\n          // access to custom children references\n          ref: {\n            get: getReference\n          },\n\n          // dom modifiers\n          is: function is(needle) {\n            return name === needle;\n          },\n          appendChild: appendChild(element),\n          createChildView: createChildView(store),\n          linkView: function linkView(view) {\n            childViews.push(view);\n            return view;\n          },\n          unlinkView: function unlinkView(view) {\n            childViews.splice(childViews.indexOf(view), 1);\n          },\n          appendChildView: appendChildView(element, childViews),\n          removeChildView: removeChildView(element, childViews),\n          registerWriter: function registerWriter(writer) {\n            return writers.push(writer);\n          },\n          registerReader: function registerReader(reader) {\n            return readers.push(reader);\n          },\n          registerDestroyer: function registerDestroyer(destroyer) {\n            return destroyers.push(destroyer);\n          },\n          invalidateLayout: function invalidateLayout() {\n            return (element.layoutCalculated = false);\n          },\n\n          // access to data store\n          dispatch: store.dispatch,\n          query: store.query\n        });\n\n        // public view API methods\n        var externalAPIDefinition = {\n          element: {\n            get: getElement\n          },\n\n          childViews: {\n            get: getChildViews\n          },\n\n          rect: {\n            get: getRect\n          },\n\n          resting: {\n            get: function get() {\n              return isResting;\n            }\n          },\n\n          isRectIgnored: function isRectIgnored() {\n            return ignoreRect;\n          },\n          _read: _read,\n          _write: _write,\n          _destroy: _destroy\n        };\n\n        // mixin API methods\n        var mixinAPIDefinition = Object.assign({}, sharedAPIDefinition, {\n          rect: {\n            get: function get() {\n              return rect;\n            }\n          }\n        });\n\n        // add mixin functionality\n        Object.keys(mixins)\n          .sort(function(a, b) {\n            // move styles to the back of the mixin list (so adjustments of other mixins are applied to the props correctly)\n            if (a === 'styles') {\n              return 1;\n            } else if (b === 'styles') {\n              return -1;\n            }\n            return 0;\n          })\n          .forEach(function(key) {\n            var mixinAPI = Mixins[key]({\n              mixinConfig: mixins[key],\n              viewProps: props,\n              viewState: state,\n              viewInternalAPI: internalAPIDefinition,\n              viewExternalAPI: externalAPIDefinition,\n              view: createObject(mixinAPIDefinition)\n            });\n\n            if (mixinAPI) {\n              activeMixins.push(mixinAPI);\n            }\n          });\n\n        // construct private api\n        var internalAPI = createObject(internalAPIDefinition);\n\n        // create the view\n        create({\n          root: internalAPI,\n          props: props\n        });\n\n        // append created child views to root node\n        var childCount = getChildCount(element); // need to know the current child count so appending happens in correct order\n        childViews.forEach(function(child, index) {\n          internalAPI.appendChild(child.element, childCount + index);\n        });\n\n        // call did create\n        didCreateView(internalAPI);\n\n        // expose public api\n        return createObject(externalAPIDefinition);\n      };\n    };\n\n  var createPainter = function createPainter(read, write) {\n    var fps =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 60;\n\n    var name = '__framePainter';\n\n    // set global painter\n    if (window[name]) {\n      window[name].readers.push(read);\n      window[name].writers.push(write);\n      return;\n    }\n\n    window[name] = {\n      readers: [read],\n      writers: [write]\n    };\n\n    var painter = window[name];\n\n    var interval = 1000 / fps;\n    var last = null;\n    var id = null;\n    var requestTick = null;\n    var cancelTick = null;\n\n    var setTimerType = function setTimerType() {\n      if (document.hidden) {\n        requestTick = function requestTick() {\n          return window.setTimeout(function() {\n            return tick(performance.now());\n          }, interval);\n        };\n        cancelTick = function cancelTick() {\n          return window.clearTimeout(id);\n        };\n      } else {\n        requestTick = function requestTick() {\n          return window.requestAnimationFrame(tick);\n        };\n        cancelTick = function cancelTick() {\n          return window.cancelAnimationFrame(id);\n        };\n      }\n    };\n\n    document.addEventListener('visibilitychange', function() {\n      if (cancelTick) cancelTick();\n      setTimerType();\n      tick(performance.now());\n    });\n\n    var tick = function tick(ts) {\n      // queue next tick\n      id = requestTick(tick);\n\n      // limit fps\n      if (!last) {\n        last = ts;\n      }\n\n      var delta = ts - last;\n\n      if (delta <= interval) {\n        // skip frame\n        return;\n      }\n\n      // align next frame\n      last = ts - (delta % interval);\n\n      // update view\n      painter.readers.forEach(function(read) {\n        return read();\n      });\n      painter.writers.forEach(function(write) {\n        return write(ts);\n      });\n    };\n\n    setTimerType();\n    tick(performance.now());\n\n    return {\n      pause: function pause() {\n        cancelTick(id);\n      }\n    };\n  };\n\n  var createRoute = function createRoute(routes, fn) {\n    return function(_ref) {\n      var root = _ref.root,\n        props = _ref.props,\n        _ref$actions = _ref.actions,\n        actions = _ref$actions === void 0 ? [] : _ref$actions,\n        timestamp = _ref.timestamp,\n        shouldOptimize = _ref.shouldOptimize;\n      actions\n        .filter(function(action) {\n          return routes[action.type];\n        })\n        .forEach(function(action) {\n          return routes[action.type]({\n            root: root,\n            props: props,\n            action: action.data,\n            timestamp: timestamp,\n            shouldOptimize: shouldOptimize\n          });\n        });\n\n      if (fn) {\n        fn({\n          root: root,\n          props: props,\n          actions: actions,\n          timestamp: timestamp,\n          shouldOptimize: shouldOptimize\n        });\n      }\n    };\n  };\n\n  var insertBefore = function insertBefore(newNode, referenceNode) {\n    return referenceNode.parentNode.insertBefore(newNode, referenceNode);\n  };\n\n  var insertAfter = function insertAfter(newNode, referenceNode) {\n    return referenceNode.parentNode.insertBefore(\n      newNode,\n      referenceNode.nextSibling\n    );\n  };\n\n  var isArray = function isArray(value) {\n    return Array.isArray(value);\n  };\n\n  var isEmpty = function isEmpty(value) {\n    return value == null;\n  };\n\n  var trim = function trim(str) {\n    return str.trim();\n  };\n\n  var toString = function toString(value) {\n    return '' + value;\n  };\n\n  var toArray = function toArray(value) {\n    var splitter =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ',';\n    if (isEmpty(value)) {\n      return [];\n    }\n    if (isArray(value)) {\n      return value;\n    }\n    return toString(value)\n      .split(splitter)\n      .map(trim)\n      .filter(function(str) {\n        return str.length;\n      });\n  };\n\n  var isBoolean = function isBoolean(value) {\n    return typeof value === 'boolean';\n  };\n\n  var toBoolean = function toBoolean(value) {\n    return isBoolean(value) ? value : value === 'true';\n  };\n\n  var isString = function isString(value) {\n    return typeof value === 'string';\n  };\n\n  var toNumber = function toNumber(value) {\n    return isNumber(value)\n      ? value\n      : isString(value)\n      ? toString(value).replace(/[a-z]+/gi, '')\n      : 0;\n  };\n\n  var toInt = function toInt(value) {\n    return parseInt(toNumber(value), 10);\n  };\n\n  var toFloat = function toFloat(value) {\n    return parseFloat(toNumber(value));\n  };\n\n  var isInt = function isInt(value) {\n    return isNumber(value) && isFinite(value) && Math.floor(value) === value;\n  };\n\n  var toBytes = function toBytes(value) {\n    // is in bytes\n    if (isInt(value)) {\n      return value;\n    }\n\n    // is natural file size\n    var naturalFileSize = toString(value).trim();\n\n    // if is value in megabytes\n    if (/MB$/i.test(naturalFileSize)) {\n      naturalFileSize = naturalFileSize.replace(/MB$i/, '').trim();\n      return toInt(naturalFileSize) * 1000 * 1000;\n    }\n\n    // if is value in kilobytes\n    if (/KB/i.test(naturalFileSize)) {\n      naturalFileSize = naturalFileSize.replace(/KB$i/, '').trim();\n      return toInt(naturalFileSize) * 1000;\n    }\n\n    return toInt(naturalFileSize);\n  };\n\n  var isFunction = function isFunction(value) {\n    return typeof value === 'function';\n  };\n\n  var toFunctionReference = function toFunctionReference(string) {\n    var ref = self;\n    var levels = string.split('.');\n    var level = null;\n    while ((level = levels.shift())) {\n      ref = ref[level];\n      if (!ref) {\n        return null;\n      }\n    }\n    return ref;\n  };\n\n  var methods = {\n    process: 'POST',\n    patch: 'PATCH',\n    revert: 'DELETE',\n    fetch: 'GET',\n    restore: 'GET',\n    load: 'GET'\n  };\n\n  var createServerAPI = function createServerAPI(outline) {\n    var api = {};\n\n    api.url = isString(outline) ? outline : outline.url || '';\n    api.timeout = outline.timeout ? parseInt(outline.timeout, 10) : 0;\n    api.headers = outline.headers ? outline.headers : {};\n\n    forin(methods, function(key) {\n      api[key] = createAction(\n        key,\n        outline[key],\n        methods[key],\n        api.timeout,\n        api.headers\n      );\n    });\n\n    // special treatment for remove\n    api.remove = outline.remove || null;\n\n    // remove generic headers from api object\n    delete api.headers;\n\n    return api;\n  };\n\n  var createAction = function createAction(\n    name,\n    outline,\n    method,\n    timeout,\n    headers\n  ) {\n    // is explicitely set to null so disable\n    if (outline === null) {\n      return null;\n    }\n\n    // if is custom function, done! Dev handles everything.\n    if (typeof outline === 'function') {\n      return outline;\n    }\n\n    // build action object\n    var action = {\n      url: method === 'GET' || method === 'PATCH' ? '?' + name + '=' : '',\n      method: method,\n      headers: headers,\n      withCredentials: false,\n      timeout: timeout,\n      onload: null,\n      ondata: null,\n      onerror: null\n    };\n\n    // is a single url\n    if (isString(outline)) {\n      action.url = outline;\n      return action;\n    }\n\n    // overwrite\n    Object.assign(action, outline);\n\n    // see if should reformat headers;\n    if (isString(action.headers)) {\n      var parts = action.headers.split(/:(.+)/);\n      action.headers = {\n        header: parts[0],\n        value: parts[1]\n      };\n    }\n\n    // if is bool withCredentials\n    action.withCredentials = toBoolean(action.withCredentials);\n\n    return action;\n  };\n\n  var toServerAPI = function toServerAPI(value) {\n    return createServerAPI(value);\n  };\n\n  var isNull = function isNull(value) {\n    return value === null;\n  };\n\n  var isObject = function isObject(value) {\n    return typeof value === 'object' && value !== null;\n  };\n\n  var isAPI = function isAPI(value) {\n    return (\n      isObject(value) &&\n      isString(value.url) &&\n      isObject(value.process) &&\n      isObject(value.revert) &&\n      isObject(value.restore) &&\n      isObject(value.fetch)\n    );\n  };\n\n  var getType = function getType(value) {\n    if (isArray(value)) {\n      return 'array';\n    }\n\n    if (isNull(value)) {\n      return 'null';\n    }\n\n    if (isInt(value)) {\n      return 'int';\n    }\n\n    if (/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(value)) {\n      return 'bytes';\n    }\n\n    if (isAPI(value)) {\n      return 'api';\n    }\n\n    return typeof value;\n  };\n\n  var replaceSingleQuotes = function replaceSingleQuotes(str) {\n    return str\n      .replace(/{\\s*'/g, '{\"')\n      .replace(/'\\s*}/g, '\"}')\n      .replace(/'\\s*:/g, '\":')\n      .replace(/:\\s*'/g, ':\"')\n      .replace(/,\\s*'/g, ',\"')\n      .replace(/'\\s*,/g, '\",');\n  };\n\n  var conversionTable = {\n    array: toArray,\n    boolean: toBoolean,\n    int: function int(value) {\n      return getType(value) === 'bytes' ? toBytes(value) : toInt(value);\n    },\n    number: toFloat,\n    float: toFloat,\n    bytes: toBytes,\n    string: function string(value) {\n      return isFunction(value) ? value : toString(value);\n    },\n    function: function _function(value) {\n      return toFunctionReference(value);\n    },\n    serverapi: toServerAPI,\n    object: function object(value) {\n      try {\n        return JSON.parse(replaceSingleQuotes(value));\n      } catch (e) {\n        return null;\n      }\n    }\n  };\n\n  var convertTo = function convertTo(value, type) {\n    return conversionTable[type](value);\n  };\n\n  var getValueByType = function getValueByType(\n    newValue,\n    defaultValue,\n    valueType\n  ) {\n    // can always assign default value\n    if (newValue === defaultValue) {\n      return newValue;\n    }\n\n    // get the type of the new value\n    var newValueType = getType(newValue);\n\n    // is valid type?\n    if (newValueType !== valueType) {\n      // is string input, let's attempt to convert\n      var convertedValue = convertTo(newValue, valueType);\n\n      // what is the type now\n      newValueType = getType(convertedValue);\n\n      // no valid conversions found\n      if (convertedValue === null) {\n        throw 'Trying to assign value with incorrect type to \"' +\n          option +\n          '\", allowed type: \"' +\n          valueType +\n          '\"';\n      } else {\n        newValue = convertedValue;\n      }\n    }\n\n    // assign new value\n    return newValue;\n  };\n\n  var createOption = function createOption(defaultValue, valueType) {\n    var currentValue = defaultValue;\n    return {\n      enumerable: true,\n      get: function get() {\n        return currentValue;\n      },\n      set: function set(newValue) {\n        currentValue = getValueByType(newValue, defaultValue, valueType);\n      }\n    };\n  };\n\n  var createOptions = function createOptions(options) {\n    var obj = {};\n    forin(options, function(prop) {\n      var optionDefinition = options[prop];\n      obj[prop] = createOption(optionDefinition[0], optionDefinition[1]);\n    });\n    return createObject(obj);\n  };\n\n  var createInitialState = function createInitialState(options) {\n    return {\n      // model\n      items: [],\n\n      // timeout used for calling update items\n      listUpdateTimeout: null,\n\n      // timeout used for stacking metadata updates\n      itemUpdateTimeout: null,\n\n      // queue of items waiting to be processed\n      processingQueue: [],\n\n      // options\n      options: createOptions(options)\n    };\n  };\n\n  var fromCamels = function fromCamels(string) {\n    var separator =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '-';\n    return string\n      .split(/(?=[A-Z])/)\n      .map(function(part) {\n        return part.toLowerCase();\n      })\n      .join(separator);\n  };\n\n  var createOptionAPI = function createOptionAPI(store, options) {\n    var obj = {};\n    forin(options, function(key) {\n      obj[key] = {\n        get: function get() {\n          return store.getState().options[key];\n        },\n        set: function set(value) {\n          store.dispatch('SET_' + fromCamels(key, '_').toUpperCase(), {\n            value: value\n          });\n        }\n      };\n    });\n    return obj;\n  };\n\n  var createOptionActions = function createOptionActions(options) {\n    return function(dispatch, query, state) {\n      var obj = {};\n      forin(options, function(key) {\n        var name = fromCamels(key, '_').toUpperCase();\n\n        obj['SET_' + name] = function(action) {\n          try {\n            state.options[key] = action.value;\n          } catch (e) {} // nope, failed\n\n          // we successfully set the value of this option\n          dispatch('DID_SET_' + name, { value: state.options[key] });\n        };\n      });\n      return obj;\n    };\n  };\n\n  var createOptionQueries = function createOptionQueries(options) {\n    return function(state) {\n      var obj = {};\n      forin(options, function(key) {\n        obj['GET_' + fromCamels(key, '_').toUpperCase()] = function(action) {\n          return state.options[key];\n        };\n      });\n      return obj;\n    };\n  };\n\n  var InteractionMethod = {\n    API: 1,\n    DROP: 2,\n    BROWSE: 3,\n    PASTE: 4,\n    NONE: 5\n  };\n\n  var getUniqueId = function getUniqueId() {\n    return Math.random()\n      .toString(36)\n      .substr(2, 9);\n  };\n\n  function _typeof(obj) {\n    if (typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol') {\n      _typeof = function(obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function(obj) {\n        return obj &&\n          typeof Symbol === 'function' &&\n          obj.constructor === Symbol &&\n          obj !== Symbol.prototype\n          ? 'symbol'\n          : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  var REACT_ELEMENT_TYPE;\n\n  function _jsx(type, props, key, children) {\n    if (!REACT_ELEMENT_TYPE) {\n      REACT_ELEMENT_TYPE =\n        (typeof Symbol === 'function' &&\n          Symbol['for'] &&\n          Symbol['for']('react.element')) ||\n        0xeac7;\n    }\n\n    var defaultProps = type && type.defaultProps;\n    var childrenLength = arguments.length - 3;\n\n    if (!props && childrenLength !== 0) {\n      props = {\n        children: void 0\n      };\n    }\n\n    if (props && defaultProps) {\n      for (var propName in defaultProps) {\n        if (props[propName] === void 0) {\n          props[propName] = defaultProps[propName];\n        }\n      }\n    } else if (!props) {\n      props = defaultProps || {};\n    }\n\n    if (childrenLength === 1) {\n      props.children = children;\n    } else if (childrenLength > 1) {\n      var childArray = new Array(childrenLength);\n\n      for (var i = 0; i < childrenLength; i++) {\n        childArray[i] = arguments[i + 3];\n      }\n\n      props.children = childArray;\n    }\n\n    return {\n      $$typeof: REACT_ELEMENT_TYPE,\n      type: type,\n      key: key === undefined ? null : '' + key,\n      ref: null,\n      props: props,\n      _owner: null\n    };\n  }\n\n  function _asyncIterator(iterable) {\n    var method;\n\n    if (typeof Symbol !== 'undefined') {\n      if (Symbol.asyncIterator) {\n        method = iterable[Symbol.asyncIterator];\n        if (method != null) return method.call(iterable);\n      }\n\n      if (Symbol.iterator) {\n        method = iterable[Symbol.iterator];\n        if (method != null) return method.call(iterable);\n      }\n    }\n\n    throw new TypeError('Object is not async iterable');\n  }\n\n  function _AwaitValue(value) {\n    this.wrapped = value;\n  }\n\n  function _AsyncGenerator(gen) {\n    var front, back;\n\n    function send(key, arg) {\n      return new Promise(function(resolve, reject) {\n        var request = {\n          key: key,\n          arg: arg,\n          resolve: resolve,\n          reject: reject,\n          next: null\n        };\n\n        if (back) {\n          back = back.next = request;\n        } else {\n          front = back = request;\n          resume(key, arg);\n        }\n      });\n    }\n\n    function resume(key, arg) {\n      try {\n        var result = gen[key](arg);\n        var value = result.value;\n        var wrappedAwait = value instanceof _AwaitValue;\n        Promise.resolve(wrappedAwait ? value.wrapped : value).then(\n          function(arg) {\n            if (wrappedAwait) {\n              resume('next', arg);\n              return;\n            }\n\n            settle(result.done ? 'return' : 'normal', arg);\n          },\n          function(err) {\n            resume('throw', err);\n          }\n        );\n      } catch (err) {\n        settle('throw', err);\n      }\n    }\n\n    function settle(type, value) {\n      switch (type) {\n        case 'return':\n          front.resolve({\n            value: value,\n            done: true\n          });\n          break;\n\n        case 'throw':\n          front.reject(value);\n          break;\n\n        default:\n          front.resolve({\n            value: value,\n            done: false\n          });\n          break;\n      }\n\n      front = front.next;\n\n      if (front) {\n        resume(front.key, front.arg);\n      } else {\n        back = null;\n      }\n    }\n\n    this._invoke = send;\n\n    if (typeof gen.return !== 'function') {\n      this.return = undefined;\n    }\n  }\n\n  if (typeof Symbol === 'function' && Symbol.asyncIterator) {\n    _AsyncGenerator.prototype[Symbol.asyncIterator] = function() {\n      return this;\n    };\n  }\n\n  _AsyncGenerator.prototype.next = function(arg) {\n    return this._invoke('next', arg);\n  };\n\n  _AsyncGenerator.prototype.throw = function(arg) {\n    return this._invoke('throw', arg);\n  };\n\n  _AsyncGenerator.prototype.return = function(arg) {\n    return this._invoke('return', arg);\n  };\n\n  function _wrapAsyncGenerator(fn) {\n    return function() {\n      return new _AsyncGenerator(fn.apply(this, arguments));\n    };\n  }\n\n  function _awaitAsyncGenerator(value) {\n    return new _AwaitValue(value);\n  }\n\n  function _asyncGeneratorDelegate(inner, awaitWrap) {\n    var iter = {},\n      waiting = false;\n\n    function pump(key, value) {\n      waiting = true;\n      value = new Promise(function(resolve) {\n        resolve(inner[key](value));\n      });\n      return {\n        done: false,\n        value: awaitWrap(value)\n      };\n    }\n\n    if (typeof Symbol === 'function' && Symbol.iterator) {\n      iter[Symbol.iterator] = function() {\n        return this;\n      };\n    }\n\n    iter.next = function(value) {\n      if (waiting) {\n        waiting = false;\n        return value;\n      }\n\n      return pump('next', value);\n    };\n\n    if (typeof inner.throw === 'function') {\n      iter.throw = function(value) {\n        if (waiting) {\n          waiting = false;\n          throw value;\n        }\n\n        return pump('throw', value);\n      };\n    }\n\n    if (typeof inner.return === 'function') {\n      iter.return = function(value) {\n        return pump('return', value);\n      };\n    }\n\n    return iter;\n  }\n\n  function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n    try {\n      var info = gen[key](arg);\n      var value = info.value;\n    } catch (error) {\n      reject(error);\n      return;\n    }\n\n    if (info.done) {\n      resolve(value);\n    } else {\n      Promise.resolve(value).then(_next, _throw);\n    }\n  }\n\n  function _asyncToGenerator(fn) {\n    return function() {\n      var self = this,\n        args = arguments;\n      return new Promise(function(resolve, reject) {\n        var gen = fn.apply(self, args);\n\n        function _next(value) {\n          asyncGeneratorStep(\n            gen,\n            resolve,\n            reject,\n            _next,\n            _throw,\n            'next',\n            value\n          );\n        }\n\n        function _throw(err) {\n          asyncGeneratorStep(gen, resolve, reject, _next, _throw, 'throw', err);\n        }\n\n        _next(undefined);\n      });\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError('Cannot call a class as a function');\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if ('value' in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineEnumerableProperties(obj, descs) {\n    for (var key in descs) {\n      var desc = descs[key];\n      desc.configurable = desc.enumerable = true;\n      if ('value' in desc) desc.writable = true;\n      Object.defineProperty(obj, key, desc);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var objectSymbols = Object.getOwnPropertySymbols(descs);\n\n      for (var i = 0; i < objectSymbols.length; i++) {\n        var sym = objectSymbols[i];\n        var desc = descs[sym];\n        desc.configurable = desc.enumerable = true;\n        if ('value' in desc) desc.writable = true;\n        Object.defineProperty(obj, sym, desc);\n      }\n    }\n\n    return obj;\n  }\n\n  function _defaults(obj, defaults) {\n    var keys = Object.getOwnPropertyNames(defaults);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n      if (value && value.configurable && obj[key] === undefined) {\n        Object.defineProperty(obj, key, value);\n      }\n    }\n\n    return obj;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _extends() {\n    _extends =\n      Object.assign ||\n      function(target) {\n        for (var i = 1; i < arguments.length; i++) {\n          var source = arguments[i];\n\n          for (var key in source) {\n            if (Object.prototype.hasOwnProperty.call(source, key)) {\n              target[key] = source[key];\n            }\n          }\n        }\n\n        return target;\n      };\n\n    return _extends.apply(this, arguments);\n  }\n\n  function _objectSpread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n      var ownKeys = Object.keys(source);\n\n      if (typeof Object.getOwnPropertySymbols === 'function') {\n        ownKeys = ownKeys.concat(\n          Object.getOwnPropertySymbols(source).filter(function(sym) {\n            return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n          })\n        );\n      }\n\n      ownKeys.forEach(function(key) {\n        _defineProperty(target, key, source[key]);\n      });\n    }\n\n    return target;\n  }\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly)\n        symbols = symbols.filter(function(sym) {\n          return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n        });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(source, true).forEach(function(key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(\n          target,\n          Object.getOwnPropertyDescriptors(source)\n        );\n      } else {\n        ownKeys(source).forEach(function(key) {\n          Object.defineProperty(\n            target,\n            key,\n            Object.getOwnPropertyDescriptor(source, key)\n          );\n        });\n      }\n    }\n\n    return target;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== 'function' && superClass !== null) {\n      throw new TypeError('Super expression must either be null or a function');\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _inheritsLoose(subClass, superClass) {\n    subClass.prototype = Object.create(superClass.prototype);\n    subClass.prototype.constructor = subClass;\n    subClass.__proto__ = superClass;\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf\n      ? Object.getPrototypeOf\n      : function _getPrototypeOf(o) {\n          return o.__proto__ || Object.getPrototypeOf(o);\n        };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf =\n      Object.setPrototypeOf ||\n      function _setPrototypeOf(o, p) {\n        o.__proto__ = p;\n        return o;\n      };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function isNativeReflectConstruct() {\n    if (typeof Reflect === 'undefined' || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === 'function') return true;\n\n    try {\n      Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function _construct(Parent, args, Class) {\n    if (isNativeReflectConstruct()) {\n      _construct = Reflect.construct;\n    } else {\n      _construct = function _construct(Parent, args, Class) {\n        var a = [null];\n        a.push.apply(a, args);\n        var Constructor = Function.bind.apply(Parent, a);\n        var instance = new Constructor();\n        if (Class) _setPrototypeOf(instance, Class.prototype);\n        return instance;\n      };\n    }\n\n    return _construct.apply(null, arguments);\n  }\n\n  function _isNativeFunction(fn) {\n    return Function.toString.call(fn).indexOf('[native code]') !== -1;\n  }\n\n  function _wrapNativeSuper(Class) {\n    var _cache = typeof Map === 'function' ? new Map() : undefined;\n\n    _wrapNativeSuper = function _wrapNativeSuper(Class) {\n      if (Class === null || !_isNativeFunction(Class)) return Class;\n\n      if (typeof Class !== 'function') {\n        throw new TypeError(\n          'Super expression must either be null or a function'\n        );\n      }\n\n      if (typeof _cache !== 'undefined') {\n        if (_cache.has(Class)) return _cache.get(Class);\n\n        _cache.set(Class, Wrapper);\n      }\n\n      function Wrapper() {\n        return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n      }\n\n      Wrapper.prototype = Object.create(Class.prototype, {\n        constructor: {\n          value: Wrapper,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      return _setPrototypeOf(Wrapper, Class);\n    };\n\n    return _wrapNativeSuper(Class);\n  }\n\n  function _instanceof(left, right) {\n    if (\n      right != null &&\n      typeof Symbol !== 'undefined' &&\n      right[Symbol.hasInstance]\n    ) {\n      return !!right[Symbol.hasInstance](left);\n    } else {\n      return left instanceof right;\n    }\n  }\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule\n      ? obj\n      : {\n          default: obj\n        };\n  }\n\n  function _interopRequireWildcard(obj) {\n    if (obj && obj.__esModule) {\n      return obj;\n    } else {\n      var newObj = {};\n\n      if (obj != null) {\n        for (var key in obj) {\n          if (Object.prototype.hasOwnProperty.call(obj, key)) {\n            var desc =\n              Object.defineProperty && Object.getOwnPropertyDescriptor\n                ? Object.getOwnPropertyDescriptor(obj, key)\n                : {};\n\n            if (desc.get || desc.set) {\n              Object.defineProperty(newObj, key, desc);\n            } else {\n              newObj[key] = obj[key];\n            }\n          }\n        }\n      }\n\n      newObj.default = obj;\n      return newObj;\n    }\n  }\n\n  function _newArrowCheck(innerThis, boundThis) {\n    if (innerThis !== boundThis) {\n      throw new TypeError('Cannot instantiate an arrow function');\n    }\n  }\n\n  function _objectDestructuringEmpty(obj) {\n    if (obj == null) throw new TypeError('Cannot destructure undefined');\n  }\n\n  function _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n\n    for (i = 0; i < sourceKeys.length; i++) {\n      key = sourceKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      target[key] = source[key];\n    }\n\n    return target;\n  }\n\n  function _objectWithoutProperties(source, excluded) {\n    if (source == null) return {};\n\n    var target = _objectWithoutPropertiesLoose(source, excluded);\n\n    var key, i;\n\n    if (Object.getOwnPropertySymbols) {\n      var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n      for (i = 0; i < sourceSymbolKeys.length; i++) {\n        key = sourceSymbolKeys[i];\n        if (excluded.indexOf(key) >= 0) continue;\n        if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n        target[key] = source[key];\n      }\n    }\n\n    return target;\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\n        \"this hasn't been initialised - super() hasn't been called\"\n      );\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === 'object' || typeof call === 'function')) {\n      return call;\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  function _superPropBase(object, property) {\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\n      object = _getPrototypeOf(object);\n      if (object === null) break;\n    }\n\n    return object;\n  }\n\n  function _get(target, property, receiver) {\n    if (typeof Reflect !== 'undefined' && Reflect.get) {\n      _get = Reflect.get;\n    } else {\n      _get = function _get(target, property, receiver) {\n        var base = _superPropBase(target, property);\n\n        if (!base) return;\n        var desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.get) {\n          return desc.get.call(receiver);\n        }\n\n        return desc.value;\n      };\n    }\n\n    return _get(target, property, receiver || target);\n  }\n\n  function set(target, property, value, receiver) {\n    if (typeof Reflect !== 'undefined' && Reflect.set) {\n      set = Reflect.set;\n    } else {\n      set = function set(target, property, value, receiver) {\n        var base = _superPropBase(target, property);\n\n        var desc;\n\n        if (base) {\n          desc = Object.getOwnPropertyDescriptor(base, property);\n\n          if (desc.set) {\n            desc.set.call(receiver, value);\n            return true;\n          } else if (!desc.writable) {\n            return false;\n          }\n        }\n\n        desc = Object.getOwnPropertyDescriptor(receiver, property);\n\n        if (desc) {\n          if (!desc.writable) {\n            return false;\n          }\n\n          desc.value = value;\n          Object.defineProperty(receiver, property, desc);\n        } else {\n          _defineProperty(receiver, property, value);\n        }\n\n        return true;\n      };\n    }\n\n    return set(target, property, value, receiver);\n  }\n\n  function _set(target, property, value, receiver, isStrict) {\n    var s = set(target, property, value, receiver || target);\n\n    if (!s && isStrict) {\n      throw new Error('failed to set property');\n    }\n\n    return value;\n  }\n\n  function _taggedTemplateLiteral(strings, raw) {\n    if (!raw) {\n      raw = strings.slice(0);\n    }\n\n    return Object.freeze(\n      Object.defineProperties(strings, {\n        raw: {\n          value: Object.freeze(raw)\n        }\n      })\n    );\n  }\n\n  function _taggedTemplateLiteralLoose(strings, raw) {\n    if (!raw) {\n      raw = strings.slice(0);\n    }\n\n    strings.raw = raw;\n    return strings;\n  }\n\n  function _temporalRef(val, name) {\n    if (val === _temporalUndefined) {\n      throw new ReferenceError(name + ' is not defined - temporal dead zone');\n    } else {\n      return val;\n    }\n  }\n\n  function _readOnlyError(name) {\n    throw new Error('\"' + name + '\" is read-only');\n  }\n\n  function _classNameTDZError(name) {\n    throw new Error(\n      'Class \"' + name + '\" cannot be referenced in computed property keys.'\n    );\n  }\n\n  var _temporalUndefined = {};\n\n  function _slicedToArray(arr, i) {\n    return (\n      _arrayWithHoles(arr) ||\n      _iterableToArrayLimit(arr, i) ||\n      _nonIterableRest()\n    );\n  }\n\n  function _slicedToArrayLoose(arr, i) {\n    return (\n      _arrayWithHoles(arr) ||\n      _iterableToArrayLimitLoose(arr, i) ||\n      _nonIterableRest()\n    );\n  }\n\n  function _toArray(arr) {\n    return _arrayWithHoles(arr) || _iterableToArray(arr) || _nonIterableRest();\n  }\n\n  function _toConsumableArray(arr) {\n    return (\n      _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread()\n    );\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) {\n      for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++)\n        arr2[i] = arr[i];\n\n      return arr2;\n    }\n  }\n\n  function _arrayWithHoles(arr) {\n    if (Array.isArray(arr)) return arr;\n  }\n\n  function _iterableToArray(iter) {\n    if (\n      Symbol.iterator in Object(iter) ||\n      Object.prototype.toString.call(iter) === '[object Arguments]'\n    )\n      return Array.from(iter);\n  }\n\n  function _iterableToArrayLimit(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (\n        var _i = arr[Symbol.iterator](), _s;\n        !(_n = (_s = _i.next()).done);\n        _n = true\n      ) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i['return'] != null) _i['return']();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  function _iterableToArrayLimitLoose(arr, i) {\n    var _arr = [];\n\n    for (\n      var _iterator = arr[Symbol.iterator](), _step;\n      !(_step = _iterator.next()).done;\n\n    ) {\n      _arr.push(_step.value);\n\n      if (i && _arr.length === i) break;\n    }\n\n    return _arr;\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError('Invalid attempt to spread non-iterable instance');\n  }\n\n  function _nonIterableRest() {\n    throw new TypeError('Invalid attempt to destructure non-iterable instance');\n  }\n\n  function _skipFirstGeneratorNext(fn) {\n    return function() {\n      var it = fn.apply(this, arguments);\n      it.next();\n      return it;\n    };\n  }\n\n  function _toPrimitive(input, hint) {\n    if (typeof input !== 'object' || input === null) return input;\n    var prim = input[Symbol.toPrimitive];\n\n    if (prim !== undefined) {\n      var res = prim.call(input, hint || 'default');\n      if (typeof res !== 'object') return res;\n      throw new TypeError('@@toPrimitive must return a primitive value.');\n    }\n\n    return (hint === 'string' ? String : Number)(input);\n  }\n\n  function _toPropertyKey(arg) {\n    var key = _toPrimitive(arg, 'string');\n\n    return typeof key === 'symbol' ? key : String(key);\n  }\n\n  function _initializerWarningHelper(descriptor, context) {\n    throw new Error(\n      'Decorating class property failed. Please ensure that ' +\n        'proposal-class-properties is enabled and set to use loose mode. ' +\n        'To use proposal-class-properties in spec mode with decorators, wait for ' +\n        'the next major version of decorators in stage 2.'\n    );\n  }\n\n  function _initializerDefineProperty(target, property, descriptor, context) {\n    if (!descriptor) return;\n    Object.defineProperty(target, property, {\n      enumerable: descriptor.enumerable,\n      configurable: descriptor.configurable,\n      writable: descriptor.writable,\n      value: descriptor.initializer\n        ? descriptor.initializer.call(context)\n        : void 0\n    });\n  }\n\n  function _applyDecoratedDescriptor(\n    target,\n    property,\n    decorators,\n    descriptor,\n    context\n  ) {\n    var desc = {};\n    Object.keys(descriptor).forEach(function(key) {\n      desc[key] = descriptor[key];\n    });\n    desc.enumerable = !!desc.enumerable;\n    desc.configurable = !!desc.configurable;\n\n    if ('value' in desc || desc.initializer) {\n      desc.writable = true;\n    }\n\n    desc = decorators\n      .slice()\n      .reverse()\n      .reduce(function(desc, decorator) {\n        return decorator(target, property, desc) || desc;\n      }, desc);\n\n    if (context && desc.initializer !== void 0) {\n      desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n      desc.initializer = undefined;\n    }\n\n    if (desc.initializer === void 0) {\n      Object.defineProperty(target, property, desc);\n      desc = null;\n    }\n\n    return desc;\n  }\n\n  var id = 0;\n\n  function _classPrivateFieldLooseKey(name) {\n    return '__private_' + id++ + '_' + name;\n  }\n\n  function _classPrivateFieldLooseBase(receiver, privateKey) {\n    if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) {\n      throw new TypeError('attempted to use private field on non-instance');\n    }\n\n    return receiver;\n  }\n\n  function _classPrivateFieldGet(receiver, privateMap) {\n    var descriptor = privateMap.get(receiver);\n\n    if (!descriptor) {\n      throw new TypeError('attempted to get private field on non-instance');\n    }\n\n    if (descriptor.get) {\n      return descriptor.get.call(receiver);\n    }\n\n    return descriptor.value;\n  }\n\n  function _classPrivateFieldSet(receiver, privateMap, value) {\n    var descriptor = privateMap.get(receiver);\n\n    if (!descriptor) {\n      throw new TypeError('attempted to set private field on non-instance');\n    }\n\n    if (descriptor.set) {\n      descriptor.set.call(receiver, value);\n    } else {\n      if (!descriptor.writable) {\n        throw new TypeError('attempted to set read only private field');\n      }\n\n      descriptor.value = value;\n    }\n\n    return value;\n  }\n\n  function _classPrivateFieldDestructureSet(receiver, privateMap) {\n    if (!privateMap.has(receiver)) {\n      throw new TypeError('attempted to set private field on non-instance');\n    }\n\n    var descriptor = privateMap.get(receiver);\n\n    if (descriptor.set) {\n      if (!('__destrObj' in descriptor)) {\n        descriptor.__destrObj = {\n          set value(v) {\n            descriptor.set.call(receiver, v);\n          }\n        };\n      }\n\n      return descriptor.__destrObj;\n    } else {\n      if (!descriptor.writable) {\n        throw new TypeError('attempted to set read only private field');\n      }\n\n      return descriptor;\n    }\n  }\n\n  function _classStaticPrivateFieldSpecGet(\n    receiver,\n    classConstructor,\n    descriptor\n  ) {\n    if (receiver !== classConstructor) {\n      throw new TypeError('Private static access of wrong provenance');\n    }\n\n    return descriptor.value;\n  }\n\n  function _classStaticPrivateFieldSpecSet(\n    receiver,\n    classConstructor,\n    descriptor,\n    value\n  ) {\n    if (receiver !== classConstructor) {\n      throw new TypeError('Private static access of wrong provenance');\n    }\n\n    if (!descriptor.writable) {\n      throw new TypeError('attempted to set read only private field');\n    }\n\n    descriptor.value = value;\n    return value;\n  }\n\n  function _classStaticPrivateMethodGet(receiver, classConstructor, method) {\n    if (receiver !== classConstructor) {\n      throw new TypeError('Private static access of wrong provenance');\n    }\n\n    return method;\n  }\n\n  function _classStaticPrivateMethodSet() {\n    throw new TypeError('attempted to set read only static private field');\n  }\n\n  function _decorate(decorators, factory, superClass, mixins) {\n    var api = _getDecoratorsApi();\n\n    if (mixins) {\n      for (var i = 0; i < mixins.length; i++) {\n        api = mixins[i](api);\n      }\n    }\n\n    var r = factory(function initialize(O) {\n      api.initializeInstanceElements(O, decorated.elements);\n    }, superClass);\n    var decorated = api.decorateClass(\n      _coalesceClassElements(r.d.map(_createElementDescriptor)),\n      decorators\n    );\n    api.initializeClassElements(r.F, decorated.elements);\n    return api.runClassFinishers(r.F, decorated.finishers);\n  }\n\n  function _getDecoratorsApi() {\n    _getDecoratorsApi = function() {\n      return api;\n    };\n\n    var api = {\n      elementsDefinitionOrder: [['method'], ['field']],\n      initializeInstanceElements: function(O, elements) {\n        ['method', 'field'].forEach(function(kind) {\n          elements.forEach(function(element) {\n            if (element.kind === kind && element.placement === 'own') {\n              this.defineClassElement(O, element);\n            }\n          }, this);\n        }, this);\n      },\n      initializeClassElements: function(F, elements) {\n        var proto = F.prototype;\n        ['method', 'field'].forEach(function(kind) {\n          elements.forEach(function(element) {\n            var placement = element.placement;\n\n            if (\n              element.kind === kind &&\n              (placement === 'static' || placement === 'prototype')\n            ) {\n              var receiver = placement === 'static' ? F : proto;\n              this.defineClassElement(receiver, element);\n            }\n          }, this);\n        }, this);\n      },\n      defineClassElement: function(receiver, element) {\n        var descriptor = element.descriptor;\n\n        if (element.kind === 'field') {\n          var initializer = element.initializer;\n          descriptor = {\n            enumerable: descriptor.enumerable,\n            writable: descriptor.writable,\n            configurable: descriptor.configurable,\n            value: initializer === void 0 ? void 0 : initializer.call(receiver)\n          };\n        }\n\n        Object.defineProperty(receiver, element.key, descriptor);\n      },\n      decorateClass: function(elements, decorators) {\n        var newElements = [];\n        var finishers = [];\n        var placements = {\n          static: [],\n          prototype: [],\n          own: []\n        };\n        elements.forEach(function(element) {\n          this.addElementPlacement(element, placements);\n        }, this);\n        elements.forEach(function(element) {\n          if (!_hasDecorators(element)) return newElements.push(element);\n          var elementFinishersExtras = this.decorateElement(\n            element,\n            placements\n          );\n          newElements.push(elementFinishersExtras.element);\n          newElements.push.apply(newElements, elementFinishersExtras.extras);\n          finishers.push.apply(finishers, elementFinishersExtras.finishers);\n        }, this);\n\n        if (!decorators) {\n          return {\n            elements: newElements,\n            finishers: finishers\n          };\n        }\n\n        var result = this.decorateConstructor(newElements, decorators);\n        finishers.push.apply(finishers, result.finishers);\n        result.finishers = finishers;\n        return result;\n      },\n      addElementPlacement: function(element, placements, silent) {\n        var keys = placements[element.placement];\n\n        if (!silent && keys.indexOf(element.key) !== -1) {\n          throw new TypeError('Duplicated element (' + element.key + ')');\n        }\n\n        keys.push(element.key);\n      },\n      decorateElement: function(element, placements) {\n        var extras = [];\n        var finishers = [];\n\n        for (\n          var decorators = element.decorators, i = decorators.length - 1;\n          i >= 0;\n          i--\n        ) {\n          var keys = placements[element.placement];\n          keys.splice(keys.indexOf(element.key), 1);\n          var elementObject = this.fromElementDescriptor(element);\n          var elementFinisherExtras = this.toElementFinisherExtras(\n            (0, decorators[i])(elementObject) || elementObject\n          );\n          element = elementFinisherExtras.element;\n          this.addElementPlacement(element, placements);\n\n          if (elementFinisherExtras.finisher) {\n            finishers.push(elementFinisherExtras.finisher);\n          }\n\n          var newExtras = elementFinisherExtras.extras;\n\n          if (newExtras) {\n            for (var j = 0; j < newExtras.length; j++) {\n              this.addElementPlacement(newExtras[j], placements);\n            }\n\n            extras.push.apply(extras, newExtras);\n          }\n        }\n\n        return {\n          element: element,\n          finishers: finishers,\n          extras: extras\n        };\n      },\n      decorateConstructor: function(elements, decorators) {\n        var finishers = [];\n\n        for (var i = decorators.length - 1; i >= 0; i--) {\n          var obj = this.fromClassDescriptor(elements);\n          var elementsAndFinisher = this.toClassDescriptor(\n            (0, decorators[i])(obj) || obj\n          );\n\n          if (elementsAndFinisher.finisher !== undefined) {\n            finishers.push(elementsAndFinisher.finisher);\n          }\n\n          if (elementsAndFinisher.elements !== undefined) {\n            elements = elementsAndFinisher.elements;\n\n            for (var j = 0; j < elements.length - 1; j++) {\n              for (var k = j + 1; k < elements.length; k++) {\n                if (\n                  elements[j].key === elements[k].key &&\n                  elements[j].placement === elements[k].placement\n                ) {\n                  throw new TypeError(\n                    'Duplicated element (' + elements[j].key + ')'\n                  );\n                }\n              }\n            }\n          }\n        }\n\n        return {\n          elements: elements,\n          finishers: finishers\n        };\n      },\n      fromElementDescriptor: function(element) {\n        var obj = {\n          kind: element.kind,\n          key: element.key,\n          placement: element.placement,\n          descriptor: element.descriptor\n        };\n        var desc = {\n          value: 'Descriptor',\n          configurable: true\n        };\n        Object.defineProperty(obj, Symbol.toStringTag, desc);\n        if (element.kind === 'field') obj.initializer = element.initializer;\n        return obj;\n      },\n      toElementDescriptors: function(elementObjects) {\n        if (elementObjects === undefined) return;\n        return _toArray(elementObjects).map(function(elementObject) {\n          var element = this.toElementDescriptor(elementObject);\n          this.disallowProperty(\n            elementObject,\n            'finisher',\n            'An element descriptor'\n          );\n          this.disallowProperty(\n            elementObject,\n            'extras',\n            'An element descriptor'\n          );\n          return element;\n        }, this);\n      },\n      toElementDescriptor: function(elementObject) {\n        var kind = String(elementObject.kind);\n\n        if (kind !== 'method' && kind !== 'field') {\n          throw new TypeError(\n            'An element descriptor\\'s .kind property must be either \"method\" or' +\n              ' \"field\", but a decorator created an element descriptor with' +\n              ' .kind \"' +\n              kind +\n              '\"'\n          );\n        }\n\n        var key = _toPropertyKey(elementObject.key);\n\n        var placement = String(elementObject.placement);\n\n        if (\n          placement !== 'static' &&\n          placement !== 'prototype' &&\n          placement !== 'own'\n        ) {\n          throw new TypeError(\n            'An element descriptor\\'s .placement property must be one of \"static\",' +\n              ' \"prototype\" or \"own\", but a decorator created an element descriptor' +\n              ' with .placement \"' +\n              placement +\n              '\"'\n          );\n        }\n\n        var descriptor = elementObject.descriptor;\n        this.disallowProperty(\n          elementObject,\n          'elements',\n          'An element descriptor'\n        );\n        var element = {\n          kind: kind,\n          key: key,\n          placement: placement,\n          descriptor: Object.assign({}, descriptor)\n        };\n\n        if (kind !== 'field') {\n          this.disallowProperty(\n            elementObject,\n            'initializer',\n            'A method descriptor'\n          );\n        } else {\n          this.disallowProperty(\n            descriptor,\n            'get',\n            'The property descriptor of a field descriptor'\n          );\n          this.disallowProperty(\n            descriptor,\n            'set',\n            'The property descriptor of a field descriptor'\n          );\n          this.disallowProperty(\n            descriptor,\n            'value',\n            'The property descriptor of a field descriptor'\n          );\n          element.initializer = elementObject.initializer;\n        }\n\n        return element;\n      },\n      toElementFinisherExtras: function(elementObject) {\n        var element = this.toElementDescriptor(elementObject);\n\n        var finisher = _optionalCallableProperty(elementObject, 'finisher');\n\n        var extras = this.toElementDescriptors(elementObject.extras);\n        return {\n          element: element,\n          finisher: finisher,\n          extras: extras\n        };\n      },\n      fromClassDescriptor: function(elements) {\n        var obj = {\n          kind: 'class',\n          elements: elements.map(this.fromElementDescriptor, this)\n        };\n        var desc = {\n          value: 'Descriptor',\n          configurable: true\n        };\n        Object.defineProperty(obj, Symbol.toStringTag, desc);\n        return obj;\n      },\n      toClassDescriptor: function(obj) {\n        var kind = String(obj.kind);\n\n        if (kind !== 'class') {\n          throw new TypeError(\n            'A class descriptor\\'s .kind property must be \"class\", but a decorator' +\n              ' created a class descriptor with .kind \"' +\n              kind +\n              '\"'\n          );\n        }\n\n        this.disallowProperty(obj, 'key', 'A class descriptor');\n        this.disallowProperty(obj, 'placement', 'A class descriptor');\n        this.disallowProperty(obj, 'descriptor', 'A class descriptor');\n        this.disallowProperty(obj, 'initializer', 'A class descriptor');\n        this.disallowProperty(obj, 'extras', 'A class descriptor');\n\n        var finisher = _optionalCallableProperty(obj, 'finisher');\n\n        var elements = this.toElementDescriptors(obj.elements);\n        return {\n          elements: elements,\n          finisher: finisher\n        };\n      },\n      runClassFinishers: function(constructor, finishers) {\n        for (var i = 0; i < finishers.length; i++) {\n          var newConstructor = (0, finishers[i])(constructor);\n\n          if (newConstructor !== undefined) {\n            if (typeof newConstructor !== 'function') {\n              throw new TypeError('Finishers must return a constructor.');\n            }\n\n            constructor = newConstructor;\n          }\n        }\n\n        return constructor;\n      },\n      disallowProperty: function(obj, name, objectType) {\n        if (obj[name] !== undefined) {\n          throw new TypeError(\n            objectType + \" can't have a .\" + name + ' property.'\n          );\n        }\n      }\n    };\n    return api;\n  }\n\n  function _createElementDescriptor(def) {\n    var key = _toPropertyKey(def.key);\n\n    var descriptor;\n\n    if (def.kind === 'method') {\n      descriptor = {\n        value: def.value,\n        writable: true,\n        configurable: true,\n        enumerable: false\n      };\n    } else if (def.kind === 'get') {\n      descriptor = {\n        get: def.value,\n        configurable: true,\n        enumerable: false\n      };\n    } else if (def.kind === 'set') {\n      descriptor = {\n        set: def.value,\n        configurable: true,\n        enumerable: false\n      };\n    } else if (def.kind === 'field') {\n      descriptor = {\n        configurable: true,\n        writable: true,\n        enumerable: true\n      };\n    }\n\n    var element = {\n      kind: def.kind === 'field' ? 'field' : 'method',\n      key: key,\n      placement: def.static\n        ? 'static'\n        : def.kind === 'field'\n        ? 'own'\n        : 'prototype',\n      descriptor: descriptor\n    };\n    if (def.decorators) element.decorators = def.decorators;\n    if (def.kind === 'field') element.initializer = def.value;\n    return element;\n  }\n\n  function _coalesceGetterSetter(element, other) {\n    if (element.descriptor.get !== undefined) {\n      other.descriptor.get = element.descriptor.get;\n    } else {\n      other.descriptor.set = element.descriptor.set;\n    }\n  }\n\n  function _coalesceClassElements(elements) {\n    var newElements = [];\n\n    var isSameElement = function(other) {\n      return (\n        other.kind === 'method' &&\n        other.key === element.key &&\n        other.placement === element.placement\n      );\n    };\n\n    for (var i = 0; i < elements.length; i++) {\n      var element = elements[i];\n      var other;\n\n      if (\n        element.kind === 'method' &&\n        (other = newElements.find(isSameElement))\n      ) {\n        if (\n          _isDataDescriptor(element.descriptor) ||\n          _isDataDescriptor(other.descriptor)\n        ) {\n          if (_hasDecorators(element) || _hasDecorators(other)) {\n            throw new ReferenceError(\n              'Duplicated methods (' + element.key + \") can't be decorated.\"\n            );\n          }\n\n          other.descriptor = element.descriptor;\n        } else {\n          if (_hasDecorators(element)) {\n            if (_hasDecorators(other)) {\n              throw new ReferenceError(\n                \"Decorators can't be placed on different accessors with for \" +\n                  'the same property (' +\n                  element.key +\n                  ').'\n              );\n            }\n\n            other.decorators = element.decorators;\n          }\n\n          _coalesceGetterSetter(element, other);\n        }\n      } else {\n        newElements.push(element);\n      }\n    }\n\n    return newElements;\n  }\n\n  function _hasDecorators(element) {\n    return element.decorators && element.decorators.length;\n  }\n\n  function _isDataDescriptor(desc) {\n    return (\n      desc !== undefined &&\n      !(desc.value === undefined && desc.writable === undefined)\n    );\n  }\n\n  function _optionalCallableProperty(obj, name) {\n    var value = obj[name];\n\n    if (value !== undefined && typeof value !== 'function') {\n      throw new TypeError(\"Expected '\" + name + \"' to be a function\");\n    }\n\n    return value;\n  }\n\n  function _classPrivateMethodGet(receiver, privateSet, fn) {\n    if (!privateSet.has(receiver)) {\n      throw new TypeError('attempted to get private field on non-instance');\n    }\n\n    return fn;\n  }\n\n  function _classPrivateMethodSet() {\n    throw new TypeError('attempted to reassign private method');\n  }\n\n  function _wrapRegExp(re, groups) {\n    _wrapRegExp = function(re, groups) {\n      return new BabelRegExp(re, groups);\n    };\n\n    var _RegExp = _wrapNativeSuper(RegExp);\n\n    var _super = RegExp.prototype;\n\n    var _groups = new WeakMap();\n\n    function BabelRegExp(re, groups) {\n      var _this = _RegExp.call(this, re);\n\n      _groups.set(_this, groups);\n\n      return _this;\n    }\n\n    _inherits(BabelRegExp, _RegExp);\n\n    BabelRegExp.prototype.exec = function(str) {\n      var result = _super.exec.call(this, str);\n\n      if (result) result.groups = buildGroups(result, this);\n      return result;\n    };\n\n    BabelRegExp.prototype[Symbol.replace] = function(str, substitution) {\n      if (typeof substitution === 'string') {\n        var groups = _groups.get(this);\n\n        return _super[Symbol.replace].call(\n          this,\n          str,\n          substitution.replace(/\\$<([^>]+)>/g, function(_, name) {\n            return '$' + groups[name];\n          })\n        );\n      } else if (typeof substitution === 'function') {\n        var _this = this;\n\n        return _super[Symbol.replace].call(this, str, function() {\n          var args = [];\n          args.push.apply(args, arguments);\n\n          if (typeof args[args.length - 1] !== 'object') {\n            args.push(buildGroups(args, _this));\n          }\n\n          return substitution.apply(this, args);\n        });\n      } else {\n        return _super[Symbol.replace].call(this, str, substitution);\n      }\n    };\n\n    function buildGroups(result, re) {\n      var g = _groups.get(re);\n\n      return Object.keys(g).reduce(function(groups, name) {\n        groups[name] = result[g[name]];\n        return groups;\n      }, Object.create(null));\n    }\n\n    return _wrapRegExp.apply(this, arguments);\n  }\n\n  var arrayRemove = function arrayRemove(arr, index) {\n    return arr.splice(index, 1);\n  };\n\n  var run = function run(cb, sync) {\n    if (sync) {\n      cb();\n    } else if (document.hidden) {\n      Promise.resolve(1).then(cb);\n    } else {\n      setTimeout(cb, 0);\n    }\n  };\n\n  var on = function on() {\n    var listeners = [];\n    var off = function off(event, cb) {\n      arrayRemove(\n        listeners,\n        listeners.findIndex(function(listener) {\n          return listener.event === event && (listener.cb === cb || !cb);\n        })\n      );\n    };\n    var _fire = function fire(event, args, sync) {\n      listeners\n        .filter(function(listener) {\n          return listener.event === event;\n        })\n        .map(function(listener) {\n          return listener.cb;\n        })\n        .forEach(function(cb) {\n          return run(function() {\n            return cb.apply(void 0, _toConsumableArray(args));\n          }, sync);\n        });\n    };\n    return {\n      fireSync: function fireSync(event) {\n        for (\n          var _len = arguments.length,\n            args = new Array(_len > 1 ? _len - 1 : 0),\n            _key = 1;\n          _key < _len;\n          _key++\n        ) {\n          args[_key - 1] = arguments[_key];\n        }\n        _fire(event, args, true);\n      },\n      fire: function fire(event) {\n        for (\n          var _len2 = arguments.length,\n            args = new Array(_len2 > 1 ? _len2 - 1 : 0),\n            _key2 = 1;\n          _key2 < _len2;\n          _key2++\n        ) {\n          args[_key2 - 1] = arguments[_key2];\n        }\n        _fire(event, args, false);\n      },\n      on: function on(event, cb) {\n        listeners.push({ event: event, cb: cb });\n      },\n      onOnce: function onOnce(event, _cb) {\n        listeners.push({\n          event: event,\n          cb: function cb() {\n            off(event, _cb);\n            _cb.apply(void 0, arguments);\n          }\n        });\n      },\n      off: off\n    };\n  };\n\n  var copyObjectPropertiesToObject = function copyObjectPropertiesToObject(\n    src,\n    target,\n    excluded\n  ) {\n    Object.getOwnPropertyNames(src)\n      .filter(function(property) {\n        return !excluded.includes(property);\n      })\n      .forEach(function(key) {\n        return Object.defineProperty(\n          target,\n          key,\n          Object.getOwnPropertyDescriptor(src, key)\n        );\n      });\n  };\n\n  var PRIVATE = [\n    'fire',\n    'process',\n    'revert',\n    'load',\n    'on',\n    'off',\n    'onOnce',\n    'retryLoad',\n    'extend',\n    'archive',\n    'archived',\n    'release',\n    'released',\n    'requestProcessing',\n    'freeze'\n  ];\n\n  var createItemAPI = function createItemAPI(item) {\n    var api = {};\n    copyObjectPropertiesToObject(item, api, PRIVATE);\n    return api;\n  };\n\n  var removeReleasedItems = function removeReleasedItems(items) {\n    items.forEach(function(item, index) {\n      if (item.released) {\n        arrayRemove(items, index);\n      }\n    });\n  };\n\n  var ItemStatus = {\n    INIT: 1,\n    IDLE: 2,\n    PROCESSING_QUEUED: 9,\n    PROCESSING: 3,\n    PROCESSING_COMPLETE: 5,\n    PROCESSING_ERROR: 6,\n    PROCESSING_REVERT_ERROR: 10,\n    LOADING: 7,\n    LOAD_ERROR: 8\n  };\n\n  var FileOrigin = {\n    INPUT: 1,\n    LIMBO: 2,\n    LOCAL: 3\n  };\n\n  var getNonNumeric = function getNonNumeric(str) {\n    return /[^0-9]+/.exec(str);\n  };\n\n  var getDecimalSeparator = function getDecimalSeparator() {\n    return getNonNumeric((1.1).toLocaleString())[0];\n  };\n\n  var getThousandsSeparator = function getThousandsSeparator() {\n    // Added for browsers that do not return the thousands separator (happend on native browser Android 4.4.4)\n    // We check against the normal toString output and if they're the same return a comma when decimal separator is a dot\n    var decimalSeparator = getDecimalSeparator();\n    var thousandsStringWithSeparator = (1000.0).toLocaleString();\n    var thousandsStringWithoutSeparator = (1000.0).toString();\n    if (thousandsStringWithSeparator !== thousandsStringWithoutSeparator) {\n      return getNonNumeric(thousandsStringWithSeparator)[0];\n    }\n    return decimalSeparator === '.' ? ',' : '.';\n  };\n\n  var Type = {\n    BOOLEAN: 'boolean',\n    INT: 'int',\n    NUMBER: 'number',\n    STRING: 'string',\n    ARRAY: 'array',\n    OBJECT: 'object',\n    FUNCTION: 'function',\n    ACTION: 'action',\n    SERVER_API: 'serverapi',\n    REGEX: 'regex'\n  };\n\n  // all registered filters\n  var filters = [];\n\n  // loops over matching filters and passes options to each filter, returning the mapped results\n  var applyFilterChain = function applyFilterChain(key, value, utils) {\n    return new Promise(function(resolve, reject) {\n      // find matching filters for this key\n      var matchingFilters = filters\n        .filter(function(f) {\n          return f.key === key;\n        })\n        .map(function(f) {\n          return f.cb;\n        });\n\n      // resolve now\n      if (matchingFilters.length === 0) {\n        resolve(value);\n        return;\n      }\n\n      // first filter to kick things of\n      var initialFilter = matchingFilters.shift();\n\n      // chain filters\n      matchingFilters\n        .reduce(\n          // loop over promises passing value to next promise\n          function(current, next) {\n            return current.then(function(value) {\n              return next(value, utils);\n            });\n          },\n\n          // call initial filter, will return a promise\n          initialFilter(value, utils)\n\n          // all executed\n        )\n        .then(function(value) {\n          return resolve(value);\n        })\n        .catch(function(error) {\n          return reject(error);\n        });\n    });\n  };\n\n  var applyFilters = function applyFilters(key, value, utils) {\n    return filters\n      .filter(function(f) {\n        return f.key === key;\n      })\n      .map(function(f) {\n        return f.cb(value, utils);\n      });\n  };\n\n  // adds a new filter to the list\n  var addFilter = function addFilter(key, cb) {\n    return filters.push({ key: key, cb: cb });\n  };\n\n  var extendDefaultOptions = function extendDefaultOptions(additionalOptions) {\n    return Object.assign(defaultOptions, additionalOptions);\n  };\n\n  var getOptions = function getOptions() {\n    return Object.assign({}, defaultOptions);\n  };\n\n  var setOptions = function setOptions(opts) {\n    forin(opts, function(key, value) {\n      // key does not exist, so this option cannot be set\n      if (!defaultOptions[key]) {\n        return;\n      }\n      defaultOptions[key][0] = getValueByType(\n        value,\n        defaultOptions[key][0],\n        defaultOptions[key][1]\n      );\n    });\n  };\n\n  // default options on app\n  var defaultOptions = {\n    // the id to add to the root element\n    id: [null, Type.STRING],\n\n    // input field name to use\n    name: ['filepond', Type.STRING],\n\n    // disable the field\n    disabled: [false, Type.BOOLEAN],\n\n    // classname to put on wrapper\n    className: [null, Type.STRING],\n\n    // is the field required\n    required: [false, Type.BOOLEAN],\n\n    // Allow media capture when value is set\n    captureMethod: [null, Type.STRING],\n    // - \"camera\", \"microphone\" or \"camcorder\",\n    // - Does not work with multiple on apple devices\n    // - If set, acceptedFileTypes must be made to match with media wildcard \"image/*\", \"audio/*\" or \"video/*\"\n\n    // sync `acceptedFileTypes` property with `accept` attribute\n    allowSyncAcceptAttribute: [true, Type.BOOLEAN],\n\n    // Feature toggles\n    allowDrop: [true, Type.BOOLEAN], // Allow dropping of files\n    allowBrowse: [true, Type.BOOLEAN], // Allow browsing the file system\n    allowPaste: [true, Type.BOOLEAN], // Allow pasting files\n    allowMultiple: [false, Type.BOOLEAN], // Allow multiple files (disabled by default, as multiple attribute is also required on input to allow multiple)\n    allowReplace: [true, Type.BOOLEAN], // Allow dropping a file on other file to replace it (only works when multiple is set to false)\n    allowRevert: [true, Type.BOOLEAN], // Allows user to revert file upload\n    allowProcess: [true, Type.BOOLEAN], // Allows user to process a file, when set to false, this removes the file upload button\n    allowReorder: [false, Type.BOOLEAN], // Allow reordering of files\n    allowDirectoriesOnly: [false, Type.BOOLEAN], // Allow only selecting directories with browse (no support for filtering dnd at this point)\n\n    // Revert mode\n    forceRevert: [false, Type.BOOLEAN], // Set to 'force' to require the file to be reverted before removal\n\n    // Input requirements\n    maxFiles: [null, Type.INT], // Max number of files\n    checkValidity: [false, Type.BOOLEAN], // Enables custom validity messages\n\n    // Where to put file\n    itemInsertLocationFreedom: [true, Type.BOOLEAN], // Set to false to always add items to begin or end of list\n    itemInsertLocation: ['before', Type.STRING], // Default index in list to add items that have been dropped at the top of the list\n    itemInsertInterval: [75, Type.INT],\n\n    // Drag 'n Drop related\n    dropOnPage: [false, Type.BOOLEAN], // Allow dropping of files anywhere on page (prevents browser from opening file if dropped outside of Up)\n    dropOnElement: [true, Type.BOOLEAN], // Drop needs to happen on element (set to false to also load drops outside of Up)\n    dropValidation: [false, Type.BOOLEAN], // Enable or disable validating files on drop\n    ignoredFiles: [['.ds_store', 'thumbs.db', 'desktop.ini'], Type.ARRAY],\n\n    // Upload related\n    instantUpload: [true, Type.BOOLEAN], // Should upload files immidiately on drop\n    maxParallelUploads: [2, Type.INT], // Maximum files to upload in parallel\n\n    // Chunks\n    chunkUploads: [false, Type.BOOLEAN], // Enable chunked uploads\n    chunkForce: [false, Type.BOOLEAN], // Force use of chunk uploads even for files smaller than chunk size\n    chunkSize: [5000000, Type.INT], // Size of chunks (5MB default)\n    chunkRetryDelays: [[500, 1000, 3000], Type.Array], // Amount of times to retry upload of a chunk when it fails\n\n    // The server api end points to use for uploading (see docs)\n    server: [null, Type.SERVER_API],\n\n    // Labels and status messages\n    labelDecimalSeparator: [getDecimalSeparator(), Type.STRING], // Default is locale separator\n    labelThousandsSeparator: [getThousandsSeparator(), Type.STRING], // Default is locale separator\n\n    labelIdle: [\n      'Drag & Drop your files or <span class=\"filepond--label-action\">Browse</span>',\n      Type.STRING\n    ],\n    labelInvalidField: ['Field contains invalid files', Type.STRING],\n    labelFileWaitingForSize: ['Waiting for size', Type.STRING],\n    labelFileSizeNotAvailable: ['Size not available', Type.STRING],\n    labelFileCountSingular: ['file in list', Type.STRING],\n    labelFileCountPlural: ['files in list', Type.STRING],\n    labelFileLoading: ['Loading', Type.STRING],\n    labelFileAdded: ['Added', Type.STRING], // assistive only\n    labelFileLoadError: ['Error during load', Type.STRING],\n    labelFileRemoved: ['Removed', Type.STRING], // assistive only\n    labelFileRemoveError: ['Error during remove', Type.STRING],\n    labelFileProcessing: ['Uploading', Type.STRING],\n    labelFileProcessingComplete: ['Upload complete', Type.STRING],\n    labelFileProcessingAborted: ['Upload cancelled', Type.STRING],\n    labelFileProcessingError: ['Error during upload', Type.STRING],\n    labelFileProcessingRevertError: ['Error during revert', Type.STRING],\n\n    labelTapToCancel: ['tap to cancel', Type.STRING],\n    labelTapToRetry: ['tap to retry', Type.STRING],\n    labelTapToUndo: ['tap to undo', Type.STRING],\n\n    labelButtonRemoveItem: ['Remove', Type.STRING],\n    labelButtonAbortItemLoad: ['Abort', Type.STRING],\n    labelButtonRetryItemLoad: ['Retry', Type.STRING],\n    labelButtonAbortItemProcessing: ['Cancel', Type.STRING],\n    labelButtonUndoItemProcessing: ['Undo', Type.STRING],\n    labelButtonRetryItemProcessing: ['Retry', Type.STRING],\n    labelButtonProcessItem: ['Upload', Type.STRING],\n\n    // make sure width and height plus viewpox are even numbers so icons are nicely centered\n    iconRemove: [\n      '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n      Type.STRING\n    ],\n\n    iconProcess: [\n      '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z\" fill=\"currentColor\" fill-rule=\"evenodd\"/></svg>',\n      Type.STRING\n    ],\n\n    iconRetry: [\n      '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n      Type.STRING\n    ],\n\n    iconUndo: [\n      '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n      Type.STRING\n    ],\n\n    iconDone: [\n      '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n      Type.STRING\n    ],\n\n    // event handlers\n    oninit: [null, Type.FUNCTION],\n    onwarning: [null, Type.FUNCTION],\n    onerror: [null, Type.FUNCTION],\n    onactivatefile: [null, Type.FUNCTION],\n    oninitfile: [null, Type.FUNCTION],\n    onaddfilestart: [null, Type.FUNCTION],\n    onaddfileprogress: [null, Type.FUNCTION],\n    onaddfile: [null, Type.FUNCTION],\n    onprocessfilestart: [null, Type.FUNCTION],\n    onprocessfileprogress: [null, Type.FUNCTION],\n    onprocessfileabort: [null, Type.FUNCTION],\n    onprocessfilerevert: [null, Type.FUNCTION],\n    onprocessfile: [null, Type.FUNCTION],\n    onprocessfiles: [null, Type.FUNCTION],\n    onremovefile: [null, Type.FUNCTION],\n    onpreparefile: [null, Type.FUNCTION],\n    onupdatefiles: [null, Type.FUNCTION],\n    onreorderfiles: [null, Type.FUNCTION],\n\n    // hooks\n    beforeDropFile: [null, Type.FUNCTION],\n    beforeAddFile: [null, Type.FUNCTION],\n    beforeRemoveFile: [null, Type.FUNCTION],\n\n    // styles\n    stylePanelLayout: [null, Type.STRING], // null 'integrated', 'compact', 'circle'\n    stylePanelAspectRatio: [null, Type.STRING], // null or '3:2' or 1\n    styleItemPanelAspectRatio: [null, Type.STRING],\n    styleButtonRemoveItemPosition: ['left', Type.STRING],\n    styleButtonProcessItemPosition: ['right', Type.STRING],\n    styleLoadIndicatorPosition: ['right', Type.STRING],\n    styleProgressIndicatorPosition: ['right', Type.STRING],\n    styleButtonRemoveItemAlign: [false, Type.BOOLEAN],\n\n    // custom initial files array\n    files: [[], Type.ARRAY]\n  };\n\n  var getItemByQuery = function getItemByQuery(items, query) {\n    // just return first index\n    if (isEmpty(query)) {\n      return items[0] || null;\n    }\n\n    // query is index\n    if (isInt(query)) {\n      return items[query] || null;\n    }\n\n    // if query is item, get the id\n    if (typeof query === 'object') {\n      query = query.id;\n    }\n\n    // assume query is a string and return item by id\n    return (\n      items.find(function(item) {\n        return item.id === query;\n      }) || null\n    );\n  };\n\n  var getNumericAspectRatioFromString = function getNumericAspectRatioFromString(\n    aspectRatio\n  ) {\n    if (isEmpty(aspectRatio)) {\n      return aspectRatio;\n    }\n    if (/:/.test(aspectRatio)) {\n      var parts = aspectRatio.split(':');\n      return parts[1] / parts[0];\n    }\n    return parseFloat(aspectRatio);\n  };\n\n  var getActiveItems = function getActiveItems(items) {\n    return items.filter(function(item) {\n      return !item.archived;\n    });\n  };\n\n  var Status = {\n    EMPTY: 0,\n    IDLE: 1, // waiting\n    ERROR: 2, // a file is in error state\n    BUSY: 3, // busy processing or loading\n    READY: 4 // all files uploaded\n  };\n\n  var ITEM_ERROR = [\n    ItemStatus.LOAD_ERROR,\n    ItemStatus.PROCESSING_ERROR,\n    ItemStatus.PROCESSING_REVERT_ERROR\n  ];\n  var ITEM_BUSY = [\n    ItemStatus.LOADING,\n    ItemStatus.PROCESSING,\n    ItemStatus.PROCESSING_QUEUED,\n    ItemStatus.INIT\n  ];\n  var ITEM_READY = [ItemStatus.PROCESSING_COMPLETE];\n\n  var isItemInErrorState = function isItemInErrorState(item) {\n    return ITEM_ERROR.includes(item.status);\n  };\n  var isItemInBusyState = function isItemInBusyState(item) {\n    return ITEM_BUSY.includes(item.status);\n  };\n  var isItemInReadyState = function isItemInReadyState(item) {\n    return ITEM_READY.includes(item.status);\n  };\n\n  var queries = function queries(state) {\n    return {\n      GET_STATUS: function GET_STATUS() {\n        var items = getActiveItems(state.items);\n        var EMPTY = Status.EMPTY,\n          ERROR = Status.ERROR,\n          BUSY = Status.BUSY,\n          IDLE = Status.IDLE,\n          READY = Status.READY;\n\n        if (items.length === 0) return EMPTY;\n\n        if (items.some(isItemInErrorState)) return ERROR;\n\n        if (items.some(isItemInBusyState)) return BUSY;\n\n        if (items.some(isItemInReadyState)) return READY;\n\n        return IDLE;\n      },\n\n      GET_ITEM: function GET_ITEM(query) {\n        return getItemByQuery(state.items, query);\n      },\n\n      GET_ACTIVE_ITEM: function GET_ACTIVE_ITEM(query) {\n        return getItemByQuery(getActiveItems(state.items), query);\n      },\n\n      GET_ACTIVE_ITEMS: function GET_ACTIVE_ITEMS() {\n        return getActiveItems(state.items);\n      },\n\n      GET_ITEMS: function GET_ITEMS() {\n        return state.items;\n      },\n\n      GET_ITEM_NAME: function GET_ITEM_NAME(query) {\n        var item = getItemByQuery(state.items, query);\n        return item ? item.filename : null;\n      },\n\n      GET_ITEM_SIZE: function GET_ITEM_SIZE(query) {\n        var item = getItemByQuery(state.items, query);\n        return item ? item.fileSize : null;\n      },\n\n      GET_STYLES: function GET_STYLES() {\n        return Object.keys(state.options)\n          .filter(function(key) {\n            return /^style/.test(key);\n          })\n          .map(function(option) {\n            return {\n              name: option,\n              value: state.options[option]\n            };\n          });\n      },\n\n      GET_PANEL_ASPECT_RATIO: function GET_PANEL_ASPECT_RATIO() {\n        var isShapeCircle = /circle/.test(state.options.stylePanelLayout);\n        var aspectRatio = isShapeCircle\n          ? 1\n          : getNumericAspectRatioFromString(\n              state.options.stylePanelAspectRatio\n            );\n        return aspectRatio;\n      },\n\n      GET_ITEM_PANEL_ASPECT_RATIO: function GET_ITEM_PANEL_ASPECT_RATIO() {\n        return state.options.styleItemPanelAspectRatio;\n      },\n\n      GET_ITEMS_BY_STATUS: function GET_ITEMS_BY_STATUS(status) {\n        return getActiveItems(state.items).filter(function(item) {\n          return item.status === status;\n        });\n      },\n\n      GET_TOTAL_ITEMS: function GET_TOTAL_ITEMS() {\n        return getActiveItems(state.items).length;\n      },\n\n      IS_ASYNC: function IS_ASYNC() {\n        return (\n          isObject(state.options.server) &&\n          (isObject(state.options.server.process) ||\n            isFunction(state.options.server.process))\n        );\n      }\n    };\n  };\n\n  var hasRoomForItem = function hasRoomForItem(state) {\n    var count = getActiveItems(state.items).length;\n\n    // if cannot have multiple items, to add one item it should currently not contain items\n    if (!state.options.allowMultiple) {\n      return count === 0;\n    }\n\n    // if allows multiple items, we check if a max item count has been set, if not, there's no limit\n    var maxFileCount = state.options.maxFiles;\n    if (maxFileCount === null) {\n      return true;\n    }\n\n    // we check if the current count is smaller than the max count, if so, another file can still be added\n    if (count < maxFileCount) {\n      return true;\n    }\n\n    // no more room for another file\n    return false;\n  };\n\n  var limit = function limit(value, min, max) {\n    return Math.max(Math.min(max, value), min);\n  };\n\n  var arrayInsert = function arrayInsert(arr, index, item) {\n    return arr.splice(index, 0, item);\n  };\n\n  var insertItem = function insertItem(items, item, index) {\n    if (isEmpty(item)) {\n      return null;\n    }\n\n    // if index is undefined, append\n    if (typeof index === 'undefined') {\n      items.push(item);\n      return item;\n    }\n\n    // limit the index to the size of the items array\n    index = limit(index, 0, items.length);\n\n    // add item to array\n    arrayInsert(items, index, item);\n\n    // expose\n    return item;\n  };\n\n  var isBase64DataURI = function isBase64DataURI(str) {\n    return /^\\s*data:([a-z]+\\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s]*)\\s*$/i.test(\n      str\n    );\n  };\n\n  var getFilenameFromURL = function getFilenameFromURL(url) {\n    return url\n      .split('/')\n      .pop()\n      .split('?')\n      .shift();\n  };\n\n  var getExtensionFromFilename = function getExtensionFromFilename(name) {\n    return name.split('.').pop();\n  };\n\n  var guesstimateExtension = function guesstimateExtension(type) {\n    // if no extension supplied, exit here\n    if (typeof type !== 'string') {\n      return '';\n    }\n\n    // get subtype\n    var subtype = type.split('/').pop();\n\n    // is svg subtype\n    if (/svg/.test(subtype)) {\n      return 'svg';\n    }\n\n    if (/zip|compressed/.test(subtype)) {\n      return 'zip';\n    }\n\n    if (/plain/.test(subtype)) {\n      return 'txt';\n    }\n\n    if (/msword/.test(subtype)) {\n      return 'doc';\n    }\n\n    // if is valid subtype\n    if (/[a-z]+/.test(subtype)) {\n      // always use jpg extension\n      if (subtype === 'jpeg') {\n        return 'jpg';\n      }\n\n      // return subtype\n      return subtype;\n    }\n\n    return '';\n  };\n\n  var leftPad = function leftPad(value) {\n    var padding =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    return (padding + value).slice(-padding.length);\n  };\n\n  var getDateString = function getDateString() {\n    var date =\n      arguments.length > 0 && arguments[0] !== undefined\n        ? arguments[0]\n        : new Date();\n    return (\n      date.getFullYear() +\n      '-' +\n      leftPad(date.getMonth() + 1, '00') +\n      '-' +\n      leftPad(date.getDate(), '00') +\n      '_' +\n      leftPad(date.getHours(), '00') +\n      '-' +\n      leftPad(date.getMinutes(), '00') +\n      '-' +\n      leftPad(date.getSeconds(), '00')\n    );\n  };\n\n  var getFileFromBlob = function getFileFromBlob(blob, filename) {\n    var type =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    var extension =\n      arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n    var file =\n      typeof type === 'string'\n        ? blob.slice(0, blob.size, type)\n        : blob.slice(0, blob.size, blob.type);\n    file.lastModifiedDate = new Date();\n\n    // copy relative path\n    if (blob._relativePath) file._relativePath = blob._relativePath;\n\n    // if blob has name property, use as filename if no filename supplied\n    if (!isString(filename)) {\n      filename = getDateString();\n    }\n\n    // if filename supplied but no extension and filename has extension\n    if (filename && extension === null && getExtensionFromFilename(filename)) {\n      file.name = filename;\n    } else {\n      extension = extension || guesstimateExtension(file.type);\n      file.name = filename + (extension ? '.' + extension : '');\n    }\n\n    return file;\n  };\n\n  var getBlobBuilder = function getBlobBuilder() {\n    return (window.BlobBuilder =\n      window.BlobBuilder ||\n      window.WebKitBlobBuilder ||\n      window.MozBlobBuilder ||\n      window.MSBlobBuilder);\n  };\n\n  var createBlob = function createBlob(arrayBuffer, mimeType) {\n    var BB = getBlobBuilder();\n\n    if (BB) {\n      var bb = new BB();\n      bb.append(arrayBuffer);\n      return bb.getBlob(mimeType);\n    }\n\n    return new Blob([arrayBuffer], {\n      type: mimeType\n    });\n  };\n\n  var getBlobFromByteStringWithMimeType = function getBlobFromByteStringWithMimeType(\n    byteString,\n    mimeType\n  ) {\n    var ab = new ArrayBuffer(byteString.length);\n    var ia = new Uint8Array(ab);\n\n    for (var i = 0; i < byteString.length; i++) {\n      ia[i] = byteString.charCodeAt(i);\n    }\n\n    return createBlob(ab, mimeType);\n  };\n\n  var getMimeTypeFromBase64DataURI = function getMimeTypeFromBase64DataURI(\n    dataURI\n  ) {\n    return (/^data:(.+);/.exec(dataURI) || [])[1] || null;\n  };\n\n  var getBase64DataFromBase64DataURI = function getBase64DataFromBase64DataURI(\n    dataURI\n  ) {\n    // get data part of string (remove data:image/jpeg...,)\n    var data = dataURI.split(',')[1];\n\n    // remove any whitespace as that causes InvalidCharacterError in IE\n    return data.replace(/\\s/g, '');\n  };\n\n  var getByteStringFromBase64DataURI = function getByteStringFromBase64DataURI(\n    dataURI\n  ) {\n    return atob(getBase64DataFromBase64DataURI(dataURI));\n  };\n\n  var getBlobFromBase64DataURI = function getBlobFromBase64DataURI(dataURI) {\n    var mimeType = getMimeTypeFromBase64DataURI(dataURI);\n    var byteString = getByteStringFromBase64DataURI(dataURI);\n\n    return getBlobFromByteStringWithMimeType(byteString, mimeType);\n  };\n\n  var getFileFromBase64DataURI = function getFileFromBase64DataURI(\n    dataURI,\n    filename,\n    extension\n  ) {\n    return getFileFromBlob(\n      getBlobFromBase64DataURI(dataURI),\n      filename,\n      null,\n      extension\n    );\n  };\n\n  var getFileNameFromHeader = function getFileNameFromHeader(header) {\n    // test if is content disposition header, if not exit\n    if (!/^content-disposition:/i.test(header)) return null;\n\n    // get filename parts\n    var matches = header\n      .split(/filename=|filename\\*=.+''/)\n      .splice(1)\n      .map(function(name) {\n        return name.trim().replace(/^[\"']|[;\"']{0,2}$/g, '');\n      })\n      .filter(function(name) {\n        return name.length;\n      });\n\n    return matches.length ? decodeURI(matches[matches.length - 1]) : null;\n  };\n\n  var getFileSizeFromHeader = function getFileSizeFromHeader(header) {\n    if (/content-length:/i.test(header)) {\n      var size = header.match(/[0-9]+/)[0];\n      return size ? parseInt(size, 10) : null;\n    }\n    return null;\n  };\n\n  var getTranfserIdFromHeader = function getTranfserIdFromHeader(header) {\n    if (/x-content-transfer-id:/i.test(header)) {\n      var id = (header.split(':')[1] || '').trim();\n      return id || null;\n    }\n    return null;\n  };\n\n  var getFileInfoFromHeaders = function getFileInfoFromHeaders(headers) {\n    var info = {\n      source: null,\n      name: null,\n      size: null\n    };\n\n    var rows = headers.split('\\n');\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n    try {\n      for (\n        var _iterator = rows[Symbol.iterator](), _step;\n        !(_iteratorNormalCompletion = (_step = _iterator.next()).done);\n        _iteratorNormalCompletion = true\n      ) {\n        var header = _step.value;\n\n        var name = getFileNameFromHeader(header);\n        if (name) {\n          info.name = name;\n          continue;\n        }\n\n        var size = getFileSizeFromHeader(header);\n        if (size) {\n          info.size = size;\n          continue;\n        }\n\n        var source = getTranfserIdFromHeader(header);\n        if (source) {\n          info.source = source;\n          continue;\n        }\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return != null) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return info;\n  };\n\n  var createFileLoader = function createFileLoader(fetchFn) {\n    var state = {\n      source: null,\n      complete: false,\n      progress: 0,\n      size: null,\n      timestamp: null,\n      duration: 0,\n      request: null\n    };\n\n    var getProgress = function getProgress() {\n      return state.progress;\n    };\n    var abort = function abort() {\n      if (state.request && state.request.abort) {\n        state.request.abort();\n      }\n    };\n\n    // load source\n    var load = function load() {\n      // get quick reference\n      var source = state.source;\n\n      api.fire('init', source);\n\n      // Load Files\n      if (source instanceof File) {\n        api.fire('load', source);\n      } else if (source instanceof Blob) {\n        // Load blobs, set default name to current date\n        api.fire('load', getFileFromBlob(source, source.name));\n      } else if (isBase64DataURI(source)) {\n        // Load base 64, set default name to current date\n        api.fire('load', getFileFromBase64DataURI(source));\n      } else {\n        // Deal as if is external URL, let's load it!\n        loadURL(source);\n      }\n    };\n\n    // loads a url\n    var loadURL = function loadURL(url) {\n      // is remote url and no fetch method supplied\n      if (!fetchFn) {\n        api.fire('error', {\n          type: 'error',\n          body: \"Can't load URL\",\n          code: 400\n        });\n\n        return;\n      }\n\n      // set request start\n      state.timestamp = Date.now();\n\n      // load file\n      state.request = fetchFn(\n        url,\n        function(response) {\n          // update duration\n          state.duration = Date.now() - state.timestamp;\n\n          // done!\n          state.complete = true;\n\n          // turn blob response into a file\n          if (response instanceof Blob) {\n            response = getFileFromBlob(\n              response,\n              response.name || getFilenameFromURL(url)\n            );\n          }\n\n          api.fire(\n            'load',\n            // if has received blob, we go with blob, if no response, we return null\n            response instanceof Blob\n              ? response\n              : response\n              ? response.body\n              : null\n          );\n        },\n        function(error) {\n          api.fire(\n            'error',\n            typeof error === 'string'\n              ? {\n                  type: 'error',\n                  code: 0,\n                  body: error\n                }\n              : error\n          );\n        },\n        function(computable, current, total) {\n          // collected some meta data already\n          if (total) {\n            state.size = total;\n          }\n\n          // update duration\n          state.duration = Date.now() - state.timestamp;\n\n          // if we can't compute progress, we're not going to fire progress events\n          if (!computable) {\n            state.progress = null;\n            return;\n          }\n\n          // update progress percentage\n          state.progress = current / total;\n\n          // expose\n          api.fire('progress', state.progress);\n        },\n        function() {\n          api.fire('abort');\n        },\n        function(response) {\n          var fileinfo = getFileInfoFromHeaders(\n            typeof response === 'string' ? response : response.headers\n          );\n          api.fire('meta', {\n            size: state.size || fileinfo.size,\n            filename: fileinfo.name,\n            source: fileinfo.source\n          });\n        }\n      );\n    };\n\n    var api = Object.assign({}, on(), {\n      setSource: function setSource(source) {\n        return (state.source = source);\n      },\n      getProgress: getProgress, // file load progress\n      abort: abort, // abort file load\n      load: load // start load\n    });\n\n    return api;\n  };\n\n  var isGet = function isGet(method) {\n    return /GET|HEAD/.test(method);\n  };\n\n  var sendRequest = function sendRequest(data, url, options) {\n    var api = {\n      onheaders: function onheaders() {},\n      onprogress: function onprogress() {},\n      onload: function onload() {},\n      ontimeout: function ontimeout() {},\n      onerror: function onerror() {},\n      onabort: function onabort() {},\n      abort: function abort() {\n        aborted = true;\n        xhr.abort();\n      }\n    };\n\n    // timeout identifier, only used when timeout is defined\n    var aborted = false;\n    var headersReceived = false;\n\n    // set default options\n    options = Object.assign(\n      {\n        method: 'POST',\n        headers: {},\n        withCredentials: false\n      },\n      options\n    );\n\n    // encode url\n    url = encodeURI(url);\n\n    // if method is GET, add any received data to url\n\n    if (isGet(options.method) && data) {\n      url =\n        '' +\n        url +\n        encodeURIComponent(\n          typeof data === 'string' ? data : JSON.stringify(data)\n        );\n    }\n\n    // create request\n    var xhr = new XMLHttpRequest();\n\n    // progress of load\n    var process = isGet(options.method) ? xhr : xhr.upload;\n    process.onprogress = function(e) {\n      // no progress event when aborted ( onprogress is called once after abort() )\n      if (aborted) {\n        return;\n      }\n\n      api.onprogress(e.lengthComputable, e.loaded, e.total);\n    };\n\n    // tries to get header info to the app as fast as possible\n    xhr.onreadystatechange = function() {\n      // not interesting in these states ('unsent' and 'openend' as they don't give us any additional info)\n      if (xhr.readyState < 2) {\n        return;\n      }\n\n      // no server response\n      if (xhr.readyState === 4 && xhr.status === 0) {\n        return;\n      }\n\n      if (headersReceived) {\n        return;\n      }\n\n      headersReceived = true;\n\n      // we've probably received some useful data in response headers\n      api.onheaders(xhr);\n    };\n\n    // load successful\n    xhr.onload = function() {\n      // is classified as valid response\n      if (xhr.status >= 200 && xhr.status < 300) {\n        api.onload(xhr);\n      } else {\n        api.onerror(xhr);\n      }\n    };\n\n    // error during load\n    xhr.onerror = function() {\n      return api.onerror(xhr);\n    };\n\n    // request aborted\n    xhr.onabort = function() {\n      aborted = true;\n      api.onabort();\n    };\n\n    // request timeout\n    xhr.ontimeout = function() {\n      return api.ontimeout(xhr);\n    };\n\n    // open up open up!\n    xhr.open(options.method, url, true);\n\n    // set timeout if defined (do it after open so IE11 plays ball)\n    if (isInt(options.timeout)) {\n      xhr.timeout = options.timeout;\n    }\n\n    // add headers\n    Object.keys(options.headers).forEach(function(key) {\n      var value = unescape(encodeURIComponent(options.headers[key]));\n      xhr.setRequestHeader(key, value);\n    });\n\n    // set type of response\n    if (options.responseType) {\n      xhr.responseType = options.responseType;\n    }\n\n    // set credentials\n    if (options.withCredentials) {\n      xhr.withCredentials = true;\n    }\n\n    // let's send our data\n    xhr.send(data);\n\n    return api;\n  };\n\n  var createResponse = function createResponse(type, code, body, headers) {\n    return {\n      type: type,\n      code: code,\n      body: body,\n      headers: headers\n    };\n  };\n\n  var createTimeoutResponse = function createTimeoutResponse(cb) {\n    return function(xhr) {\n      cb(createResponse('error', 0, 'Timeout', xhr.getAllResponseHeaders()));\n    };\n  };\n\n  var hasQS = function hasQS(str) {\n    return /\\?/.test(str);\n  };\n  var buildURL = function buildURL() {\n    var url = '';\n    for (\n      var _len = arguments.length, parts = new Array(_len), _key = 0;\n      _key < _len;\n      _key++\n    ) {\n      parts[_key] = arguments[_key];\n    }\n    parts.forEach(function(part) {\n      url += hasQS(url) && hasQS(part) ? part.replace(/\\?/, '&') : part;\n    });\n    return url;\n  };\n\n  var createFetchFunction = function createFetchFunction() {\n    var apiUrl =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var action = arguments.length > 1 ? arguments[1] : undefined;\n    // custom handler (should also handle file, load, error, progress and abort)\n    if (typeof action === 'function') {\n      return action;\n    }\n\n    // no action supplied\n    if (!action || !isString(action.url)) {\n      return null;\n    }\n\n    // set onload hanlder\n    var onload =\n      action.onload ||\n      function(res) {\n        return res;\n      };\n    var onerror =\n      action.onerror ||\n      function(res) {\n        return null;\n      };\n\n    // internal handler\n    return function(url, load, error, progress, abort, headers) {\n      // do local or remote request based on if the url is external\n      var request = sendRequest(\n        url,\n        buildURL(apiUrl, action.url),\n        Object.assign({}, action, {\n          responseType: 'blob'\n        })\n      );\n\n      request.onload = function(xhr) {\n        // get headers\n        var headers = xhr.getAllResponseHeaders();\n\n        // get filename\n        var filename =\n          getFileInfoFromHeaders(headers).name || getFilenameFromURL(url);\n\n        // create response\n        load(\n          createResponse(\n            'load',\n            xhr.status,\n            action.method === 'HEAD'\n              ? null\n              : getFileFromBlob(onload(xhr.response), filename),\n            headers\n          )\n        );\n      };\n\n      request.onerror = function(xhr) {\n        error(\n          createResponse(\n            'error',\n            xhr.status,\n            onerror(xhr.response) || xhr.statusText,\n            xhr.getAllResponseHeaders()\n          )\n        );\n      };\n\n      request.onheaders = function(xhr) {\n        headers(\n          createResponse(\n            'headers',\n            xhr.status,\n            null,\n            xhr.getAllResponseHeaders()\n          )\n        );\n      };\n\n      request.ontimeout = createTimeoutResponse(error);\n      request.onprogress = progress;\n      request.onabort = abort;\n\n      // should return request\n      return request;\n    };\n  };\n\n  var ChunkStatus = {\n    QUEUED: 0,\n    COMPLETE: 1,\n    PROCESSING: 2,\n    ERROR: 3,\n    WAITING: 4\n  };\n\n  /*\n                                                       function signature:\n                                                         (file, metadata, load, error, progress, abort, transfer, options) => {\n                                                           return {\n                                                           abort:() => {}\n                                                         }\n                                                       }\n                                                       */\n\n  // apiUrl, action, name, file, metadata, load, error, progress, abort, transfer, options\n  var processFileChunked = function processFileChunked(\n    apiUrl,\n    action,\n    name,\n    file,\n    metadata,\n    load,\n    error,\n    progress,\n    abort,\n    transfer,\n    options\n  ) {\n    // all chunks\n    var chunks = [];\n    var chunkTransferId = options.chunkTransferId,\n      chunkServer = options.chunkServer,\n      chunkSize = options.chunkSize,\n      chunkRetryDelays = options.chunkRetryDelays;\n\n    // default state\n    var state = {\n      serverId: chunkTransferId,\n      aborted: false\n    };\n\n    // set onload handlers\n    var ondata =\n      action.ondata ||\n      function(fd) {\n        return fd;\n      };\n    var onload =\n      action.onload ||\n      function(xhr, method) {\n        return method === 'HEAD'\n          ? xhr.getResponseHeader('Upload-Offset')\n          : xhr.response;\n      };\n    var onerror =\n      action.onerror ||\n      function(res) {\n        return null;\n      };\n\n    // create server hook\n    var requestTransferId = function requestTransferId(cb) {\n      var formData = new FormData();\n\n      // add metadata under same name\n      if (isObject(metadata)) formData.append(name, JSON.stringify(metadata));\n\n      var headers =\n        typeof action.headers === 'function'\n          ? action.headers(file, metadata)\n          : Object.assign({}, action.headers, {\n              'Upload-Length': file.size\n            });\n\n      var requestParams = Object.assign({}, action, {\n        headers: headers\n      });\n\n      // send request object\n      var request = sendRequest(\n        ondata(formData),\n        buildURL(apiUrl, action.url),\n        requestParams\n      );\n\n      request.onload = function(xhr) {\n        return cb(onload(xhr, requestParams.method));\n      };\n\n      request.onerror = function(xhr) {\n        return error(\n          createResponse(\n            'error',\n            xhr.status,\n            onerror(xhr.response) || xhr.statusText,\n            xhr.getAllResponseHeaders()\n          )\n        );\n      };\n\n      request.ontimeout = createTimeoutResponse(error);\n    };\n\n    var requestTransferOffset = function requestTransferOffset(cb) {\n      var requestUrl = buildURL(apiUrl, chunkServer.url, state.serverId);\n\n      var headers =\n        typeof action.headers === 'function'\n          ? action.headers(state.serverId)\n          : Object.assign({}, action.headers);\n\n      var requestParams = {\n        headers: headers,\n        method: 'HEAD'\n      };\n\n      var request = sendRequest(null, requestUrl, requestParams);\n\n      request.onload = function(xhr) {\n        return cb(onload(xhr, requestParams.method));\n      };\n\n      request.onerror = function(xhr) {\n        return error(\n          createResponse(\n            'error',\n            xhr.status,\n            onerror(xhr.response) || xhr.statusText,\n            xhr.getAllResponseHeaders()\n          )\n        );\n      };\n\n      request.ontimeout = createTimeoutResponse(error);\n    };\n\n    // create chunks\n    var lastChunkIndex = Math.floor(file.size / chunkSize);\n    for (var i = 0; i <= lastChunkIndex; i++) {\n      var offset = i * chunkSize;\n      var data = file.slice(\n        offset,\n        offset + chunkSize,\n        'application/offset+octet-stream'\n      );\n      chunks[i] = {\n        index: i,\n        size: data.size,\n        offset: offset,\n        data: data,\n        file: file,\n        progress: 0,\n        retries: _toConsumableArray(chunkRetryDelays),\n        status: ChunkStatus.QUEUED,\n        error: null,\n        request: null,\n        timeout: null\n      };\n    }\n\n    var completeProcessingChunks = function completeProcessingChunks() {\n      return load(state.serverId);\n    };\n\n    var canProcessChunk = function canProcessChunk(chunk) {\n      return (\n        chunk.status === ChunkStatus.QUEUED ||\n        chunk.status === ChunkStatus.ERROR\n      );\n    };\n\n    var processChunk = function processChunk(chunk) {\n      // processing is paused, wait here\n      if (state.aborted) return;\n\n      // get next chunk to process\n      chunk = chunk || chunks.find(canProcessChunk);\n\n      // no more chunks to process\n      if (!chunk) {\n        // all done?\n        if (\n          chunks.every(function(chunk) {\n            return chunk.status === ChunkStatus.COMPLETE;\n          })\n        ) {\n          completeProcessingChunks();\n        }\n\n        // no chunk to handle\n        return;\n      }\n\n      // now processing this chunk\n      chunk.status = ChunkStatus.PROCESSING;\n      chunk.progress = null;\n\n      // allow parsing of formdata\n      var ondata =\n        chunkServer.ondata ||\n        function(fd) {\n          return fd;\n        };\n      var onerror =\n        chunkServer.onerror ||\n        function(res) {\n          return null;\n        };\n\n      // send request object\n      var requestUrl = buildURL(apiUrl, chunkServer.url, state.serverId);\n\n      var headers =\n        typeof chunkServer.headers === 'function'\n          ? chunkServer.headers(chunk)\n          : Object.assign({}, chunkServer.headers, {\n              'Content-Type': 'application/offset+octet-stream',\n              'Upload-Offset': chunk.offset,\n              'Upload-Length': file.size,\n              'Upload-Name': file.name\n            });\n\n      var request = (chunk.request = sendRequest(\n        ondata(chunk.data),\n        requestUrl,\n        Object.assign({}, chunkServer, {\n          headers: headers\n        })\n      ));\n\n      request.onload = function() {\n        // done!\n        chunk.status = ChunkStatus.COMPLETE;\n\n        // remove request reference\n        chunk.request = null;\n\n        // start processing more chunks\n        processChunks();\n      };\n\n      request.onprogress = function(lengthComputable, loaded, total) {\n        chunk.progress = lengthComputable ? loaded : null;\n        updateTotalProgress();\n      };\n\n      request.onerror = function(xhr) {\n        chunk.status = ChunkStatus.ERROR;\n        chunk.request = null;\n        chunk.error = onerror(xhr.response) || xhr.statusText;\n        if (!retryProcessChunk(chunk)) {\n          error(\n            createResponse(\n              'error',\n              xhr.status,\n              onerror(xhr.response) || xhr.statusText,\n              xhr.getAllResponseHeaders()\n            )\n          );\n        }\n      };\n\n      request.ontimeout = function(xhr) {\n        chunk.status = ChunkStatus.ERROR;\n        chunk.request = null;\n        if (!retryProcessChunk(chunk)) {\n          createTimeoutResponse(error)(xhr);\n        }\n      };\n\n      request.onabort = function() {\n        chunk.status = ChunkStatus.QUEUED;\n        chunk.request = null;\n        abort();\n      };\n    };\n\n    var retryProcessChunk = function retryProcessChunk(chunk) {\n      // no more retries left\n      if (chunk.retries.length === 0) return false;\n\n      // new retry\n      chunk.status = ChunkStatus.WAITING;\n      clearTimeout(chunk.timeout);\n      chunk.timeout = setTimeout(function() {\n        processChunk(chunk);\n      }, chunk.retries.shift());\n\n      // we're going to retry\n      return true;\n    };\n\n    var updateTotalProgress = function updateTotalProgress() {\n      // calculate total progress fraction\n      var totalBytesTransfered = chunks.reduce(function(p, chunk) {\n        if (p === null || chunk.progress === null) return null;\n        return p + chunk.progress;\n      }, 0);\n\n      // can't compute progress\n      if (totalBytesTransfered === null) return progress(false, 0, 0);\n\n      // calculate progress values\n      var totalSize = chunks.reduce(function(total, chunk) {\n        return total + chunk.size;\n      }, 0);\n\n      // can update progress indicator\n      progress(true, totalBytesTransfered, totalSize);\n    };\n\n    // process new chunks\n    var processChunks = function processChunks() {\n      var totalProcessing = chunks.filter(function(chunk) {\n        return chunk.status === ChunkStatus.PROCESSING;\n      }).length;\n      if (totalProcessing >= 1) return;\n      processChunk();\n    };\n\n    var abortChunks = function abortChunks() {\n      chunks.forEach(function(chunk) {\n        clearTimeout(chunk.timeout);\n        if (chunk.request) {\n          chunk.request.abort();\n        }\n      });\n    };\n\n    // let's go!\n    if (!state.serverId) {\n      requestTransferId(function(serverId) {\n        // stop here if aborted, might have happened in between request and callback\n        if (state.aborted) return;\n\n        // pass back to item so we can use it if something goes wrong\n        transfer(serverId);\n\n        // store internally\n        state.serverId = serverId;\n        processChunks();\n      });\n    } else {\n      requestTransferOffset(function(offset) {\n        // stop here if aborted, might have happened in between request and callback\n        if (state.aborted) return;\n\n        // mark chunks with lower offset as complete\n        chunks\n          .filter(function(chunk) {\n            return chunk.offset < offset;\n          })\n          .forEach(function(chunk) {\n            chunk.status = ChunkStatus.COMPLETE;\n            chunk.progress = chunk.size;\n          });\n\n        // continue processing\n        processChunks();\n      });\n    }\n\n    return {\n      abort: function abort() {\n        state.aborted = true;\n        abortChunks();\n      }\n    };\n  };\n\n  /*\n                                                               function signature:\n                                                                 (file, metadata, load, error, progress, abort) => {\n                                                                   return {\n                                                                   abort:() => {}\n                                                                 }\n                                                               }\n                                                               */\n  var createFileProcessorFunction = function createFileProcessorFunction(\n    apiUrl,\n    action,\n    name,\n    options\n  ) {\n    return function(file, metadata, load, error, progress, abort, transfer) {\n      // no file received\n      if (!file) return;\n\n      // if was passed a file, and we can chunk it, exit here\n      var canChunkUpload = options.chunkUploads;\n      var shouldChunkUpload = canChunkUpload && file.size > options.chunkSize;\n      var willChunkUpload =\n        canChunkUpload && (shouldChunkUpload || options.chunkForce);\n      if (file instanceof Blob && willChunkUpload)\n        return processFileChunked(\n          apiUrl,\n          action,\n          name,\n          file,\n          metadata,\n          load,\n          error,\n          progress,\n          abort,\n          transfer,\n          options\n        );\n\n      // set handlers\n      var ondata =\n        action.ondata ||\n        function(fd) {\n          return fd;\n        };\n      var onload =\n        action.onload ||\n        function(res) {\n          return res;\n        };\n      var onerror =\n        action.onerror ||\n        function(res) {\n          return null;\n        };\n\n      // create formdata object\n      var formData = new FormData();\n\n      // add metadata under same name\n      if (isObject(metadata)) {\n        formData.append(name, JSON.stringify(metadata));\n      }\n\n      // Turn into an array of objects so no matter what the input, we can handle it the same way\n      (file instanceof Blob ? [{ name: null, file: file }] : file).forEach(\n        function(item) {\n          formData.append(\n            name,\n            item.file,\n            item.name === null\n              ? item.file.name\n              : '' + item.name + item.file.name\n          );\n        }\n      );\n\n      // send request object\n      var request = sendRequest(\n        ondata(formData),\n        buildURL(apiUrl, action.url),\n        action\n      );\n      request.onload = function(xhr) {\n        load(\n          createResponse(\n            'load',\n            xhr.status,\n            onload(xhr.response),\n            xhr.getAllResponseHeaders()\n          )\n        );\n      };\n\n      request.onerror = function(xhr) {\n        error(\n          createResponse(\n            'error',\n            xhr.status,\n            onerror(xhr.response) || xhr.statusText,\n            xhr.getAllResponseHeaders()\n          )\n        );\n      };\n\n      request.ontimeout = createTimeoutResponse(error);\n      request.onprogress = progress;\n      request.onabort = abort;\n\n      // should return request\n      return request;\n    };\n  };\n\n  var createProcessorFunction = function createProcessorFunction() {\n    var apiUrl =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var action = arguments.length > 1 ? arguments[1] : undefined;\n    var name = arguments.length > 2 ? arguments[2] : undefined;\n    var options = arguments.length > 3 ? arguments[3] : undefined;\n\n    // custom handler (should also handle file, load, error, progress and abort)\n    if (typeof action === 'function')\n      return function() {\n        for (\n          var _len = arguments.length, params = new Array(_len), _key = 0;\n          _key < _len;\n          _key++\n        ) {\n          params[_key] = arguments[_key];\n        }\n        return action.apply(void 0, [name].concat(params, [options]));\n      };\n\n    // no action supplied\n    if (!action || !isString(action.url)) return null;\n\n    // internal handler\n    return createFileProcessorFunction(apiUrl, action, name, options);\n  };\n\n  /*\n                                                      function signature:\n                                                      (uniqueFileId, load, error) => { }\n                                                      */\n  var createRevertFunction = function createRevertFunction() {\n    var apiUrl =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var action = arguments.length > 1 ? arguments[1] : undefined;\n    // is custom implementation\n    if (typeof action === 'function') {\n      return action;\n    }\n\n    // no action supplied, return stub function, interface will work, but file won't be removed\n    if (!action || !isString(action.url)) {\n      return function(uniqueFileId, load) {\n        return load();\n      };\n    }\n\n    // set onload hanlder\n    var onload =\n      action.onload ||\n      function(res) {\n        return res;\n      };\n    var onerror =\n      action.onerror ||\n      function(res) {\n        return null;\n      };\n\n    // internal implementation\n    return function(uniqueFileId, load, error) {\n      var request = sendRequest(\n        uniqueFileId,\n        apiUrl + action.url,\n        action // contains method, headers and withCredentials properties\n      );\n      request.onload = function(xhr) {\n        load(\n          createResponse(\n            'load',\n            xhr.status,\n            onload(xhr.response),\n            xhr.getAllResponseHeaders()\n          )\n        );\n      };\n\n      request.onerror = function(xhr) {\n        error(\n          createResponse(\n            'error',\n            xhr.status,\n            onerror(xhr.response) || xhr.statusText,\n            xhr.getAllResponseHeaders()\n          )\n        );\n      };\n\n      request.ontimeout = createTimeoutResponse(error);\n\n      return request;\n    };\n  };\n\n  var getRandomNumber = function getRandomNumber() {\n    var min =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var max =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    return min + Math.random() * (max - min);\n  };\n\n  var createPerceivedPerformanceUpdater = function createPerceivedPerformanceUpdater(\n    cb\n  ) {\n    var duration =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1000;\n    var offset =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var tickMin =\n      arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 25;\n    var tickMax =\n      arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 250;\n    var timeout = null;\n    var start = Date.now();\n\n    var tick = function tick() {\n      var runtime = Date.now() - start;\n      var delay = getRandomNumber(tickMin, tickMax);\n\n      if (runtime + delay > duration) {\n        delay = runtime + delay - duration;\n      }\n\n      var progress = runtime / duration;\n      if (progress >= 1 || document.hidden) {\n        cb(1);\n        return;\n      }\n\n      cb(progress);\n\n      timeout = setTimeout(tick, delay);\n    };\n\n    tick();\n\n    return {\n      clear: function clear() {\n        clearTimeout(timeout);\n      }\n    };\n  };\n\n  var createFileProcessor = function createFileProcessor(processFn) {\n    var state = {\n      complete: false,\n      perceivedProgress: 0,\n      perceivedPerformanceUpdater: null,\n      progress: null,\n      timestamp: null,\n      perceivedDuration: 0,\n      duration: 0,\n      request: null,\n      response: null\n    };\n\n    var process = function process(file, metadata) {\n      var progressFn = function progressFn() {\n        // we've not yet started the real download, stop here\n        // the request might not go through, for instance, there might be some server trouble\n        // if state.progress is null, the server does not allow computing progress and we show the spinner instead\n        if (state.duration === 0 || state.progress === null) return;\n\n        // as we're now processing, fire the progress event\n        api.fire('progress', api.getProgress());\n      };\n\n      var completeFn = function completeFn() {\n        state.complete = true;\n        api.fire('load-perceived', state.response.body);\n      };\n\n      // let's start processing\n      api.fire('start');\n\n      // set request start\n      state.timestamp = Date.now();\n\n      // create perceived performance progress indicator\n      state.perceivedPerformanceUpdater = createPerceivedPerformanceUpdater(\n        function(progress) {\n          state.perceivedProgress = progress;\n          state.perceivedDuration = Date.now() - state.timestamp;\n\n          progressFn();\n\n          // if fake progress is done, and a response has been received,\n          // and we've not yet called the complete method\n          if (\n            state.response &&\n            state.perceivedProgress === 1 &&\n            !state.complete\n          ) {\n            // we done!\n            completeFn();\n          }\n        },\n        // random delay as in a list of files you start noticing\n        // files uploading at the exact same speed\n        getRandomNumber(750, 1500)\n      );\n\n      // remember request so we can abort it later\n      state.request = processFn(\n        // the file to process\n        file,\n\n        // the metadata to send along\n        metadata,\n\n        // callbacks (load, error, progress, abort, transfer)\n        // load expects the body to be a server id if\n        // you want to make use of revert\n        function(response) {\n          // we put the response in state so we can access\n          // it outside of this method\n          state.response = isObject(response)\n            ? response\n            : {\n                type: 'load',\n                code: 200,\n                body: '' + response,\n                headers: {}\n              };\n\n          // update duration\n          state.duration = Date.now() - state.timestamp;\n\n          // force progress to 1 as we're now done\n          state.progress = 1;\n\n          // actual load is done let's share results\n          api.fire('load', state.response.body);\n\n          // we are really done\n          // if perceived progress is 1 ( wait for perceived progress to complete )\n          // or if server does not support progress ( null )\n          if (state.perceivedProgress === 1) {\n            completeFn();\n          }\n        },\n\n        // error is expected to be an object with type, code, body\n        function(error) {\n          // cancel updater\n          state.perceivedPerformanceUpdater.clear();\n\n          // update others about this error\n          api.fire(\n            'error',\n            isObject(error)\n              ? error\n              : {\n                  type: 'error',\n                  code: 0,\n                  body: '' + error\n                }\n          );\n        },\n\n        // actual processing progress\n        function(computable, current, total) {\n          // update actual duration\n          state.duration = Date.now() - state.timestamp;\n\n          // update actual progress\n          state.progress = computable ? current / total : null;\n\n          progressFn();\n        },\n\n        // abort does not expect a value\n        function() {\n          // stop updater\n          state.perceivedPerformanceUpdater.clear();\n\n          // fire the abort event so we can switch visuals\n          api.fire('abort', state.response ? state.response.body : null);\n        },\n\n        // register the id for this transfer\n        function(transferId) {\n          api.fire('transfer', transferId);\n        }\n      );\n    };\n\n    var abort = function abort() {\n      // no request running, can't abort\n      if (!state.request) return;\n\n      // stop updater\n      state.perceivedPerformanceUpdater.clear();\n\n      // abort actual request\n      if (state.request.abort) state.request.abort();\n\n      // if has response object, we've completed the request\n      state.complete = true;\n    };\n\n    var reset = function reset() {\n      abort();\n      state.complete = false;\n      state.perceivedProgress = 0;\n      state.progress = 0;\n      state.timestamp = null;\n      state.perceivedDuration = 0;\n      state.duration = 0;\n      state.request = null;\n      state.response = null;\n    };\n\n    var getProgress = function getProgress() {\n      return state.progress\n        ? Math.min(state.progress, state.perceivedProgress)\n        : null;\n    };\n    var getDuration = function getDuration() {\n      return Math.min(state.duration, state.perceivedDuration);\n    };\n\n    var api = Object.assign({}, on(), {\n      process: process, // start processing file\n      abort: abort, // abort active process request\n      getProgress: getProgress,\n      getDuration: getDuration,\n      reset: reset\n    });\n\n    return api;\n  };\n\n  var getFilenameWithoutExtension = function getFilenameWithoutExtension(name) {\n    return name.substr(0, name.lastIndexOf('.')) || name;\n  };\n\n  var createFileStub = function createFileStub(source) {\n    var data = [source.name, source.size, source.type];\n\n    // is blob or base64, then we need to set the name\n    if (source instanceof Blob || isBase64DataURI(source)) {\n      data[0] = source.name || getDateString();\n    } else if (isBase64DataURI(source)) {\n      // if is base64 data uri we need to determine the average size and type\n      data[1] = source.length;\n      data[2] = getMimeTypeFromBase64DataURI(source);\n    } else if (isString(source)) {\n      // url\n      data[0] = getFilenameFromURL(source);\n      data[1] = 0;\n      data[2] = 'application/octet-stream';\n    }\n\n    return {\n      name: data[0],\n      size: data[1],\n      type: data[2]\n    };\n  };\n\n  var isFile = function isFile(value) {\n    return !!(value instanceof File || (value instanceof Blob && value.name));\n  };\n\n  var deepCloneObject = function deepCloneObject(src) {\n    if (!isObject(src)) return src;\n    var target = isArray(src) ? [] : {};\n    for (var key in src) {\n      if (!src.hasOwnProperty(key)) continue;\n      var v = src[key];\n      target[key] = v && isObject(v) ? deepCloneObject(v) : v;\n    }\n    return target;\n  };\n\n  var createItem = function createItem() {\n    var origin =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var serverFileReference =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var file =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    // unique id for this item, is used to identify the item across views\n    var id = getUniqueId();\n\n    /**\n     * Internal item state\n     */\n    var state = {\n      // is archived\n      archived: false,\n\n      // if is frozen, no longer fires events\n      frozen: false,\n\n      // removed from view\n      released: false,\n\n      // original source\n      source: null,\n\n      // file model reference\n      file: file,\n\n      // id of file on server\n      serverFileReference: serverFileReference,\n\n      // id of file transfer on server\n      transferId: null,\n\n      // is aborted\n      processingAborted: false,\n\n      // current item status\n      status: serverFileReference\n        ? ItemStatus.PROCESSING_COMPLETE\n        : ItemStatus.INIT,\n\n      // active processes\n      activeLoader: null,\n      activeProcessor: null\n    };\n\n    // callback used when abort processing is called to link back to the resolve method\n    var abortProcessingRequestComplete = null;\n\n    /**\n     * Externally added item metadata\n     */\n    var metadata = {};\n\n    // item data\n    var setStatus = function setStatus(status) {\n      return (state.status = status);\n    };\n\n    // fire event unless the item has been archived\n    var fire = function fire(event) {\n      if (state.released || state.frozen) return;\n      for (\n        var _len = arguments.length,\n          params = new Array(_len > 1 ? _len - 1 : 0),\n          _key = 1;\n        _key < _len;\n        _key++\n      ) {\n        params[_key - 1] = arguments[_key];\n      }\n      api.fire.apply(api, [event].concat(params));\n    };\n\n    // file data\n    var getFileExtension = function getFileExtension() {\n      return getExtensionFromFilename(state.file.name);\n    };\n    var getFileType = function getFileType() {\n      return state.file.type;\n    };\n    var getFileSize = function getFileSize() {\n      return state.file.size;\n    };\n    var getFile = function getFile() {\n      return state.file;\n    };\n\n    //\n    // logic to load a file\n    //\n    var load = function load(source, loader, onload) {\n      // remember the original item source\n      state.source = source;\n\n      // source is known\n      api.fireSync('init');\n\n      // file stub is already there\n      if (state.file) {\n        api.fireSync('load-skip');\n        return;\n      }\n\n      // set a stub file object while loading the actual data\n      state.file = createFileStub(source);\n\n      // starts loading\n      loader.on('init', function() {\n        fire('load-init');\n      });\n\n      // we'eve received a size indication, let's update the stub\n      loader.on('meta', function(meta) {\n        // set size of file stub\n        state.file.size = meta.size;\n\n        // set name of file stub\n        state.file.filename = meta.filename;\n\n        // if has received source, we done\n        if (meta.source) {\n          origin = FileOrigin.LIMBO;\n          state.serverFileReference = meta.source;\n          state.status = ItemStatus.PROCESSING_COMPLETE;\n        }\n\n        // size has been updated\n        fire('load-meta');\n      });\n\n      // the file is now loading we need to update the progress indicators\n      loader.on('progress', function(progress) {\n        setStatus(ItemStatus.LOADING);\n\n        fire('load-progress', progress);\n      });\n\n      // an error was thrown while loading the file, we need to switch to error state\n      loader.on('error', function(error) {\n        setStatus(ItemStatus.LOAD_ERROR);\n\n        fire('load-request-error', error);\n      });\n\n      // user or another process aborted the file load (cannot retry)\n      loader.on('abort', function() {\n        setStatus(ItemStatus.INIT);\n        fire('load-abort');\n      });\n\n      // done loading\n      loader.on('load', function(file) {\n        // as we've now loaded the file the loader is no longer required\n        state.activeLoader = null;\n\n        // called when file has loaded succesfully\n        var success = function success(result) {\n          // set (possibly) transformed file\n          state.file = isFile(result) ? result : state.file;\n\n          // file received\n          if (origin === FileOrigin.LIMBO && state.serverFileReference) {\n            setStatus(ItemStatus.PROCESSING_COMPLETE);\n          } else {\n            setStatus(ItemStatus.IDLE);\n          }\n\n          fire('load');\n        };\n\n        var error = function error(result) {\n          // set original file\n          state.file = file;\n          fire('load-meta');\n\n          setStatus(ItemStatus.LOAD_ERROR);\n          fire('load-file-error', result);\n        };\n\n        // if we already have a server file reference, we don't need to call the onload method\n        if (state.serverFileReference) {\n          success(file);\n          return;\n        }\n\n        // no server id, let's give this file the full treatment\n        onload(file, success, error);\n      });\n\n      // set loader source data\n      loader.setSource(source);\n\n      // set as active loader\n      state.activeLoader = loader;\n\n      // load the source data\n      loader.load();\n    };\n\n    var retryLoad = function retryLoad() {\n      if (!state.activeLoader) {\n        return;\n      }\n      state.activeLoader.load();\n    };\n\n    var abortLoad = function abortLoad() {\n      if (state.activeLoader) {\n        state.activeLoader.abort();\n        return;\n      }\n      setStatus(ItemStatus.INIT);\n      fire('load-abort');\n    };\n\n    //\n    // logic to process a file\n    //\n    var process = function process(processor, onprocess) {\n      // processing was aborted\n      if (state.processingAborted) {\n        state.processingAborted = false;\n        return;\n      }\n\n      // now processing\n      setStatus(ItemStatus.PROCESSING);\n\n      // reset abort callback\n      abortProcessingRequestComplete = null;\n\n      // if no file loaded we'll wait for the load event\n      if (!(state.file instanceof Blob)) {\n        api.on('load', function() {\n          process(processor, onprocess);\n        });\n        return;\n      }\n\n      // setup processor\n      processor.on('load', function(serverFileReference) {\n        // need this id to be able to revert the upload\n        state.transferId = null;\n        state.serverFileReference = serverFileReference;\n      });\n\n      // register transfer id\n      processor.on('transfer', function(transferId) {\n        // need this id to be able to revert the upload\n        state.transferId = transferId;\n      });\n\n      processor.on('load-perceived', function(serverFileReference) {\n        // no longer required\n        state.activeProcessor = null;\n\n        // need this id to be able to rever the upload\n        state.transferId = null;\n        state.serverFileReference = serverFileReference;\n\n        setStatus(ItemStatus.PROCESSING_COMPLETE);\n        fire('process-complete', serverFileReference);\n      });\n\n      processor.on('start', function() {\n        fire('process-start');\n      });\n\n      processor.on('error', function(error) {\n        state.activeProcessor = null;\n        setStatus(ItemStatus.PROCESSING_ERROR);\n        fire('process-error', error);\n      });\n\n      processor.on('abort', function(serverFileReference) {\n        state.activeProcessor = null;\n\n        // if file was uploaded but processing was cancelled during perceived processor time store file reference\n        state.transferId = null;\n        state.serverFileReference = serverFileReference;\n\n        setStatus(ItemStatus.IDLE);\n        fire('process-abort');\n\n        // has timeout so doesn't interfere with remove action\n        if (abortProcessingRequestComplete) {\n          abortProcessingRequestComplete();\n        }\n      });\n\n      processor.on('progress', function(progress) {\n        fire('process-progress', progress);\n      });\n\n      // when successfully transformed\n      var success = function success(file) {\n        // if was archived in the mean time, don't process\n        if (state.archived) return;\n\n        // process file!\n        processor.process(file, Object.assign({}, metadata));\n      };\n\n      // something went wrong during transform phase\n      var error = console.error;\n\n      // start processing the file\n      onprocess(state.file, success, error);\n\n      // set as active processor\n      state.activeProcessor = processor;\n    };\n\n    var requestProcessing = function requestProcessing() {\n      state.processingAborted = false;\n      setStatus(ItemStatus.PROCESSING_QUEUED);\n    };\n\n    var abortProcessing = function abortProcessing() {\n      return new Promise(function(resolve) {\n        if (!state.activeProcessor) {\n          state.processingAborted = true;\n\n          setStatus(ItemStatus.IDLE);\n          fire('process-abort');\n\n          resolve();\n          return;\n        }\n\n        abortProcessingRequestComplete = function abortProcessingRequestComplete() {\n          resolve();\n        };\n\n        state.activeProcessor.abort();\n      });\n    };\n\n    //\n    // logic to revert a processed file\n    //\n    var revert = function revert(revertFileUpload, forceRevert) {\n      return new Promise(function(resolve, reject) {\n        // cannot revert without a server id for this process\n        if (state.serverFileReference === null) {\n          resolve();\n          return;\n        }\n\n        // revert the upload (fire and forget)\n        revertFileUpload(\n          state.serverFileReference,\n          function() {\n            // reset file server id as now it's no available on the server\n            state.serverFileReference = null;\n            resolve();\n          },\n          function(error) {\n            // don't set error state when reverting is optional, it will always resolve\n            if (!forceRevert) {\n              resolve();\n              return;\n            }\n\n            // oh no errors\n            setStatus(ItemStatus.PROCESSING_REVERT_ERROR);\n            fire('process-revert-error');\n            reject(error);\n          }\n        );\n\n        // fire event\n        setStatus(ItemStatus.IDLE);\n        fire('process-revert');\n      });\n    };\n\n    // exposed methods\n    var _setMetadata = function setMetadata(key, value, silent) {\n      var keys = key.split('.');\n      var root = keys[0];\n      var last = keys.pop();\n      var data = metadata;\n      keys.forEach(function(key) {\n        return (data = data[key]);\n      });\n\n      // compare old value against new value, if they're the same, we're not updating\n      if (JSON.stringify(data[last]) === JSON.stringify(value)) return;\n\n      // update value\n      data[last] = value;\n\n      // don't fire update\n      if (silent) return;\n\n      // fire update\n      fire('metadata-update', {\n        key: root,\n        value: metadata[root]\n      });\n    };\n\n    var getMetadata = function getMetadata(key) {\n      return deepCloneObject(key ? metadata[key] : metadata);\n    };\n\n    var api = Object.assign(\n      {\n        id: {\n          get: function get() {\n            return id;\n          }\n        },\n        origin: {\n          get: function get() {\n            return origin;\n          }\n        },\n        serverId: {\n          get: function get() {\n            return state.serverFileReference;\n          }\n        },\n        transferId: {\n          get: function get() {\n            return state.transferId;\n          }\n        },\n        status: {\n          get: function get() {\n            return state.status;\n          }\n        },\n        filename: {\n          get: function get() {\n            return state.file.name;\n          }\n        },\n        filenameWithoutExtension: {\n          get: function get() {\n            return getFilenameWithoutExtension(state.file.name);\n          }\n        },\n        fileExtension: { get: getFileExtension },\n        fileType: { get: getFileType },\n        fileSize: { get: getFileSize },\n        file: { get: getFile },\n        relativePath: {\n          get: function get() {\n            return state.file._relativePath;\n          }\n        },\n\n        source: {\n          get: function get() {\n            return state.source;\n          }\n        },\n\n        getMetadata: getMetadata,\n        setMetadata: function setMetadata(key, value, silent) {\n          if (isObject(key)) {\n            var data = key;\n            Object.keys(data).forEach(function(key) {\n              _setMetadata(key, data[key], value);\n            });\n            return key;\n          }\n          _setMetadata(key, value, silent);\n          return value;\n        },\n\n        extend: function extend(name, handler) {\n          return (itemAPI[name] = handler);\n        },\n\n        abortLoad: abortLoad,\n        retryLoad: retryLoad,\n        requestProcessing: requestProcessing,\n        abortProcessing: abortProcessing,\n\n        load: load,\n        process: process,\n        revert: revert\n      },\n\n      on(),\n      {\n        freeze: function freeze() {\n          return (state.frozen = true);\n        },\n\n        release: function release() {\n          return (state.released = true);\n        },\n        released: {\n          get: function get() {\n            return state.released;\n          }\n        },\n\n        archive: function archive() {\n          return (state.archived = true);\n        },\n        archived: {\n          get: function get() {\n            return state.archived;\n          }\n        }\n      }\n    );\n\n    // create it here instead of returning it instantly so we can extend it later\n    var itemAPI = createObject(api);\n\n    return itemAPI;\n  };\n\n  var getItemIndexByQuery = function getItemIndexByQuery(items, query) {\n    // just return first index\n    if (isEmpty(query)) {\n      return 0;\n    }\n\n    // invalid queries\n    if (!isString(query)) {\n      return -1;\n    }\n\n    // return item by id (or -1 if not found)\n    return items.findIndex(function(item) {\n      return item.id === query;\n    });\n  };\n\n  var getItemById = function getItemById(items, itemId) {\n    var index = getItemIndexByQuery(items, itemId);\n    if (index < 0) {\n      return;\n    }\n    return items[index] || null;\n  };\n\n  var fetchBlob = function fetchBlob(\n    url,\n    load,\n    error,\n    progress,\n    abort,\n    headers\n  ) {\n    var request = sendRequest(null, url, {\n      method: 'GET',\n      responseType: 'blob'\n    });\n\n    request.onload = function(xhr) {\n      // get headers\n      var headers = xhr.getAllResponseHeaders();\n\n      // get filename\n      var filename =\n        getFileInfoFromHeaders(headers).name || getFilenameFromURL(url);\n\n      // create response\n      load(\n        createResponse(\n          'load',\n          xhr.status,\n          getFileFromBlob(xhr.response, filename),\n          headers\n        )\n      );\n    };\n\n    request.onerror = function(xhr) {\n      error(\n        createResponse(\n          'error',\n          xhr.status,\n          xhr.statusText,\n          xhr.getAllResponseHeaders()\n        )\n      );\n    };\n\n    request.onheaders = function(xhr) {\n      headers(\n        createResponse('headers', xhr.status, null, xhr.getAllResponseHeaders())\n      );\n    };\n\n    request.ontimeout = createTimeoutResponse(error);\n    request.onprogress = progress;\n    request.onabort = abort;\n\n    // should return request\n    return request;\n  };\n\n  var getDomainFromURL = function getDomainFromURL(url) {\n    if (url.indexOf('//') === 0) {\n      url = location.protocol + url;\n    }\n    return url\n      .toLowerCase()\n      .replace('blob:', '')\n      .replace(/([a-z])?:\\/\\//, '$1')\n      .split('/')[0];\n  };\n\n  var isExternalURL = function isExternalURL(url) {\n    return (\n      (url.indexOf(':') > -1 || url.indexOf('//') > -1) &&\n      getDomainFromURL(location.href) !== getDomainFromURL(url)\n    );\n  };\n\n  var dynamicLabel = function dynamicLabel(label) {\n    return function() {\n      return isFunction(label) ? label.apply(void 0, arguments) : label;\n    };\n  };\n\n  var isMockItem = function isMockItem(item) {\n    return !isFile(item.file);\n  };\n\n  var listUpdated = function listUpdated(dispatch, state) {\n    clearTimeout(state.listUpdateTimeout);\n    state.listUpdateTimeout = setTimeout(function() {\n      dispatch('DID_UPDATE_ITEMS', { items: getActiveItems(state.items) });\n    }, 0);\n  };\n\n  var optionalPromise = function optionalPromise(fn) {\n    for (\n      var _len = arguments.length,\n        params = new Array(_len > 1 ? _len - 1 : 0),\n        _key = 1;\n      _key < _len;\n      _key++\n    ) {\n      params[_key - 1] = arguments[_key];\n    }\n    return new Promise(function(resolve) {\n      if (!fn) {\n        return resolve(true);\n      }\n\n      var result = fn.apply(void 0, params);\n\n      if (result == null) {\n        return resolve(true);\n      }\n\n      if (typeof result === 'boolean') {\n        return resolve(result);\n      }\n\n      if (typeof result.then === 'function') {\n        result.then(resolve);\n      }\n    });\n  };\n\n  var sortItems = function sortItems(state, compare) {\n    state.items.sort(function(a, b) {\n      return compare(createItemAPI(a), createItemAPI(b));\n    });\n  };\n\n  // returns item based on state\n  var getItemByQueryFromState = function getItemByQueryFromState(\n    state,\n    itemHandler\n  ) {\n    return function() {\n      var _ref =\n        arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var query = _ref.query,\n        _ref$success = _ref.success,\n        success = _ref$success === void 0 ? function() {} : _ref$success,\n        _ref$failure = _ref.failure,\n        failure = _ref$failure === void 0 ? function() {} : _ref$failure,\n        options = _objectWithoutProperties(_ref, [\n          'query',\n          'success',\n          'failure'\n        ]);\n      var item = getItemByQuery(state.items, query);\n      if (!item) {\n        failure({\n          error: createResponse('error', 0, 'Item not found'),\n\n          file: null\n        });\n\n        return;\n      }\n      itemHandler(item, success, failure, options || {});\n    };\n  };\n\n  var actions = function actions(dispatch, query, state) {\n    return {\n      /**\n       * Aborts all ongoing processes\n       */\n      ABORT_ALL: function ABORT_ALL() {\n        getActiveItems(state.items).forEach(function(item) {\n          item.freeze();\n          item.abortLoad();\n          item.abortProcessing();\n        });\n      },\n\n      /**\n       * Sets initial files\n       */\n      DID_SET_FILES: function DID_SET_FILES(_ref2) {\n        var _ref2$value = _ref2.value,\n          value = _ref2$value === void 0 ? [] : _ref2$value;\n\n        // map values to file objects\n        var files = value.map(function(file) {\n          return {\n            source: file.source ? file.source : file,\n            options: file.options\n          };\n        });\n\n        // loop over files, if file is in list, leave it be, if not, remove\n        // test if items should be moved\n        var activeItems = getActiveItems(state.items);\n\n        activeItems.forEach(function(item) {\n          // if item not is in new value, remove\n          if (\n            !files.find(function(file) {\n              return file.source === item.source || file.source === item.file;\n            })\n          ) {\n            dispatch('REMOVE_ITEM', { query: item, remove: false });\n          }\n        });\n\n        // add new files\n        activeItems = getActiveItems(state.items);\n        files.forEach(function(file, index) {\n          // if file is already in list\n          if (\n            activeItems.find(function(item) {\n              return item.source === file.source || item.file === file.source;\n            })\n          )\n            return;\n\n          // not in list, add\n          dispatch(\n            'ADD_ITEM',\n            Object.assign({}, file, {\n              interactionMethod: InteractionMethod.NONE,\n              index: index\n            })\n          );\n        });\n      },\n\n      DID_UPDATE_ITEM_METADATA: function DID_UPDATE_ITEM_METADATA(_ref3) {\n        var id = _ref3.id;\n\n        // if is called multiple times in close succession we combined all calls together to save resources\n        clearTimeout(state.itemUpdateTimeout);\n        state.itemUpdateTimeout = setTimeout(function() {\n          var item = getItemById(state.items, id);\n\n          // only revert and attempt to upload when we're uploading to a server\n          if (!query('IS_ASYNC')) {\n            // should we update the output data\n            applyFilterChain('SHOULD_PREPARE_OUTPUT', false, {\n              item: item,\n              query: query\n            }).then(function(shouldPrepareOutput) {\n              if (!shouldPrepareOutput) {\n                return;\n              }\n              dispatch(\n                'REQUEST_PREPARE_OUTPUT',\n                {\n                  query: id,\n                  item: item,\n                  success: function success(file) {\n                    dispatch('DID_PREPARE_OUTPUT', { id: id, file: file });\n                  }\n                },\n                true\n              );\n            });\n\n            return;\n          }\n\n          // for async scenarios\n          var upload = function upload() {\n            // we push this forward a bit so the interface is updated correctly\n            setTimeout(function() {\n              dispatch('REQUEST_ITEM_PROCESSING', { query: id });\n            }, 32);\n          };\n\n          var revert = function revert(doUpload) {\n            item\n              .revert(\n                createRevertFunction(\n                  state.options.server.url,\n                  state.options.server.revert\n                ),\n                query('GET_FORCE_REVERT')\n              )\n              .then(doUpload ? upload : function() {})\n              .catch(function() {});\n          };\n\n          var abort = function abort(doUpload) {\n            item.abortProcessing().then(doUpload ? upload : function() {});\n          };\n\n          // if we should re-upload the file immidiately\n          if (item.status === ItemStatus.PROCESSING_COMPLETE) {\n            return revert(state.options.instantUpload);\n          }\n\n          // if currently uploading, cancel upload\n          if (item.status === ItemStatus.PROCESSING) {\n            return abort(state.options.instantUpload);\n          }\n\n          if (state.options.instantUpload) {\n            upload();\n          }\n        }, 0);\n      },\n\n      MOVE_ITEM: function MOVE_ITEM(_ref4) {\n        var query = _ref4.query,\n          index = _ref4.index;\n        var item = getItemByQuery(state.items, query);\n        if (!item) return;\n        var currentIndex = state.items.indexOf(item);\n        index = limit(index, 0, state.items.length - 1);\n        if (currentIndex === index) return;\n        state.items.splice(index, 0, state.items.splice(currentIndex, 1)[0]);\n      },\n\n      SORT: function SORT(_ref5) {\n        var compare = _ref5.compare;\n        sortItems(state, compare);\n        dispatch('DID_SORT_ITEMS', {\n          items: query('GET_ACTIVE_ITEMS')\n        });\n      },\n\n      ADD_ITEMS: function ADD_ITEMS(_ref6) {\n        var items = _ref6.items,\n          index = _ref6.index,\n          interactionMethod = _ref6.interactionMethod,\n          _ref6$success = _ref6.success,\n          success = _ref6$success === void 0 ? function() {} : _ref6$success,\n          _ref6$failure = _ref6.failure,\n          failure = _ref6$failure === void 0 ? function() {} : _ref6$failure;\n\n        var currentIndex = index;\n\n        if (index === -1 || typeof index === 'undefined') {\n          var insertLocation = query('GET_ITEM_INSERT_LOCATION');\n          var totalItems = query('GET_TOTAL_ITEMS');\n          currentIndex = insertLocation === 'before' ? 0 : totalItems;\n        }\n\n        var ignoredFiles = query('GET_IGNORED_FILES');\n        var isValidFile = function isValidFile(source) {\n          return isFile(source)\n            ? !ignoredFiles.includes(source.name.toLowerCase())\n            : !isEmpty(source);\n        };\n        var validItems = items.filter(isValidFile);\n\n        var promises = validItems.map(function(source) {\n          return new Promise(function(resolve, reject) {\n            dispatch('ADD_ITEM', {\n              interactionMethod: interactionMethod,\n              source: source.source || source,\n              success: resolve,\n              failure: reject,\n              index: currentIndex++,\n              options: source.options || {}\n            });\n          });\n        });\n\n        Promise.all(promises)\n          .then(success)\n          .catch(failure);\n      },\n\n      /**\n       * @param source\n       * @param index\n       * @param interactionMethod\n       */\n      ADD_ITEM: function ADD_ITEM(_ref7) {\n        var source = _ref7.source,\n          _ref7$index = _ref7.index,\n          index = _ref7$index === void 0 ? -1 : _ref7$index,\n          interactionMethod = _ref7.interactionMethod,\n          _ref7$success = _ref7.success,\n          success = _ref7$success === void 0 ? function() {} : _ref7$success,\n          _ref7$failure = _ref7.failure,\n          failure = _ref7$failure === void 0 ? function() {} : _ref7$failure,\n          _ref7$options = _ref7.options,\n          options = _ref7$options === void 0 ? {} : _ref7$options;\n\n        // if no source supplied\n        if (isEmpty(source)) {\n          failure({\n            error: createResponse('error', 0, 'No source'),\n\n            file: null\n          });\n\n          return;\n        }\n\n        // filter out invalid file items, used to filter dropped directory contents\n        if (\n          isFile(source) &&\n          state.options.ignoredFiles.includes(source.name.toLowerCase())\n        ) {\n          // fail silently\n          return;\n        }\n\n        // test if there's still room in the list of files\n        if (!hasRoomForItem(state)) {\n          // if multiple allowed, we can't replace\n          // or if only a single item is allowed but we're not allowed to replace it we exit\n          if (\n            state.options.allowMultiple ||\n            (!state.options.allowMultiple && !state.options.allowReplace)\n          ) {\n            var error = createResponse('warning', 0, 'Max files');\n\n            dispatch('DID_THROW_MAX_FILES', {\n              source: source,\n              error: error\n            });\n\n            failure({ error: error, file: null });\n\n            return;\n          }\n\n          // let's replace the item\n          // id of first item we're about to remove\n          var _item = getActiveItems(state.items)[0];\n\n          // if has been processed remove it from the server as well\n          if (\n            _item.status === ItemStatus.PROCESSING_COMPLETE ||\n            _item.status === ItemStatus.PROCESSING_REVERT_ERROR\n          ) {\n            var forceRevert = query('GET_FORCE_REVERT');\n            _item\n              .revert(\n                createRevertFunction(\n                  state.options.server.url,\n                  state.options.server.revert\n                ),\n                forceRevert\n              )\n              .then(function() {\n                if (!forceRevert) return;\n\n                // try to add now\n                dispatch('ADD_ITEM', {\n                  source: source,\n                  index: index,\n                  interactionMethod: interactionMethod,\n                  success: success,\n                  failure: failure,\n                  options: options\n                });\n              })\n              .catch(function() {}); // no need to handle this catch state for now\n\n            if (forceRevert) return;\n          }\n\n          // remove first item as it will be replaced by this item\n          dispatch('REMOVE_ITEM', { query: _item.id });\n        }\n\n        // where did the file originate\n        var origin =\n          options.type === 'local'\n            ? FileOrigin.LOCAL\n            : options.type === 'limbo'\n            ? FileOrigin.LIMBO\n            : FileOrigin.INPUT;\n\n        // create a new blank item\n        var item = createItem(\n          // where did this file come from\n          origin,\n\n          // an input file never has a server file reference\n          origin === FileOrigin.INPUT ? null : source,\n\n          // file mock data, if defined\n          options.file\n        );\n\n        // set initial meta data\n        Object.keys(options.metadata || {}).forEach(function(key) {\n          item.setMetadata(key, options.metadata[key]);\n        });\n\n        // created the item, let plugins add methods\n        applyFilters('DID_CREATE_ITEM', item, {\n          query: query,\n          dispatch: dispatch\n        });\n\n        // where to insert new items\n        var itemInsertLocation = query('GET_ITEM_INSERT_LOCATION');\n\n        // adjust index if is not allowed to pick location\n        if (!state.options.itemInsertLocationFreedom) {\n          index = itemInsertLocation === 'before' ? -1 : state.items.length;\n        }\n\n        // add item to list\n        insertItem(state.items, item, index);\n\n        // sort items in list\n        if (isFunction(itemInsertLocation) && source) {\n          sortItems(state, itemInsertLocation);\n        }\n\n        // get a quick reference to the item id\n        var id = item.id;\n\n        // observe item events\n        item.on('init', function() {\n          dispatch('DID_INIT_ITEM', { id: id });\n        });\n\n        item.on('load-init', function() {\n          dispatch('DID_START_ITEM_LOAD', { id: id });\n        });\n\n        item.on('load-meta', function() {\n          dispatch('DID_UPDATE_ITEM_META', { id: id });\n        });\n\n        item.on('load-progress', function(progress) {\n          dispatch('DID_UPDATE_ITEM_LOAD_PROGRESS', {\n            id: id,\n            progress: progress\n          });\n        });\n\n        item.on('load-request-error', function(error) {\n          var mainStatus = dynamicLabel(state.options.labelFileLoadError)(\n            error\n          );\n\n          // is client error, no way to recover\n          if (error.code >= 400 && error.code < 500) {\n            dispatch('DID_THROW_ITEM_INVALID', {\n              id: id,\n              error: error,\n              status: {\n                main: mainStatus,\n                sub: error.code + ' (' + error.body + ')'\n              }\n            });\n\n            // reject the file so can be dealt with through API\n            failure({ error: error, file: createItemAPI(item) });\n            return;\n          }\n\n          // is possible server error, so might be possible to retry\n          dispatch('DID_THROW_ITEM_LOAD_ERROR', {\n            id: id,\n            error: error,\n            status: {\n              main: mainStatus,\n              sub: state.options.labelTapToRetry\n            }\n          });\n        });\n\n        item.on('load-file-error', function(error) {\n          dispatch('DID_THROW_ITEM_INVALID', {\n            id: id,\n            error: error.status,\n            status: error.status\n          });\n\n          failure({ error: error.status, file: createItemAPI(item) });\n        });\n\n        item.on('load-abort', function() {\n          dispatch('REMOVE_ITEM', { query: id });\n        });\n\n        item.on('load-skip', function() {\n          dispatch('COMPLETE_LOAD_ITEM', {\n            query: id,\n            item: item,\n            data: {\n              source: source,\n              success: success\n            }\n          });\n        });\n\n        item.on('load', function() {\n          var handleAdd = function handleAdd(shouldAdd) {\n            // no should not add this file\n            if (!shouldAdd) {\n              dispatch('REMOVE_ITEM', {\n                query: id\n              });\n\n              return;\n            }\n\n            // now interested in metadata updates\n            item.on('metadata-update', function(change) {\n              dispatch('DID_UPDATE_ITEM_METADATA', { id: id, change: change });\n            });\n\n            // let plugins decide if the output data should be prepared at this point\n            // means we'll do this and wait for idle state\n            applyFilterChain('SHOULD_PREPARE_OUTPUT', false, {\n              item: item,\n              query: query\n            }).then(function(shouldPrepareOutput) {\n              var loadComplete = function loadComplete() {\n                dispatch('COMPLETE_LOAD_ITEM', {\n                  query: id,\n                  item: item,\n                  data: {\n                    source: source,\n                    success: success\n                  }\n                });\n\n                listUpdated(dispatch, state);\n              };\n\n              // exit\n              if (shouldPrepareOutput) {\n                // wait for idle state and then run PREPARE_OUTPUT\n                dispatch(\n                  'REQUEST_PREPARE_OUTPUT',\n                  {\n                    query: id,\n                    item: item,\n                    success: function success(file) {\n                      dispatch('DID_PREPARE_OUTPUT', { id: id, file: file });\n                      loadComplete();\n                    }\n                  },\n                  true\n                );\n\n                return;\n              }\n\n              loadComplete();\n            });\n          };\n\n          // item loaded, allow plugins to\n          // - read data (quickly)\n          // - add metadata\n          applyFilterChain('DID_LOAD_ITEM', item, {\n            query: query,\n            dispatch: dispatch\n          })\n            .then(function() {\n              optionalPromise(\n                query('GET_BEFORE_ADD_FILE'),\n                createItemAPI(item)\n              ).then(handleAdd);\n            })\n            .catch(function() {\n              handleAdd(false);\n            });\n        });\n\n        item.on('process-start', function() {\n          dispatch('DID_START_ITEM_PROCESSING', { id: id });\n        });\n\n        item.on('process-progress', function(progress) {\n          dispatch('DID_UPDATE_ITEM_PROCESS_PROGRESS', {\n            id: id,\n            progress: progress\n          });\n        });\n\n        item.on('process-error', function(error) {\n          dispatch('DID_THROW_ITEM_PROCESSING_ERROR', {\n            id: id,\n            error: error,\n            status: {\n              main: dynamicLabel(state.options.labelFileProcessingError)(error),\n              sub: state.options.labelTapToRetry\n            }\n          });\n        });\n\n        item.on('process-revert-error', function(error) {\n          dispatch('DID_THROW_ITEM_PROCESSING_REVERT_ERROR', {\n            id: id,\n            error: error,\n            status: {\n              main: dynamicLabel(state.options.labelFileProcessingRevertError)(\n                error\n              ),\n              sub: state.options.labelTapToRetry\n            }\n          });\n        });\n\n        item.on('process-complete', function(serverFileReference) {\n          dispatch('DID_COMPLETE_ITEM_PROCESSING', {\n            id: id,\n            error: null,\n            serverFileReference: serverFileReference\n          });\n\n          dispatch('DID_DEFINE_VALUE', { id: id, value: serverFileReference });\n        });\n\n        item.on('process-abort', function() {\n          dispatch('DID_ABORT_ITEM_PROCESSING', { id: id });\n        });\n\n        item.on('process-revert', function() {\n          dispatch('DID_REVERT_ITEM_PROCESSING', { id: id });\n          dispatch('DID_DEFINE_VALUE', { id: id, value: null });\n        });\n\n        // let view know the item has been inserted\n        dispatch('DID_ADD_ITEM', {\n          id: id,\n          index: index,\n          interactionMethod: interactionMethod\n        });\n\n        listUpdated(dispatch, state);\n\n        // start loading the source\n        var _ref8 = state.options.server || {},\n          url = _ref8.url,\n          load = _ref8.load,\n          restore = _ref8.restore,\n          fetch = _ref8.fetch;\n\n        item.load(\n          source,\n\n          // this creates a function that loads the file based on the type of file (string, base64, blob, file) and location of file (local, remote, limbo)\n          createFileLoader(\n            origin === FileOrigin.INPUT\n              ? // input, if is remote, see if should use custom fetch, else use default fetchBlob\n                isString(source) && isExternalURL(source)\n                ? fetch\n                  ? createFetchFunction(url, fetch)\n                  : fetchBlob // remote url\n                : fetchBlob // try to fetch url\n              : // limbo or local\n              origin === FileOrigin.LIMBO\n              ? createFetchFunction(url, restore) // limbo\n              : createFetchFunction(url, load) // local\n          ),\n\n          // called when the file is loaded so it can be piped through the filters\n          function(file, success, error) {\n            // let's process the file\n            applyFilterChain('LOAD_FILE', file, { query: query })\n              .then(success)\n              .catch(error);\n          }\n        );\n      },\n\n      REQUEST_PREPARE_OUTPUT: function REQUEST_PREPARE_OUTPUT(_ref9) {\n        var item = _ref9.item,\n          success = _ref9.success,\n          _ref9$failure = _ref9.failure,\n          failure = _ref9$failure === void 0 ? function() {} : _ref9$failure;\n\n        // error response if item archived\n        var err = {\n          error: createResponse('error', 0, 'Item not found'),\n\n          file: null\n        };\n\n        // don't handle archived items, an item could have been archived (load aborted) while waiting to be prepared\n        if (item.archived) return failure(err);\n\n        // allow plugins to alter the file data\n        applyFilterChain('PREPARE_OUTPUT', item.file, {\n          query: query,\n          item: item\n        }).then(function(result) {\n          applyFilterChain('COMPLETE_PREPARE_OUTPUT', result, {\n            query: query,\n            item: item\n          }).then(function(result) {\n            // don't handle archived items, an item could have been archived (load aborted) while being prepared\n            if (item.archived) return failure(err);\n\n            // we done!\n            success(result);\n          });\n        });\n      },\n\n      COMPLETE_LOAD_ITEM: function COMPLETE_LOAD_ITEM(_ref10) {\n        var item = _ref10.item,\n          data = _ref10.data;\n        var success = data.success,\n          source = data.source;\n\n        // sort items in list\n        var itemInsertLocation = query('GET_ITEM_INSERT_LOCATION');\n        if (isFunction(itemInsertLocation) && source) {\n          sortItems(state, itemInsertLocation);\n        }\n\n        // let interface know the item has loaded\n        dispatch('DID_LOAD_ITEM', {\n          id: item.id,\n          error: null,\n          serverFileReference: item.origin === FileOrigin.INPUT ? null : source\n        });\n\n        // item has been successfully loaded and added to the\n        // list of items so can now be safely returned for use\n        success(createItemAPI(item));\n\n        // if this is a local server file we need to show a different state\n        if (item.origin === FileOrigin.LOCAL) {\n          dispatch('DID_LOAD_LOCAL_ITEM', { id: item.id });\n          return;\n        }\n\n        // if is a temp server file we prevent async upload call here (as the file is already on the server)\n        if (item.origin === FileOrigin.LIMBO) {\n          dispatch('DID_COMPLETE_ITEM_PROCESSING', {\n            id: item.id,\n            error: null,\n            serverFileReference: source\n          });\n\n          dispatch('DID_DEFINE_VALUE', {\n            id: item.id,\n            value: source\n          });\n\n          return;\n        }\n\n        // id we are allowed to upload the file immidiately, lets do it\n        if (query('IS_ASYNC') && state.options.instantUpload) {\n          dispatch('REQUEST_ITEM_PROCESSING', { query: item.id });\n        }\n      },\n\n      RETRY_ITEM_LOAD: getItemByQueryFromState(state, function(item) {\n        // try loading the source one more time\n        item.retryLoad();\n      }),\n\n      REQUEST_ITEM_PREPARE: getItemByQueryFromState(state, function(\n        item,\n        _success,\n        failure\n      ) {\n        dispatch(\n          'REQUEST_PREPARE_OUTPUT',\n          {\n            query: item.id,\n            item: item,\n            success: function success(file) {\n              dispatch('DID_PREPARE_OUTPUT', { id: item.id, file: file });\n              _success({\n                file: item,\n                output: file\n              });\n            },\n            failure: failure\n          },\n          true\n        );\n      }),\n\n      REQUEST_ITEM_PROCESSING: getItemByQueryFromState(state, function(\n        item,\n        success,\n        failure\n      ) {\n        // cannot be queued (or is already queued)\n        var itemCanBeQueuedForProcessing =\n          // waiting for something\n          item.status === ItemStatus.IDLE ||\n          // processing went wrong earlier\n          item.status === ItemStatus.PROCESSING_ERROR;\n\n        // not ready to be processed\n        if (!itemCanBeQueuedForProcessing) {\n          var processNow = function processNow() {\n            return dispatch('REQUEST_ITEM_PROCESSING', {\n              query: item,\n              success: success,\n              failure: failure\n            });\n          };\n\n          var process = function process() {\n            return document.hidden ? processNow() : setTimeout(processNow, 32);\n          };\n\n          // if already done processing or tried to revert but didn't work, try again\n          if (\n            item.status === ItemStatus.PROCESSING_COMPLETE ||\n            item.status === ItemStatus.PROCESSING_REVERT_ERROR\n          ) {\n            item\n              .revert(\n                createRevertFunction(\n                  state.options.server.url,\n                  state.options.server.revert\n                ),\n                query('GET_FORCE_REVERT')\n              )\n              .then(process)\n              .catch(function() {}); // don't continue with processing if something went wrong\n          } else if (item.status === ItemStatus.PROCESSING) {\n            item.abortProcessing().then(process);\n          }\n\n          return;\n        }\n\n        // already queued for processing\n        if (item.status === ItemStatus.PROCESSING_QUEUED) return;\n\n        item.requestProcessing();\n\n        dispatch('DID_REQUEST_ITEM_PROCESSING', { id: item.id });\n\n        dispatch(\n          'PROCESS_ITEM',\n          { query: item, success: success, failure: failure },\n          true\n        );\n      }),\n\n      PROCESS_ITEM: getItemByQueryFromState(state, function(\n        item,\n        success,\n        failure\n      ) {\n        var maxParallelUploads = query('GET_MAX_PARALLEL_UPLOADS');\n        var totalCurrentUploads = query(\n          'GET_ITEMS_BY_STATUS',\n          ItemStatus.PROCESSING\n        ).length;\n\n        // queue and wait till queue is freed up\n        if (totalCurrentUploads === maxParallelUploads) {\n          // queue for later processing\n          state.processingQueue.push({\n            id: item.id,\n            success: success,\n            failure: failure\n          });\n\n          // stop it!\n          return;\n        }\n\n        // if was not queued or is already processing exit here\n        if (item.status === ItemStatus.PROCESSING) return;\n\n        var processNext = function processNext() {\n          // process queueud items\n          var queueEntry = state.processingQueue.shift();\n\n          // no items left\n          if (!queueEntry) return;\n\n          // get item reference\n          var id = queueEntry.id,\n            success = queueEntry.success,\n            failure = queueEntry.failure;\n          var itemReference = getItemByQuery(state.items, id);\n\n          // if item was archived while in queue, jump to next\n          if (!itemReference || itemReference.archived) {\n            processNext();\n            return;\n          }\n\n          // process queued item\n          dispatch(\n            'PROCESS_ITEM',\n            { query: id, success: success, failure: failure },\n            true\n          );\n        };\n\n        // we done function\n        item.onOnce('process-complete', function() {\n          success(createItemAPI(item));\n          processNext();\n\n          // All items processed? No errors?\n          var allItemsProcessed =\n            query('GET_ITEMS_BY_STATUS', ItemStatus.PROCESSING_COMPLETE)\n              .length === state.items.length;\n          if (allItemsProcessed) {\n            dispatch('DID_COMPLETE_ITEM_PROCESSING_ALL');\n          }\n        });\n\n        // we error function\n        item.onOnce('process-error', function(error) {\n          failure({ error: error, file: createItemAPI(item) });\n          processNext();\n        });\n\n        // start file processing\n        var options = state.options;\n        item.process(\n          createFileProcessor(\n            createProcessorFunction(\n              options.server.url,\n              options.server.process,\n              options.name,\n              {\n                chunkTransferId: item.transferId,\n                chunkServer: options.server.patch,\n                chunkUploads: options.chunkUploads,\n                chunkForce: options.chunkForce,\n                chunkSize: options.chunkSize,\n                chunkRetryDelays: options.chunkRetryDelays\n              }\n            )\n          ),\n\n          // called when the file is about to be processed so it can be piped through the transform filters\n          function(file, success, error) {\n            // allow plugins to alter the file data\n            applyFilterChain('PREPARE_OUTPUT', file, {\n              query: query,\n              item: item\n            })\n              .then(function(file) {\n                dispatch('DID_PREPARE_OUTPUT', { id: item.id, file: file });\n\n                success(file);\n              })\n              .catch(error);\n          }\n        );\n      }),\n\n      RETRY_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n        dispatch('REQUEST_ITEM_PROCESSING', { query: item });\n      }),\n\n      REQUEST_REMOVE_ITEM: getItemByQueryFromState(state, function(item) {\n        optionalPromise(\n          query('GET_BEFORE_REMOVE_FILE'),\n          createItemAPI(item)\n        ).then(function(shouldRemove) {\n          if (!shouldRemove) {\n            return;\n          }\n          dispatch('REMOVE_ITEM', { query: item });\n        });\n      }),\n\n      RELEASE_ITEM: getItemByQueryFromState(state, function(item) {\n        item.release();\n      }),\n\n      REMOVE_ITEM: getItemByQueryFromState(state, function(\n        item,\n        success,\n        failure,\n        options\n      ) {\n        var removeFromView = function removeFromView() {\n          // get id reference\n          var id = item.id;\n\n          // archive the item, this does not remove it from the list\n          getItemById(state.items, id).archive();\n\n          // tell the view the item has been removed\n          dispatch('DID_REMOVE_ITEM', { error: null, id: id, item: item });\n\n          // now the list has been modified\n          listUpdated(dispatch, state);\n\n          // correctly removed\n          success(createItemAPI(item));\n        };\n\n        // if this is a local file and the server.remove function has been configured, send source there so dev can remove file from server\n        var server = state.options.server;\n        if (\n          item.origin === FileOrigin.LOCAL &&\n          server &&\n          isFunction(server.remove) &&\n          options.remove !== false\n        ) {\n          dispatch('DID_START_ITEM_REMOVE', { id: item.id });\n\n          server.remove(\n            item.source,\n            function() {\n              return removeFromView();\n            },\n            function(status) {\n              dispatch('DID_THROW_ITEM_REMOVE_ERROR', {\n                id: item.id,\n                error: createResponse('error', 0, status, null),\n                status: {\n                  main: dynamicLabel(state.options.labelFileRemoveError)(\n                    status\n                  ),\n                  sub: state.options.labelTapToRetry\n                }\n              });\n            }\n          );\n        } else {\n          // if is requesting revert and can revert need to call revert handler (not calling request_ because that would also trigger beforeRemoveHook)\n          if (\n            options.revert &&\n            item.origin !== FileOrigin.LOCAL &&\n            item.serverId !== null\n          ) {\n            item.revert(\n              createRevertFunction(\n                state.options.server.url,\n                state.options.server.revert\n              ),\n              query('GET_FORCE_REVERT')\n            );\n          }\n\n          // can now safely remove from view\n          removeFromView();\n        }\n      }),\n\n      ABORT_ITEM_LOAD: getItemByQueryFromState(state, function(item) {\n        item.abortLoad();\n      }),\n\n      ABORT_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n        // test if is already processed\n        if (item.serverId) {\n          dispatch('REVERT_ITEM_PROCESSING', { id: item.id });\n          return;\n        }\n\n        // abort\n        item.abortProcessing().then(function() {\n          var shouldRemove = state.options.instantUpload;\n          if (shouldRemove) {\n            dispatch('REMOVE_ITEM', { query: item.id });\n          }\n        });\n      }),\n\n      REQUEST_REVERT_ITEM_PROCESSING: getItemByQueryFromState(state, function(\n        item\n      ) {\n        // not instant uploading, revert immidiately\n        if (!state.options.instantUpload) {\n          dispatch('REVERT_ITEM_PROCESSING', { query: item });\n          return;\n        }\n\n        // if we're instant uploading the file will also be removed if we revert,\n        // so if a before remove file hook is defined we need to run it now\n        var handleRevert = function handleRevert(shouldRevert) {\n          if (!shouldRevert) return;\n          dispatch('REVERT_ITEM_PROCESSING', { query: item });\n        };\n\n        var fn = query('GET_BEFORE_REMOVE_FILE');\n        if (!fn) {\n          return handleRevert(true);\n        }\n\n        var requestRemoveResult = fn(createItemAPI(item));\n        if (requestRemoveResult == null) {\n          // undefined or null\n          return handleRevert(true);\n        }\n\n        if (typeof requestRemoveResult === 'boolean') {\n          return handleRevert(requestRemoveResult);\n        }\n\n        if (typeof requestRemoveResult.then === 'function') {\n          requestRemoveResult.then(handleRevert);\n        }\n      }),\n\n      REVERT_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n        item\n          .revert(\n            createRevertFunction(\n              state.options.server.url,\n              state.options.server.revert\n            ),\n            query('GET_FORCE_REVERT')\n          )\n          .then(function() {\n            var shouldRemove = state.options.instantUpload || isMockItem(item);\n            if (shouldRemove) {\n              dispatch('REMOVE_ITEM', { query: item.id });\n            }\n          })\n          .catch(function() {});\n      }),\n\n      SET_OPTIONS: function SET_OPTIONS(_ref11) {\n        var options = _ref11.options;\n        forin(options, function(key, value) {\n          dispatch('SET_' + fromCamels(key, '_').toUpperCase(), {\n            value: value\n          });\n        });\n      }\n    };\n  };\n\n  var formatFilename = function formatFilename(name) {\n    return name;\n  };\n\n  var createElement$1 = function createElement(tagName) {\n    return document.createElement(tagName);\n  };\n\n  var text = function text(node, value) {\n    var textNode = node.childNodes[0];\n    if (!textNode) {\n      textNode = document.createTextNode(value);\n      node.appendChild(textNode);\n    } else if (value !== textNode.nodeValue) {\n      textNode.nodeValue = value;\n    }\n  };\n\n  var polarToCartesian = function polarToCartesian(\n    centerX,\n    centerY,\n    radius,\n    angleInDegrees\n  ) {\n    var angleInRadians = (((angleInDegrees % 360) - 90) * Math.PI) / 180.0;\n    return {\n      x: centerX + radius * Math.cos(angleInRadians),\n      y: centerY + radius * Math.sin(angleInRadians)\n    };\n  };\n\n  var describeArc = function describeArc(\n    x,\n    y,\n    radius,\n    startAngle,\n    endAngle,\n    arcSweep\n  ) {\n    var start = polarToCartesian(x, y, radius, endAngle);\n    var end = polarToCartesian(x, y, radius, startAngle);\n    return [\n      'M',\n      start.x,\n      start.y,\n      'A',\n      radius,\n      radius,\n      0,\n      arcSweep,\n      0,\n      end.x,\n      end.y\n    ].join(' ');\n  };\n\n  var percentageArc = function percentageArc(x, y, radius, from, to) {\n    var arcSweep = 1;\n    if (to > from && to - from <= 0.5) {\n      arcSweep = 0;\n    }\n    if (from > to && from - to >= 0.5) {\n      arcSweep = 0;\n    }\n    return describeArc(\n      x,\n      y,\n      radius,\n      Math.min(0.9999, from) * 360,\n      Math.min(0.9999, to) * 360,\n      arcSweep\n    );\n  };\n\n  var create = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n    // start at 0\n    props.spin = false;\n    props.progress = 0;\n    props.opacity = 0;\n\n    // svg\n    var svg = createElement('svg');\n    root.ref.path = createElement('path', {\n      'stroke-width': 2,\n      'stroke-linecap': 'round'\n    });\n\n    svg.appendChild(root.ref.path);\n\n    root.ref.svg = svg;\n\n    root.appendChild(svg);\n  };\n\n  var write = function write(_ref2) {\n    var root = _ref2.root,\n      props = _ref2.props;\n\n    if (props.opacity === 0) {\n      return;\n    }\n\n    if (props.align) {\n      root.element.dataset.align = props.align;\n    }\n\n    // get width of stroke\n    var ringStrokeWidth = parseInt(attr(root.ref.path, 'stroke-width'), 10);\n\n    // calculate size of ring\n    var size = root.rect.element.width * 0.5;\n\n    // ring state\n    var ringFrom = 0;\n    var ringTo = 0;\n\n    // now in busy mode\n    if (props.spin) {\n      ringFrom = 0;\n      ringTo = 0.5;\n    } else {\n      ringFrom = 0;\n      ringTo = props.progress;\n    }\n\n    // get arc path\n    var coordinates = percentageArc(\n      size,\n      size,\n      size - ringStrokeWidth,\n      ringFrom,\n      ringTo\n    );\n\n    // update progress bar\n    attr(root.ref.path, 'd', coordinates);\n\n    // hide while contains 0 value\n    attr(\n      root.ref.path,\n      'stroke-opacity',\n      props.spin || props.progress > 0 ? 1 : 0\n    );\n  };\n\n  var progressIndicator = createView({\n    tag: 'div',\n    name: 'progress-indicator',\n    ignoreRectUpdate: true,\n    ignoreRect: true,\n    create: create,\n    write: write,\n    mixins: {\n      apis: ['progress', 'spin', 'align'],\n      styles: ['opacity'],\n      animations: {\n        opacity: { type: 'tween', duration: 500 },\n        progress: {\n          type: 'spring',\n          stiffness: 0.95,\n          damping: 0.65,\n          mass: 10\n        }\n      }\n    }\n  });\n\n  var create$1 = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n    root.element.innerHTML =\n      (props.icon || '') + ('<span>' + props.label + '</span>');\n\n    props.isDisabled = false;\n  };\n\n  var write$1 = function write(_ref2) {\n    var root = _ref2.root,\n      props = _ref2.props;\n    var isDisabled = props.isDisabled;\n    var shouldDisable = root.query('GET_DISABLED') || props.opacity === 0;\n\n    if (shouldDisable && !isDisabled) {\n      props.isDisabled = true;\n      attr(root.element, 'disabled', 'disabled');\n    } else if (!shouldDisable && isDisabled) {\n      props.isDisabled = false;\n      root.element.removeAttribute('disabled');\n    }\n  };\n\n  var fileActionButton = createView({\n    tag: 'button',\n    attributes: {\n      type: 'button'\n    },\n\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    name: 'file-action-button',\n    mixins: {\n      apis: ['label'],\n      styles: ['translateX', 'translateY', 'scaleX', 'scaleY', 'opacity'],\n      animations: {\n        scaleX: 'spring',\n        scaleY: 'spring',\n        translateX: 'spring',\n        translateY: 'spring',\n        opacity: { type: 'tween', duration: 250 }\n      },\n\n      listeners: true\n    },\n\n    create: create$1,\n    write: write$1\n  });\n\n  var toNaturalFileSize = function toNaturalFileSize(bytes) {\n    var decimalSeparator =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '.';\n    // nope, no negative byte sizes\n    bytes = Math.round(Math.abs(bytes));\n\n    // just bytes\n    if (bytes < 1000) {\n      return bytes + ' bytes';\n    }\n\n    // kilobytes\n    if (bytes < MB) {\n      return Math.floor(bytes / KB) + ' KB';\n    }\n\n    // megabytes\n    if (bytes < GB) {\n      return removeDecimalsWhenZero(bytes / MB, 1, decimalSeparator) + ' MB';\n    }\n\n    // gigabytes\n    return removeDecimalsWhenZero(bytes / GB, 2, decimalSeparator) + ' GB';\n  };\n\n  var KB = 1000;\n  var MB = 1000000;\n  var GB = 1000000000;\n\n  var removeDecimalsWhenZero = function removeDecimalsWhenZero(\n    value,\n    decimalCount,\n    separator\n  ) {\n    return value\n      .toFixed(decimalCount)\n      .split('.')\n      .filter(function(part) {\n        return part !== '0';\n      })\n      .join(separator);\n  };\n\n  var create$2 = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n    // filename\n    var fileName = createElement$1('span');\n    fileName.className = 'filepond--file-info-main';\n    // hide for screenreaders\n    // the file is contained in a fieldset with legend that contains the filename\n    // no need to read it twice\n    attr(fileName, 'aria-hidden', 'true');\n    root.appendChild(fileName);\n    root.ref.fileName = fileName;\n\n    // filesize\n    var fileSize = createElement$1('span');\n    fileSize.className = 'filepond--file-info-sub';\n    root.appendChild(fileSize);\n    root.ref.fileSize = fileSize;\n\n    // set initial values\n    text(fileSize, root.query('GET_LABEL_FILE_WAITING_FOR_SIZE'));\n    text(fileName, formatFilename(root.query('GET_ITEM_NAME', props.id)));\n  };\n\n  var updateFile = function updateFile(_ref2) {\n    var root = _ref2.root,\n      props = _ref2.props;\n    text(\n      root.ref.fileSize,\n      toNaturalFileSize(root.query('GET_ITEM_SIZE', props.id))\n    );\n\n    text(\n      root.ref.fileName,\n      formatFilename(root.query('GET_ITEM_NAME', props.id))\n    );\n  };\n\n  var updateFileSizeOnError = function updateFileSizeOnError(_ref3) {\n    var root = _ref3.root,\n      props = _ref3.props;\n    // if size is available don't fallback to unknown size message\n    if (isInt(root.query('GET_ITEM_SIZE', props.id))) {\n      return;\n    }\n\n    text(root.ref.fileSize, root.query('GET_LABEL_FILE_SIZE_NOT_AVAILABLE'));\n  };\n\n  var fileInfo = createView({\n    name: 'file-info',\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    write: createRoute({\n      DID_LOAD_ITEM: updateFile,\n      DID_UPDATE_ITEM_META: updateFile,\n      DID_THROW_ITEM_LOAD_ERROR: updateFileSizeOnError,\n      DID_THROW_ITEM_INVALID: updateFileSizeOnError\n    }),\n\n    didCreateView: function didCreateView(root) {\n      applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n    },\n    create: create$2,\n    mixins: {\n      styles: ['translateX', 'translateY'],\n      animations: {\n        translateX: 'spring',\n        translateY: 'spring'\n      }\n    }\n  });\n\n  var toPercentage = function toPercentage(value) {\n    return Math.round(value * 100);\n  };\n\n  var create$3 = function create(_ref) {\n    var root = _ref.root;\n\n    // main status\n    var main = createElement$1('span');\n    main.className = 'filepond--file-status-main';\n    root.appendChild(main);\n    root.ref.main = main;\n\n    // sub status\n    var sub = createElement$1('span');\n    sub.className = 'filepond--file-status-sub';\n    root.appendChild(sub);\n    root.ref.sub = sub;\n\n    didSetItemLoadProgress({ root: root, action: { progress: null } });\n  };\n\n  var didSetItemLoadProgress = function didSetItemLoadProgress(_ref2) {\n    var root = _ref2.root,\n      action = _ref2.action;\n    var title =\n      action.progress === null\n        ? root.query('GET_LABEL_FILE_LOADING')\n        : root.query('GET_LABEL_FILE_LOADING') +\n          ' ' +\n          toPercentage(action.progress) +\n          '%';\n\n    text(root.ref.main, title);\n    text(root.ref.sub, root.query('GET_LABEL_TAP_TO_CANCEL'));\n  };\n\n  var didSetItemProcessProgress = function didSetItemProcessProgress(_ref3) {\n    var root = _ref3.root,\n      action = _ref3.action;\n    var title =\n      action.progress === null\n        ? root.query('GET_LABEL_FILE_PROCESSING')\n        : root.query('GET_LABEL_FILE_PROCESSING') +\n          ' ' +\n          toPercentage(action.progress) +\n          '%';\n\n    text(root.ref.main, title);\n    text(root.ref.sub, root.query('GET_LABEL_TAP_TO_CANCEL'));\n  };\n\n  var didRequestItemProcessing = function didRequestItemProcessing(_ref4) {\n    var root = _ref4.root;\n    text(root.ref.main, root.query('GET_LABEL_FILE_PROCESSING'));\n    text(root.ref.sub, root.query('GET_LABEL_TAP_TO_CANCEL'));\n  };\n\n  var didAbortItemProcessing = function didAbortItemProcessing(_ref5) {\n    var root = _ref5.root;\n    text(root.ref.main, root.query('GET_LABEL_FILE_PROCESSING_ABORTED'));\n    text(root.ref.sub, root.query('GET_LABEL_TAP_TO_RETRY'));\n  };\n\n  var didCompleteItemProcessing = function didCompleteItemProcessing(_ref6) {\n    var root = _ref6.root;\n    text(root.ref.main, root.query('GET_LABEL_FILE_PROCESSING_COMPLETE'));\n    text(root.ref.sub, root.query('GET_LABEL_TAP_TO_UNDO'));\n  };\n\n  var clear = function clear(_ref7) {\n    var root = _ref7.root;\n    text(root.ref.main, '');\n    text(root.ref.sub, '');\n  };\n\n  var error = function error(_ref8) {\n    var root = _ref8.root,\n      action = _ref8.action;\n    text(root.ref.main, action.status.main);\n    text(root.ref.sub, action.status.sub);\n  };\n\n  var fileStatus = createView({\n    name: 'file-status',\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    write: createRoute({\n      DID_LOAD_ITEM: clear,\n      DID_REVERT_ITEM_PROCESSING: clear,\n      DID_REQUEST_ITEM_PROCESSING: didRequestItemProcessing,\n      DID_ABORT_ITEM_PROCESSING: didAbortItemProcessing,\n      DID_COMPLETE_ITEM_PROCESSING: didCompleteItemProcessing,\n      DID_UPDATE_ITEM_PROCESS_PROGRESS: didSetItemProcessProgress,\n      DID_UPDATE_ITEM_LOAD_PROGRESS: didSetItemLoadProgress,\n      DID_THROW_ITEM_LOAD_ERROR: error,\n      DID_THROW_ITEM_INVALID: error,\n      DID_THROW_ITEM_PROCESSING_ERROR: error,\n      DID_THROW_ITEM_PROCESSING_REVERT_ERROR: error,\n      DID_THROW_ITEM_REMOVE_ERROR: error\n    }),\n\n    didCreateView: function didCreateView(root) {\n      applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n    },\n    create: create$3,\n    mixins: {\n      styles: ['translateX', 'translateY', 'opacity'],\n      animations: {\n        opacity: { type: 'tween', duration: 250 },\n        translateX: 'spring',\n        translateY: 'spring'\n      }\n    }\n  });\n\n  /**\n   * Button definitions for the file view\n   */\n\n  var Buttons = {\n    AbortItemLoad: {\n      label: 'GET_LABEL_BUTTON_ABORT_ITEM_LOAD',\n      action: 'ABORT_ITEM_LOAD',\n      className: 'filepond--action-abort-item-load',\n      align: 'LOAD_INDICATOR_POSITION' // right\n    },\n    RetryItemLoad: {\n      label: 'GET_LABEL_BUTTON_RETRY_ITEM_LOAD',\n      action: 'RETRY_ITEM_LOAD',\n      icon: 'GET_ICON_RETRY',\n      className: 'filepond--action-retry-item-load',\n      align: 'BUTTON_PROCESS_ITEM_POSITION' // right\n    },\n    RemoveItem: {\n      label: 'GET_LABEL_BUTTON_REMOVE_ITEM',\n      action: 'REQUEST_REMOVE_ITEM',\n      icon: 'GET_ICON_REMOVE',\n      className: 'filepond--action-remove-item',\n      align: 'BUTTON_REMOVE_ITEM_POSITION' // left\n    },\n    ProcessItem: {\n      label: 'GET_LABEL_BUTTON_PROCESS_ITEM',\n      action: 'REQUEST_ITEM_PROCESSING',\n      icon: 'GET_ICON_PROCESS',\n      className: 'filepond--action-process-item',\n      align: 'BUTTON_PROCESS_ITEM_POSITION' // right\n    },\n    AbortItemProcessing: {\n      label: 'GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING',\n      action: 'ABORT_ITEM_PROCESSING',\n      className: 'filepond--action-abort-item-processing',\n      align: 'BUTTON_PROCESS_ITEM_POSITION' // right\n    },\n    RetryItemProcessing: {\n      label: 'GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING',\n      action: 'RETRY_ITEM_PROCESSING',\n      icon: 'GET_ICON_RETRY',\n      className: 'filepond--action-retry-item-processing',\n      align: 'BUTTON_PROCESS_ITEM_POSITION' // right\n    },\n    RevertItemProcessing: {\n      label: 'GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING',\n      action: 'REQUEST_REVERT_ITEM_PROCESSING',\n      icon: 'GET_ICON_UNDO',\n      className: 'filepond--action-revert-item-processing',\n      align: 'BUTTON_PROCESS_ITEM_POSITION' // right\n    }\n  };\n\n  // make a list of buttons, we can then remove buttons from this list if they're disabled\n  var ButtonKeys = [];\n  forin(Buttons, function(key) {\n    ButtonKeys.push(key);\n  });\n\n  var calculateFileInfoOffset = function calculateFileInfoOffset(root) {\n    var buttonRect = root.ref.buttonRemoveItem.rect.element;\n    return buttonRect.hidden ? null : buttonRect.width + buttonRect.left;\n  };\n\n  var calculateButtonWidth = function calculateButtonWidth(root) {\n    var buttonRect = root.ref.buttonAbortItemLoad.rect.element;\n    return buttonRect.width;\n  };\n\n  // Force on full pixels so text stays crips\n  var calculateFileVerticalCenterOffset = function calculateFileVerticalCenterOffset(\n    root\n  ) {\n    return Math.floor(root.ref.buttonRemoveItem.rect.element.height / 4);\n  };\n  var calculateFileHorizontalCenterOffset = function calculateFileHorizontalCenterOffset(\n    root\n  ) {\n    return Math.floor(root.ref.buttonRemoveItem.rect.element.left / 2);\n  };\n\n  var getLoadIndicatorAlignment = function getLoadIndicatorAlignment(root) {\n    return root.query('GET_STYLE_LOAD_INDICATOR_POSITION');\n  };\n  var getProcessIndicatorAlignment = function getProcessIndicatorAlignment(\n    root\n  ) {\n    return root.query('GET_STYLE_PROGRESS_INDICATOR_POSITION');\n  };\n  var getRemoveIndicatorAligment = function getRemoveIndicatorAligment(root) {\n    return root.query('GET_STYLE_BUTTON_REMOVE_ITEM_POSITION');\n  };\n\n  var DefaultStyle = {\n    buttonAbortItemLoad: { opacity: 0 },\n    buttonRetryItemLoad: { opacity: 0 },\n    buttonRemoveItem: { opacity: 0 },\n    buttonProcessItem: { opacity: 0 },\n    buttonAbortItemProcessing: { opacity: 0 },\n    buttonRetryItemProcessing: { opacity: 0 },\n    buttonRevertItemProcessing: { opacity: 0 },\n    loadProgressIndicator: { opacity: 0, align: getLoadIndicatorAlignment },\n    processProgressIndicator: {\n      opacity: 0,\n      align: getProcessIndicatorAlignment\n    },\n    processingCompleteIndicator: { opacity: 0, scaleX: 0.75, scaleY: 0.75 },\n    info: { translateX: 0, translateY: 0, opacity: 0 },\n    status: { translateX: 0, translateY: 0, opacity: 0 }\n  };\n\n  var IdleStyle = {\n    buttonRemoveItem: { opacity: 1 },\n    buttonProcessItem: { opacity: 1 },\n    info: { translateX: calculateFileInfoOffset },\n    status: { translateX: calculateFileInfoOffset }\n  };\n\n  var ProcessingStyle = {\n    buttonAbortItemProcessing: { opacity: 1 },\n    processProgressIndicator: { opacity: 1 },\n    status: { opacity: 1 }\n  };\n\n  var StyleMap = {\n    DID_THROW_ITEM_INVALID: {\n      buttonRemoveItem: { opacity: 1 },\n      info: { translateX: calculateFileInfoOffset },\n      status: { translateX: calculateFileInfoOffset, opacity: 1 }\n    },\n\n    DID_START_ITEM_LOAD: {\n      buttonAbortItemLoad: { opacity: 1 },\n      loadProgressIndicator: { opacity: 1 },\n      status: { opacity: 1 }\n    },\n\n    DID_THROW_ITEM_LOAD_ERROR: {\n      buttonRetryItemLoad: { opacity: 1 },\n      buttonRemoveItem: { opacity: 1 },\n      info: { translateX: calculateFileInfoOffset },\n      status: { opacity: 1 }\n    },\n\n    DID_START_ITEM_REMOVE: {\n      processProgressIndicator: {\n        opacity: 1,\n        align: getRemoveIndicatorAligment\n      },\n      info: { translateX: calculateFileInfoOffset },\n      status: { opacity: 0 }\n    },\n\n    DID_THROW_ITEM_REMOVE_ERROR: {\n      processProgressIndicator: {\n        opacity: 0,\n        align: getRemoveIndicatorAligment\n      },\n      buttonRemoveItem: { opacity: 1 },\n      info: { translateX: calculateFileInfoOffset },\n      status: { opacity: 1, translateX: calculateFileInfoOffset }\n    },\n\n    DID_LOAD_ITEM: IdleStyle,\n    DID_LOAD_LOCAL_ITEM: {\n      buttonRemoveItem: { opacity: 1 },\n      info: { translateX: calculateFileInfoOffset },\n      status: { translateX: calculateFileInfoOffset }\n    },\n\n    DID_START_ITEM_PROCESSING: ProcessingStyle,\n    DID_REQUEST_ITEM_PROCESSING: ProcessingStyle,\n    DID_UPDATE_ITEM_PROCESS_PROGRESS: ProcessingStyle,\n    DID_COMPLETE_ITEM_PROCESSING: {\n      buttonRevertItemProcessing: { opacity: 1 },\n      info: { opacity: 1 },\n      status: { opacity: 1 }\n    },\n\n    DID_THROW_ITEM_PROCESSING_ERROR: {\n      buttonRemoveItem: { opacity: 1 },\n      buttonRetryItemProcessing: { opacity: 1 },\n      status: { opacity: 1 },\n      info: { translateX: calculateFileInfoOffset }\n    },\n\n    DID_THROW_ITEM_PROCESSING_REVERT_ERROR: {\n      buttonRevertItemProcessing: { opacity: 1 },\n      status: { opacity: 1 },\n      info: { opacity: 1 }\n    },\n\n    DID_ABORT_ITEM_PROCESSING: {\n      buttonRemoveItem: { opacity: 1 },\n      buttonProcessItem: { opacity: 1 },\n      info: { translateX: calculateFileInfoOffset },\n      status: { opacity: 1 }\n    },\n\n    DID_REVERT_ITEM_PROCESSING: IdleStyle\n  };\n\n  // complete indicator view\n  var processingCompleteIndicatorView = createView({\n    create: function create(_ref) {\n      var root = _ref.root;\n      root.element.innerHTML = root.query('GET_ICON_DONE');\n    },\n    name: 'processing-complete-indicator',\n    ignoreRect: true,\n    mixins: {\n      styles: ['scaleX', 'scaleY', 'opacity'],\n      animations: {\n        scaleX: 'spring',\n        scaleY: 'spring',\n        opacity: { type: 'tween', duration: 250 }\n      }\n    }\n  });\n\n  /**\n   * Creates the file view\n   */\n  var create$4 = function create(_ref2) {\n    var root = _ref2.root,\n      props = _ref2.props;\n    var id = props.id;\n\n    // allow reverting upload\n    var allowRevert = root.query('GET_ALLOW_REVERT');\n\n    // allow processing upload\n    var allowProcess = root.query('GET_ALLOW_PROCESS');\n\n    // is instant uploading, need this to determine the icon of the undo button\n    var instantUpload = root.query('GET_INSTANT_UPLOAD');\n\n    // is async set up\n    var isAsync = root.query('IS_ASYNC');\n\n    // should align remove item buttons\n    var alignRemoveItemButton = root.query(\n      'GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN'\n    );\n\n    // enabled buttons array\n    var buttonFilter;\n    if (isAsync) {\n      if (allowProcess && !allowRevert) {\n        // only remove revert button\n        buttonFilter = function buttonFilter(key) {\n          return !/RevertItemProcessing/.test(key);\n        };\n      } else if (!allowProcess && allowRevert) {\n        // only remove process button\n        buttonFilter = function buttonFilter(key) {\n          return !/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(\n            key\n          );\n        };\n      } else if (!allowProcess && !allowRevert) {\n        // remove all process buttons\n        buttonFilter = function buttonFilter(key) {\n          return !/Process/.test(key);\n        };\n      }\n    } else {\n      // no process controls available\n      buttonFilter = function buttonFilter(key) {\n        return !/Process/.test(key);\n      };\n    }\n\n    var enabledButtons = buttonFilter\n      ? ButtonKeys.filter(buttonFilter)\n      : ButtonKeys.concat();\n\n    // update icon and label for revert button when instant uploading\n    if (instantUpload && allowRevert) {\n      Buttons['RevertItemProcessing'].label = 'GET_LABEL_BUTTON_REMOVE_ITEM';\n      Buttons['RevertItemProcessing'].icon = 'GET_ICON_REMOVE';\n    }\n\n    // remove last button (revert) if not allowed\n    if (isAsync && !allowRevert) {\n      var map = StyleMap['DID_COMPLETE_ITEM_PROCESSING'];\n      map.info.translateX = calculateFileHorizontalCenterOffset;\n      map.info.translateY = calculateFileVerticalCenterOffset;\n      map.status.translateY = calculateFileVerticalCenterOffset;\n      map.processingCompleteIndicator = { opacity: 1, scaleX: 1, scaleY: 1 };\n    }\n\n    // should align center\n    if (isAsync && !allowProcess) {\n      [\n        'DID_START_ITEM_PROCESSING',\n        'DID_REQUEST_ITEM_PROCESSING',\n        'DID_UPDATE_ITEM_PROCESS_PROGRESS',\n        'DID_THROW_ITEM_PROCESSING_ERROR'\n      ].forEach(function(key) {\n        StyleMap[key].status.translateY = calculateFileVerticalCenterOffset;\n      });\n      StyleMap[\n        'DID_THROW_ITEM_PROCESSING_ERROR'\n      ].status.translateX = calculateButtonWidth;\n    }\n\n    // move remove button to right\n    if (alignRemoveItemButton && allowRevert) {\n      Buttons['RevertItemProcessing'].align = 'BUTTON_REMOVE_ITEM_POSITION';\n      var _map = StyleMap['DID_COMPLETE_ITEM_PROCESSING'];\n      _map.info.translateX = calculateFileInfoOffset;\n      _map.status.translateY = calculateFileVerticalCenterOffset;\n      _map.processingCompleteIndicator = { opacity: 1, scaleX: 1, scaleY: 1 };\n    }\n\n    // create the button views\n    forin(Buttons, function(key, definition) {\n      // create button\n      var buttonView = root.createChildView(fileActionButton, {\n        label: root.query(definition.label),\n        icon: root.query(definition.icon),\n        opacity: 0\n      });\n\n      // should be appended?\n      if (enabledButtons.includes(key)) {\n        root.appendChildView(buttonView);\n      }\n\n      // add position attribute\n      buttonView.element.dataset.align = root.query(\n        'GET_STYLE_' + definition.align\n      );\n\n      // add class\n      buttonView.element.classList.add(definition.className);\n\n      // handle interactions\n      buttonView.on('click', function(e) {\n        e.stopPropagation();\n        root.dispatch(definition.action, { query: id });\n      });\n\n      // set reference\n      root.ref['button' + key] = buttonView;\n    });\n\n    // checkmark\n    root.ref.processingCompleteIndicator = root.appendChildView(\n      root.createChildView(processingCompleteIndicatorView)\n    );\n    root.ref.processingCompleteIndicator.element.dataset.align = root.query(\n      'GET_STYLE_BUTTON_PROCESS_ITEM_POSITION'\n    );\n\n    // create file info view\n    root.ref.info = root.appendChildView(\n      root.createChildView(fileInfo, { id: id })\n    );\n\n    // create file status view\n    root.ref.status = root.appendChildView(\n      root.createChildView(fileStatus, { id: id })\n    );\n\n    // add progress indicators\n    var loadIndicatorView = root.appendChildView(\n      root.createChildView(progressIndicator, {\n        opacity: 0,\n        align: root.query('GET_STYLE_LOAD_INDICATOR_POSITION')\n      })\n    );\n\n    loadIndicatorView.element.classList.add('filepond--load-indicator');\n    root.ref.loadProgressIndicator = loadIndicatorView;\n\n    var progressIndicatorView = root.appendChildView(\n      root.createChildView(progressIndicator, {\n        opacity: 0,\n        align: root.query('GET_STYLE_PROGRESS_INDICATOR_POSITION')\n      })\n    );\n\n    progressIndicatorView.element.classList.add('filepond--process-indicator');\n    root.ref.processProgressIndicator = progressIndicatorView;\n\n    // current active styles\n    root.ref.activeStyles = [];\n  };\n\n  var write$2 = function write(_ref3) {\n    var root = _ref3.root,\n      actions = _ref3.actions,\n      props = _ref3.props;\n\n    // route actions\n    route({ root: root, actions: actions, props: props });\n\n    // select last state change action\n    var action = actions\n      .concat()\n      .filter(function(action) {\n        return /^DID_/.test(action.type);\n      })\n      .reverse()\n      .find(function(action) {\n        return StyleMap[action.type];\n      });\n\n    // a new action happened, let's get the matching styles\n    if (action) {\n      // define new active styles\n      root.ref.activeStyles = [];\n\n      var stylesToApply = StyleMap[action.type];\n      forin(DefaultStyle, function(name, defaultStyles) {\n        // get reference to control\n        var control = root.ref[name];\n\n        // loop over all styles for this control\n        forin(defaultStyles, function(key, defaultValue) {\n          var value =\n            stylesToApply[name] &&\n            typeof stylesToApply[name][key] !== 'undefined'\n              ? stylesToApply[name][key]\n              : defaultValue;\n          root.ref.activeStyles.push({\n            control: control,\n            key: key,\n            value: value\n          });\n        });\n      });\n    }\n\n    // apply active styles to element\n    root.ref.activeStyles.forEach(function(_ref4) {\n      var control = _ref4.control,\n        key = _ref4.key,\n        value = _ref4.value;\n      control[key] = typeof value === 'function' ? value(root) : value;\n    });\n  };\n\n  var route = createRoute({\n    DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING: function DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING(\n      _ref5\n    ) {\n      var root = _ref5.root,\n        action = _ref5.action;\n      root.ref.buttonAbortItemProcessing.label = action.value;\n    },\n    DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD: function DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD(\n      _ref6\n    ) {\n      var root = _ref6.root,\n        action = _ref6.action;\n      root.ref.buttonAbortItemLoad.label = action.value;\n    },\n    DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL: function DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL(\n      _ref7\n    ) {\n      var root = _ref7.root,\n        action = _ref7.action;\n      root.ref.buttonAbortItemRemoval.label = action.value;\n    },\n    DID_REQUEST_ITEM_PROCESSING: function DID_REQUEST_ITEM_PROCESSING(_ref8) {\n      var root = _ref8.root;\n      root.ref.processProgressIndicator.spin = true;\n      root.ref.processProgressIndicator.progress = 0;\n    },\n    DID_START_ITEM_LOAD: function DID_START_ITEM_LOAD(_ref9) {\n      var root = _ref9.root;\n      root.ref.loadProgressIndicator.spin = true;\n      root.ref.loadProgressIndicator.progress = 0;\n    },\n    DID_START_ITEM_REMOVE: function DID_START_ITEM_REMOVE(_ref10) {\n      var root = _ref10.root;\n      root.ref.processProgressIndicator.spin = true;\n      root.ref.processProgressIndicator.progress = 0;\n    },\n    DID_UPDATE_ITEM_LOAD_PROGRESS: function DID_UPDATE_ITEM_LOAD_PROGRESS(\n      _ref11\n    ) {\n      var root = _ref11.root,\n        action = _ref11.action;\n      root.ref.loadProgressIndicator.spin = false;\n      root.ref.loadProgressIndicator.progress = action.progress;\n    },\n    DID_UPDATE_ITEM_PROCESS_PROGRESS: function DID_UPDATE_ITEM_PROCESS_PROGRESS(\n      _ref12\n    ) {\n      var root = _ref12.root,\n        action = _ref12.action;\n      root.ref.processProgressIndicator.spin = false;\n      root.ref.processProgressIndicator.progress = action.progress;\n    }\n  });\n\n  var file = createView({\n    create: create$4,\n    write: write$2,\n    didCreateView: function didCreateView(root) {\n      applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n    },\n    name: 'file'\n  });\n\n  /**\n   * Creates the file view\n   */\n  var create$5 = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n\n    // filename\n    root.ref.fileName = createElement$1('legend');\n    root.appendChild(root.ref.fileName);\n\n    // file appended\n    root.ref.file = root.appendChildView(\n      root.createChildView(file, { id: props.id })\n    );\n\n    // data has moved to data.js\n    root.ref.data = false;\n  };\n\n  /**\n   * Data storage\n   */\n  var didLoadItem = function didLoadItem(_ref2) {\n    var root = _ref2.root,\n      props = _ref2.props;\n    // updates the legend of the fieldset so screenreaders can better group buttons\n    text(\n      root.ref.fileName,\n      formatFilename(root.query('GET_ITEM_NAME', props.id))\n    );\n  };\n\n  var fileWrapper = createView({\n    create: create$5,\n    ignoreRect: true,\n    write: createRoute({\n      DID_LOAD_ITEM: didLoadItem\n    }),\n\n    didCreateView: function didCreateView(root) {\n      applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n    },\n    tag: 'fieldset',\n    name: 'file-wrapper'\n  });\n\n  var PANEL_SPRING_PROPS = { type: 'spring', damping: 0.6, mass: 7 };\n\n  var create$6 = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n    [\n      {\n        name: 'top'\n      },\n\n      {\n        name: 'center',\n        props: {\n          translateY: null,\n          scaleY: null\n        },\n\n        mixins: {\n          animations: {\n            scaleY: PANEL_SPRING_PROPS\n          },\n\n          styles: ['translateY', 'scaleY']\n        }\n      },\n\n      {\n        name: 'bottom',\n        props: {\n          translateY: null\n        },\n\n        mixins: {\n          animations: {\n            translateY: PANEL_SPRING_PROPS\n          },\n\n          styles: ['translateY']\n        }\n      }\n    ].forEach(function(section) {\n      createSection(root, section, props.name);\n    });\n\n    root.element.classList.add('filepond--' + props.name);\n\n    root.ref.scalable = null;\n  };\n\n  var createSection = function createSection(root, section, className) {\n    var viewConstructor = createView({\n      name: 'panel-' + section.name + ' filepond--' + className,\n      mixins: section.mixins,\n      ignoreRectUpdate: true\n    });\n\n    var view = root.createChildView(viewConstructor, section.props);\n\n    root.ref[section.name] = root.appendChildView(view);\n  };\n\n  var write$3 = function write(_ref2) {\n    var root = _ref2.root,\n      props = _ref2.props;\n\n    // update scalable state\n    if (root.ref.scalable === null || props.scalable !== root.ref.scalable) {\n      root.ref.scalable = isBoolean(props.scalable) ? props.scalable : true;\n      root.element.dataset.scalable = root.ref.scalable;\n    }\n\n    // no height, can't set\n    if (!props.height) return;\n\n    // get child rects\n    var topRect = root.ref.top.rect.element;\n    var bottomRect = root.ref.bottom.rect.element;\n\n    // make sure height never is smaller than bottom and top seciton heights combined (will probably never happen, but who knows)\n    var height = Math.max(topRect.height + bottomRect.height, props.height);\n\n    // offset center part\n    root.ref.center.translateY = topRect.height;\n\n    // scale center part\n    // use math ceil to prevent transparent lines because of rounding errors\n    root.ref.center.scaleY =\n      (height - topRect.height - bottomRect.height) / 100;\n\n    // offset bottom part\n    root.ref.bottom.translateY = height - bottomRect.height;\n  };\n\n  var panel = createView({\n    name: 'panel',\n    write: write$3,\n    create: create$6,\n    ignoreRect: true,\n    mixins: {\n      apis: ['height', 'scalable']\n    }\n  });\n\n  var createDragHelper = function createDragHelper(items) {\n    var itemIds = items.map(function(item) {\n      return item.id;\n    });\n    var prevIndex = undefined;\n    return {\n      setIndex: function setIndex(index) {\n        prevIndex = index;\n      },\n      getIndex: function getIndex() {\n        return prevIndex;\n      },\n      getItemIndex: function getItemIndex(item) {\n        return itemIds.indexOf(item.id);\n      }\n    };\n  };\n\n  var ITEM_TRANSLATE_SPRING = {\n    type: 'spring',\n    stiffness: 0.75,\n    damping: 0.45,\n    mass: 10\n  };\n\n  var ITEM_SCALE_SPRING = 'spring';\n\n  var StateMap = {\n    DID_START_ITEM_LOAD: 'busy',\n    DID_UPDATE_ITEM_LOAD_PROGRESS: 'loading',\n    DID_THROW_ITEM_INVALID: 'load-invalid',\n    DID_THROW_ITEM_LOAD_ERROR: 'load-error',\n    DID_LOAD_ITEM: 'idle',\n    DID_THROW_ITEM_REMOVE_ERROR: 'remove-error',\n    DID_START_ITEM_REMOVE: 'busy',\n    DID_START_ITEM_PROCESSING: 'busy processing',\n    DID_REQUEST_ITEM_PROCESSING: 'busy processing',\n    DID_UPDATE_ITEM_PROCESS_PROGRESS: 'processing',\n    DID_COMPLETE_ITEM_PROCESSING: 'processing-complete',\n    DID_THROW_ITEM_PROCESSING_ERROR: 'processing-error',\n    DID_THROW_ITEM_PROCESSING_REVERT_ERROR: 'processing-revert-error',\n    DID_ABORT_ITEM_PROCESSING: 'cancelled',\n    DID_REVERT_ITEM_PROCESSING: 'idle'\n  };\n\n  /**\n   * Creates the file view\n   */\n  var create$7 = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n\n    // select\n    root.ref.handleClick = function(e) {\n      return root.dispatch('DID_ACTIVATE_ITEM', { id: props.id });\n    };\n\n    // set id\n    root.element.id = 'filepond--item-' + props.id;\n    root.element.addEventListener('click', root.ref.handleClick);\n\n    // file view\n    root.ref.container = root.appendChildView(\n      root.createChildView(fileWrapper, { id: props.id })\n    );\n\n    // file panel\n    root.ref.panel = root.appendChildView(\n      root.createChildView(panel, { name: 'item-panel' })\n    );\n\n    // default start height\n    root.ref.panel.height = null;\n\n    // by default not marked for removal\n    props.markedForRemoval = false;\n\n    // if not allowed to reorder file items, exit here\n    if (!root.query('GET_ALLOW_REORDER')) return;\n\n    // set to idle so shows grab cursor\n    root.element.dataset.dragState = 'idle';\n\n    var grab = function grab(e) {\n      if (!e.isPrimary) return;\n\n      var removedActivateListener = false;\n\n      var origin = {\n        x: e.pageX,\n        y: e.pageY\n      };\n\n      props.dragOrigin = {\n        x: root.translateX,\n        y: root.translateY\n      };\n\n      props.dragCenter = {\n        x: e.offsetX,\n        y: e.offsetY\n      };\n\n      var dragState = createDragHelper(root.query('GET_ACTIVE_ITEMS'));\n\n      root.dispatch('DID_GRAB_ITEM', { id: props.id, dragState: dragState });\n\n      var drag = function drag(e) {\n        if (!e.isPrimary) return;\n\n        e.stopPropagation();\n        e.preventDefault();\n\n        props.dragOffset = {\n          x: e.pageX - origin.x,\n          y: e.pageY - origin.y\n        };\n\n        // if dragged stop listening to clicks, will re-add when done dragging\n        var dist =\n          props.dragOffset.x * props.dragOffset.x +\n          props.dragOffset.y * props.dragOffset.y;\n        if (dist > 16 && !removedActivateListener) {\n          removedActivateListener = true;\n          root.element.removeEventListener('click', root.ref.handleClick);\n        }\n\n        root.dispatch('DID_DRAG_ITEM', { id: props.id, dragState: dragState });\n      };\n\n      var drop = function drop(e) {\n        if (!e.isPrimary) return;\n\n        document.removeEventListener('pointermove', drag);\n        document.removeEventListener('pointerup', drop);\n\n        props.dragOffset = {\n          x: e.pageX - origin.x,\n          y: e.pageY - origin.y\n        };\n\n        root.dispatch('DID_DROP_ITEM', { id: props.id, dragState: dragState });\n\n        // start listening to clicks again\n        if (removedActivateListener) {\n          setTimeout(function() {\n            return root.element.addEventListener('click', root.ref.handleClick);\n          }, 0);\n        }\n      };\n\n      document.addEventListener('pointermove', drag);\n      document.addEventListener('pointerup', drop);\n    };\n\n    root.element.addEventListener('pointerdown', grab);\n  };\n\n  var route$1 = createRoute({\n    DID_UPDATE_PANEL_HEIGHT: function DID_UPDATE_PANEL_HEIGHT(_ref2) {\n      var root = _ref2.root,\n        action = _ref2.action;\n      root.height = action.height;\n    }\n  });\n\n  var write$4 = createRoute(\n    {\n      DID_GRAB_ITEM: function DID_GRAB_ITEM(_ref3) {\n        var root = _ref3.root,\n          props = _ref3.props;\n        props.dragOrigin = {\n          x: root.translateX,\n          y: root.translateY\n        };\n      },\n      DID_DRAG_ITEM: function DID_DRAG_ITEM(_ref4) {\n        var root = _ref4.root;\n        root.element.dataset.dragState = 'drag';\n      },\n      DID_DROP_ITEM: function DID_DROP_ITEM(_ref5) {\n        var root = _ref5.root,\n          props = _ref5.props;\n        props.dragOffset = null;\n        props.dragOrigin = null;\n        root.element.dataset.dragState = 'drop';\n      }\n    },\n    function(_ref6) {\n      var root = _ref6.root,\n        actions = _ref6.actions,\n        props = _ref6.props,\n        shouldOptimize = _ref6.shouldOptimize;\n\n      if (root.element.dataset.dragState === 'drop') {\n        if (root.scaleX <= 1) {\n          root.element.dataset.dragState = 'idle';\n        }\n      }\n\n      // select last state change action\n      var action = actions\n        .concat()\n        .filter(function(action) {\n          return /^DID_/.test(action.type);\n        })\n        .reverse()\n        .find(function(action) {\n          return StateMap[action.type];\n        });\n\n      // no need to set same state twice\n      if (action && action.type !== props.currentState) {\n        // set current state\n        props.currentState = action.type;\n\n        // set state\n        root.element.dataset.filepondItemState =\n          StateMap[props.currentState] || '';\n      }\n\n      // route actions\n      var aspectRatio =\n        root.query('GET_ITEM_PANEL_ASPECT_RATIO') ||\n        root.query('GET_PANEL_ASPECT_RATIO');\n      if (!aspectRatio) {\n        route$1({ root: root, actions: actions, props: props });\n        if (!root.height && root.ref.container.rect.element.height > 0) {\n          root.height = root.ref.container.rect.element.height;\n        }\n      } else if (!shouldOptimize) {\n        root.height = root.rect.element.width * aspectRatio;\n      }\n\n      // sync panel height with item height\n      if (shouldOptimize) {\n        root.ref.panel.height = null;\n      }\n\n      root.ref.panel.height = root.height;\n    }\n  );\n\n  var item = createView({\n    create: create$7,\n    write: write$4,\n    destroy: function destroy(_ref7) {\n      var root = _ref7.root,\n        props = _ref7.props;\n      root.element.removeEventListener('click', root.ref.handleClick);\n      root.dispatch('RELEASE_ITEM', { query: props.id });\n    },\n    tag: 'li',\n    name: 'item',\n    mixins: {\n      apis: [\n        'id',\n        'interactionMethod',\n        'markedForRemoval',\n        'spawnDate',\n        'dragCenter',\n        'dragOrigin',\n        'dragOffset'\n      ],\n      styles: [\n        'translateX',\n        'translateY',\n        'scaleX',\n        'scaleY',\n        'opacity',\n        'height'\n      ],\n\n      animations: {\n        scaleX: ITEM_SCALE_SPRING,\n        scaleY: ITEM_SCALE_SPRING,\n        translateX: ITEM_TRANSLATE_SPRING,\n        translateY: ITEM_TRANSLATE_SPRING,\n        opacity: { type: 'tween', duration: 150 }\n      }\n    }\n  });\n\n  var getItemIndexByPosition = function getItemIndexByPosition(\n    view,\n    children,\n    positionInView\n  ) {\n    if (!positionInView) return;\n\n    var horizontalSpace = view.rect.element.width;\n    // const children = view.childViews;\n    var l = children.length;\n    var last = null;\n\n    // -1, don't move items to accomodate (either add to top or bottom)\n    if (l === 0 || positionInView.top < children[0].rect.element.top) return -1;\n\n    // let's get the item width\n    var item = children[0];\n    var itemRect = item.rect.element;\n    var itemHorizontalMargin = itemRect.marginLeft + itemRect.marginRight;\n    var itemWidth = itemRect.width + itemHorizontalMargin;\n    var itemsPerRow = Math.round(horizontalSpace / itemWidth);\n\n    // stack\n    if (itemsPerRow === 1) {\n      for (var index = 0; index < l; index++) {\n        var child = children[index];\n        var childMid = child.rect.outer.top + child.rect.element.height * 0.5;\n        if (positionInView.top < childMid) {\n          return index;\n        }\n      }\n      return l;\n    }\n\n    // grid\n    var itemVerticalMargin = itemRect.marginTop + itemRect.marginBottom;\n    var itemHeight = itemRect.height + itemVerticalMargin;\n    for (var _index = 0; _index < l; _index++) {\n      var indexX = _index % itemsPerRow;\n      var indexY = Math.floor(_index / itemsPerRow);\n\n      var offsetX = indexX * itemWidth;\n      var offsetY = indexY * itemHeight;\n\n      var itemTop = offsetY - itemRect.marginTop;\n      var itemRight = offsetX + itemWidth;\n      var itemBottom = offsetY + itemHeight + itemRect.marginBottom;\n\n      if (positionInView.top < itemBottom && positionInView.top > itemTop) {\n        if (positionInView.left < itemRight) {\n          return _index;\n        } else if (_index !== l - 1) {\n          last = _index;\n        } else {\n          last = null;\n        }\n      }\n    }\n\n    if (last !== null) {\n      return last;\n    }\n\n    return l;\n  };\n\n  var dropAreaDimensions = {\n    height: 0,\n    width: 0,\n    get getHeight() {\n      return this.height;\n    },\n    set setHeight(val) {\n      if (this.height === 0 || val === 0) this.height = val;\n    },\n    get getWidth() {\n      return this.width;\n    },\n    set setWidth(val) {\n      if (this.width === 0 || val === 0) this.width = val;\n    },\n    setDimensions: function setDimensions(height, width) {\n      if (this.height === 0 || height === 0) this.height = height;\n      if (this.width === 0 || width === 0) this.width = width;\n    }\n  };\n\n  var create$8 = function create(_ref) {\n    var root = _ref.root;\n    // need to set role to list as otherwise it won't be read as a list by VoiceOver\n    attr(root.element, 'role', 'list');\n\n    root.ref.lastItemSpanwDate = Date.now();\n  };\n\n  /**\n   * Inserts a new item\n   * @param root\n   * @param action\n   */\n  var addItemView = function addItemView(_ref2) {\n    var root = _ref2.root,\n      action = _ref2.action;\n    var id = action.id,\n      index = action.index,\n      interactionMethod = action.interactionMethod;\n\n    root.ref.addIndex = index;\n\n    var now = Date.now();\n    var spawnDate = now;\n    var opacity = 1;\n\n    if (interactionMethod !== InteractionMethod.NONE) {\n      opacity = 0;\n      var cooldown = root.query('GET_ITEM_INSERT_INTERVAL');\n      var dist = now - root.ref.lastItemSpanwDate;\n      spawnDate = dist < cooldown ? now + (cooldown - dist) : now;\n    }\n\n    root.ref.lastItemSpanwDate = spawnDate;\n\n    root.appendChildView(\n      root.createChildView(\n        // view type\n        item,\n\n        // props\n        {\n          spawnDate: spawnDate,\n          id: id,\n          opacity: opacity,\n          interactionMethod: interactionMethod\n        }\n      ),\n\n      index\n    );\n  };\n\n  var moveItem = function moveItem(item, x, y) {\n    var vx =\n      arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n    var vy =\n      arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n\n    // set to null to remove animation while dragging\n    if (item.dragOffset) {\n      item.translateX = null;\n      item.translateY = null;\n      item.translateX = item.dragOrigin.x + item.dragOffset.x;\n      item.translateY = item.dragOrigin.y + item.dragOffset.y;\n      item.scaleX = 1.025;\n      item.scaleY = 1.025;\n    } else {\n      item.translateX = x;\n      item.translateY = y;\n\n      if (Date.now() > item.spawnDate) {\n        // reveal element\n        if (item.opacity === 0) {\n          introItemView(item, x, y, vx, vy);\n        }\n\n        // make sure is default scale every frame\n        item.scaleX = 1;\n        item.scaleY = 1;\n        item.opacity = 1;\n      }\n    }\n  };\n\n  var introItemView = function introItemView(item, x, y, vx, vy) {\n    if (item.interactionMethod === InteractionMethod.NONE) {\n      item.translateX = null;\n      item.translateX = x;\n      item.translateY = null;\n      item.translateY = y;\n    } else if (item.interactionMethod === InteractionMethod.DROP) {\n      item.translateX = null;\n      item.translateX = x - vx * 20;\n\n      item.translateY = null;\n      item.translateY = y - vy * 10;\n\n      item.scaleX = 0.8;\n      item.scaleY = 0.8;\n    } else if (item.interactionMethod === InteractionMethod.BROWSE) {\n      item.translateY = null;\n      item.translateY = y - 30;\n    } else if (item.interactionMethod === InteractionMethod.API) {\n      item.translateX = null;\n      item.translateX = x - 30;\n      item.translateY = null;\n    }\n  };\n\n  /**\n   * Removes an existing item\n   * @param root\n   * @param action\n   */\n  var removeItemView = function removeItemView(_ref3) {\n    var root = _ref3.root,\n      action = _ref3.action;\n    var id = action.id;\n\n    // get the view matching the given id\n    var view = root.childViews.find(function(child) {\n      return child.id === id;\n    });\n\n    // if no view found, exit\n    if (!view) {\n      return;\n    }\n\n    // animate view out of view\n    view.scaleX = 0.9;\n    view.scaleY = 0.9;\n    view.opacity = 0;\n\n    // mark for removal\n    view.markedForRemoval = true;\n  };\n\n  var getItemHeight = function getItemHeight(child) {\n    return (\n      child.rect.element.height +\n      child.rect.element.marginBottom * 0.5 +\n      child.rect.element.marginTop * 0.5\n    );\n  };\n  var getItemWidth = function getItemWidth(child) {\n    return (\n      child.rect.element.width +\n      child.rect.element.marginLeft * 0.5 +\n      child.rect.element.marginRight * 0.5\n    );\n  };\n\n  var dragItem = function dragItem(_ref4) {\n    var root = _ref4.root,\n      action = _ref4.action;\n    var id = action.id,\n      dragState = action.dragState;\n\n    // reference to item\n    var item = root.query('GET_ITEM', { id: id });\n\n    // get the view matching the given id\n    var view = root.childViews.find(function(child) {\n      return child.id === id;\n    });\n\n    var numItems = root.childViews.length;\n    var oldIndex = dragState.getItemIndex(item);\n\n    // if no view found, exit\n    if (!view) return;\n\n    var dragPosition = {\n      x: view.dragOrigin.x + view.dragOffset.x + view.dragCenter.x,\n      y: view.dragOrigin.y + view.dragOffset.y + view.dragCenter.y\n\n      // get drag area dimensions\n    };\n    var dragHeight = getItemHeight(view);\n    var dragWidth = getItemWidth(view);\n\n    // get rows and columns (There will always be at least one row and one column if a file is present)\n    var cols = Math.floor(root.rect.outer.width / dragWidth);\n    if (cols > numItems) cols = numItems;\n\n    // rows are used to find when we have left the preview area bounding box\n    var rows = Math.floor(numItems / cols + 1);\n\n    dropAreaDimensions.setHeight = dragHeight * rows;\n    dropAreaDimensions.setWidth = dragWidth * cols;\n\n    // get new index of dragged item\n    var location = {\n      y: Math.floor(dragPosition.y / dragHeight),\n      x: Math.floor(dragPosition.x / dragWidth),\n      getGridIndex: function getGridIndex() {\n        if (\n          dragPosition.y > dropAreaDimensions.getHeight ||\n          dragPosition.y < 0 ||\n          dragPosition.x > dropAreaDimensions.getWidth ||\n          dragPosition.x < 0\n        )\n          return oldIndex;\n        return this.y * cols + this.x;\n      },\n      getColIndex: function getColIndex() {\n        var items = root.query('GET_ACTIVE_ITEMS');\n        var visibleChildren = root.childViews.filter(function(child) {\n          return child.rect.element.height;\n        });\n        var children = items.map(function(item) {\n          return visibleChildren.find(function(childView) {\n            return childView.id === item.id;\n          });\n        });\n        var currentIndex = children.findIndex(function(child) {\n          return child === view;\n        });\n        var dragHeight = getItemHeight(view);\n        var l = children.length;\n        var idx = l;\n        var childHeight = 0;\n        var childBottom = 0;\n        var childTop = 0;\n        for (var i = 0; i < l; i++) {\n          childHeight = getItemHeight(children[i]);\n          childTop = childBottom;\n          childBottom = childTop + childHeight;\n          if (dragPosition.y < childBottom) {\n            if (currentIndex > i) {\n              if (dragPosition.y < childTop + dragHeight) {\n                idx = i;\n                break;\n              }\n              continue;\n            }\n            idx = i;\n            break;\n          }\n        }\n        return idx;\n      }\n\n      // get new index\n    };\n    var index = cols > 1 ? location.getGridIndex() : location.getColIndex();\n    root.dispatch('MOVE_ITEM', { query: view, index: index });\n\n    // if the index of the item changed, dispatch reorder action\n    var currentIndex = dragState.getIndex();\n\n    if (currentIndex === undefined || currentIndex !== index) {\n      dragState.setIndex(index);\n\n      if (currentIndex === undefined) return;\n\n      root.dispatch('DID_REORDER_ITEMS', {\n        items: root.query('GET_ACTIVE_ITEMS'),\n        origin: oldIndex,\n        target: index\n      });\n    }\n  };\n\n  /**\n   * Setup action routes\n   */\n  var route$2 = createRoute({\n    DID_ADD_ITEM: addItemView,\n    DID_REMOVE_ITEM: removeItemView,\n    DID_DRAG_ITEM: dragItem\n  });\n\n  /**\n   * Write to view\n   * @param root\n   * @param actions\n   * @param props\n   */\n  var write$5 = function write(_ref5) {\n    var root = _ref5.root,\n      props = _ref5.props,\n      actions = _ref5.actions,\n      shouldOptimize = _ref5.shouldOptimize;\n\n    // route actions\n    route$2({ root: root, props: props, actions: actions });\n    var dragCoordinates = props.dragCoordinates;\n\n    // available space on horizontal axis\n    var horizontalSpace = root.rect.element.width;\n\n    // only draw children that have dimensions\n    var visibleChildren = root.childViews.filter(function(child) {\n      return child.rect.element.height;\n    });\n\n    // sort based on current active items\n    var children = root\n      .query('GET_ACTIVE_ITEMS')\n      .map(function(item) {\n        return visibleChildren.find(function(child) {\n          return child.id === item.id;\n        });\n      })\n      .filter(function(item) {\n        return item;\n      });\n\n    // get index\n    var dragIndex = dragCoordinates\n      ? getItemIndexByPosition(root, children, dragCoordinates)\n      : null;\n\n    // add index is used to reserve the dropped/added item index till the actual item is rendered\n    var addIndex = root.ref.addIndex || null;\n\n    // add index no longer needed till possibly next draw\n    root.ref.addIndex = null;\n\n    var dragIndexOffset = 0;\n    var removeIndexOffset = 0;\n    var addIndexOffset = 0;\n\n    if (children.length === 0) return;\n\n    var childRect = children[0].rect.element;\n    var itemVerticalMargin = childRect.marginTop + childRect.marginBottom;\n    var itemHorizontalMargin = childRect.marginLeft + childRect.marginRight;\n    var itemWidth = childRect.width + itemHorizontalMargin;\n    var itemHeight = childRect.height + itemVerticalMargin;\n    var itemsPerRow = Math.round(horizontalSpace / itemWidth);\n\n    // stack\n    if (itemsPerRow === 1) {\n      var offsetY = 0;\n      var dragOffset = 0;\n\n      children.forEach(function(child, index) {\n        if (dragIndex) {\n          var dist = index - dragIndex;\n          if (dist === -2) {\n            dragOffset = -itemVerticalMargin * 0.25;\n          } else if (dist === -1) {\n            dragOffset = -itemVerticalMargin * 0.75;\n          } else if (dist === 0) {\n            dragOffset = itemVerticalMargin * 0.75;\n          } else if (dist === 1) {\n            dragOffset = itemVerticalMargin * 0.25;\n          } else {\n            dragOffset = 0;\n          }\n        }\n\n        if (shouldOptimize) {\n          child.translateX = null;\n          child.translateY = null;\n        }\n\n        if (!child.markedForRemoval) {\n          moveItem(child, 0, offsetY + dragOffset);\n        }\n\n        var itemHeight = child.rect.element.height + itemVerticalMargin;\n\n        var visualHeight =\n          itemHeight * (child.markedForRemoval ? child.opacity : 1);\n\n        offsetY += visualHeight;\n      });\n    }\n    // grid\n    else {\n      var prevX = 0;\n      var prevY = 0;\n\n      children.forEach(function(child, index) {\n        if (index === dragIndex) {\n          dragIndexOffset = 1;\n        }\n\n        if (index === addIndex) {\n          addIndexOffset += 1;\n        }\n\n        if (child.markedForRemoval && child.opacity < 0.5) {\n          removeIndexOffset -= 1;\n        }\n\n        var visualIndex =\n          index + addIndexOffset + dragIndexOffset + removeIndexOffset;\n\n        var indexX = visualIndex % itemsPerRow;\n        var indexY = Math.floor(visualIndex / itemsPerRow);\n\n        var offsetX = indexX * itemWidth;\n        var offsetY = indexY * itemHeight;\n\n        var vectorX = Math.sign(offsetX - prevX);\n        var vectorY = Math.sign(offsetY - prevY);\n\n        prevX = offsetX;\n        prevY = offsetY;\n\n        if (child.markedForRemoval) return;\n\n        if (shouldOptimize) {\n          child.translateX = null;\n          child.translateY = null;\n        }\n\n        moveItem(child, offsetX, offsetY, vectorX, vectorY);\n      });\n    }\n  };\n\n  /**\n   * Filters actions that are meant specifically for a certain child of the list\n   * @param child\n   * @param actions\n   */\n  var filterSetItemActions = function filterSetItemActions(child, actions) {\n    return actions.filter(function(action) {\n      // if action has an id, filter out actions that don't have this child id\n      if (action.data && action.data.id) {\n        return child.id === action.data.id;\n      }\n\n      // allow all other actions\n      return true;\n    });\n  };\n\n  var list = createView({\n    create: create$8,\n    write: write$5,\n    tag: 'ul',\n    name: 'list',\n    didWriteView: function didWriteView(_ref6) {\n      var root = _ref6.root;\n      root.childViews\n        .filter(function(view) {\n          return view.markedForRemoval && view.opacity === 0 && view.resting;\n        })\n        .forEach(function(view) {\n          view._destroy();\n          root.removeChildView(view);\n        });\n    },\n    filterFrameActionsForChild: filterSetItemActions,\n    mixins: {\n      apis: ['dragCoordinates']\n    }\n  });\n\n  var create$9 = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n    root.ref.list = root.appendChildView(root.createChildView(list));\n    props.dragCoordinates = null;\n    props.overflowing = false;\n  };\n\n  var storeDragCoordinates = function storeDragCoordinates(_ref2) {\n    var root = _ref2.root,\n      props = _ref2.props,\n      action = _ref2.action;\n    if (!root.query('GET_ITEM_INSERT_LOCATION_FREEDOM')) return;\n    props.dragCoordinates = {\n      left: action.position.scopeLeft - root.ref.list.rect.element.left,\n      top:\n        action.position.scopeTop -\n        (root.rect.outer.top +\n          root.rect.element.marginTop +\n          root.rect.element.scrollTop)\n    };\n  };\n\n  var clearDragCoordinates = function clearDragCoordinates(_ref3) {\n    var props = _ref3.props;\n    props.dragCoordinates = null;\n  };\n\n  var route$3 = createRoute({\n    DID_DRAG: storeDragCoordinates,\n    DID_END_DRAG: clearDragCoordinates\n  });\n\n  var write$6 = function write(_ref4) {\n    var root = _ref4.root,\n      props = _ref4.props,\n      actions = _ref4.actions;\n\n    // route actions\n    route$3({ root: root, props: props, actions: actions });\n\n    // current drag position\n    root.ref.list.dragCoordinates = props.dragCoordinates;\n\n    // if currently overflowing but no longer received overflow\n    if (props.overflowing && !props.overflow) {\n      props.overflowing = false;\n\n      // reset overflow state\n      root.element.dataset.state = '';\n      root.height = null;\n    }\n\n    // if is not overflowing currently but does receive overflow value\n    if (props.overflow) {\n      var newHeight = Math.round(props.overflow);\n      if (newHeight !== root.height) {\n        props.overflowing = true;\n        root.element.dataset.state = 'overflow';\n        root.height = newHeight;\n      }\n    }\n  };\n\n  var listScroller = createView({\n    create: create$9,\n    write: write$6,\n    name: 'list-scroller',\n    mixins: {\n      apis: ['overflow', 'dragCoordinates'],\n      styles: ['height', 'translateY'],\n      animations: {\n        translateY: 'spring'\n      }\n    }\n  });\n\n  var attrToggle = function attrToggle(element, name, state) {\n    var enabledValue =\n      arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n    if (state) {\n      attr(element, name, enabledValue);\n    } else {\n      element.removeAttribute(name);\n    }\n  };\n\n  var resetFileInput = function resetFileInput(input) {\n    // no value, no need to reset\n    if (!input || input.value === '') {\n      return;\n    }\n\n    try {\n      // for modern browsers\n      input.value = '';\n    } catch (err) {}\n\n    // for IE10\n    if (input.value) {\n      // quickly append input to temp form and reset form\n      var form = createElement$1('form');\n      var parentNode = input.parentNode;\n      var ref = input.nextSibling;\n      form.appendChild(input);\n      form.reset();\n\n      // re-inject input where it originally was\n      if (ref) {\n        parentNode.insertBefore(input, ref);\n      } else {\n        parentNode.appendChild(input);\n      }\n    }\n  };\n\n  var create$a = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n\n    // set id so can be referenced from outside labels\n    root.element.id = 'filepond--browser-' + props.id;\n\n    // set name of element (is removed when a value is set)\n    attr(root.element, 'name', root.query('GET_NAME'));\n\n    // we have to link this element to the status element\n    attr(root.element, 'aria-controls', 'filepond--assistant-' + props.id);\n\n    // set label, we use labelled by as otherwise the screenreader does not read the \"browse\" text in the label (as it has tabindex: 0)\n    attr(root.element, 'aria-labelledby', 'filepond--drop-label-' + props.id);\n\n    // set configurable props\n    setAcceptedFileTypes({\n      root: root,\n      action: { value: root.query('GET_ACCEPTED_FILE_TYPES') }\n    });\n    toggleAllowMultiple({\n      root: root,\n      action: { value: root.query('GET_ALLOW_MULTIPLE') }\n    });\n    toggleDirectoryFilter({\n      root: root,\n      action: { value: root.query('GET_ALLOW_DIRECTORIES_ONLY') }\n    });\n    toggleDisabled({ root: root });\n    toggleRequired({\n      root: root,\n      action: { value: root.query('GET_REQUIRED') }\n    });\n    setCaptureMethod({\n      root: root,\n      action: { value: root.query('GET_CAPTURE_METHOD') }\n    });\n\n    // handle changes to the input field\n    root.ref.handleChange = function(e) {\n      if (!root.element.value) {\n        return;\n      }\n\n      // extract files and move value of webkitRelativePath path to _relativePath\n      var files = Array.from(root.element.files).map(function(file) {\n        file._relativePath = file.webkitRelativePath;\n        return file;\n      });\n\n      // we add a little delay so the OS file select window can move out of the way before we add our file\n      setTimeout(function() {\n        // load files\n        props.onload(files);\n\n        // reset input, it's just for exposing a method to drop files, should not retain any state\n        resetFileInput(root.element);\n      }, 250);\n    };\n\n    root.element.addEventListener('change', root.ref.handleChange);\n  };\n\n  var setAcceptedFileTypes = function setAcceptedFileTypes(_ref2) {\n    var root = _ref2.root,\n      action = _ref2.action;\n    if (!root.query('GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE')) return;\n    attrToggle(\n      root.element,\n      'accept',\n      !!action.value,\n      action.value ? action.value.join(',') : ''\n    );\n  };\n\n  var toggleAllowMultiple = function toggleAllowMultiple(_ref3) {\n    var root = _ref3.root,\n      action = _ref3.action;\n    attrToggle(root.element, 'multiple', action.value);\n  };\n\n  var toggleDirectoryFilter = function toggleDirectoryFilter(_ref4) {\n    var root = _ref4.root,\n      action = _ref4.action;\n    attrToggle(root.element, 'webkitdirectory', action.value);\n  };\n\n  var toggleDisabled = function toggleDisabled(_ref5) {\n    var root = _ref5.root;\n    var isDisabled = root.query('GET_DISABLED');\n    var doesAllowBrowse = root.query('GET_ALLOW_BROWSE');\n    var disableField = isDisabled || !doesAllowBrowse;\n    attrToggle(root.element, 'disabled', disableField);\n  };\n\n  var toggleRequired = function toggleRequired(_ref6) {\n    var root = _ref6.root,\n      action = _ref6.action;\n    // want to remove required, always possible\n    if (!action.value) {\n      attrToggle(root.element, 'required', false);\n    }\n    // if want to make required, only possible when zero items\n    else if (root.query('GET_TOTAL_ITEMS') === 0) {\n      attrToggle(root.element, 'required', true);\n    }\n  };\n\n  var setCaptureMethod = function setCaptureMethod(_ref7) {\n    var root = _ref7.root,\n      action = _ref7.action;\n    attrToggle(\n      root.element,\n      'capture',\n      !!action.value,\n      action.value === true ? '' : action.value\n    );\n  };\n\n  var updateRequiredStatus = function updateRequiredStatus(_ref8) {\n    var root = _ref8.root;\n    var element = root.element;\n    // always remove the required attribute when more than zero items\n    if (root.query('GET_TOTAL_ITEMS') > 0) {\n      attrToggle(element, 'required', false);\n      attrToggle(element, 'name', false);\n    } else {\n      // add name attribute\n      attrToggle(element, 'name', true, root.query('GET_NAME'));\n\n      // remove any validation messages\n      var shouldCheckValidity = root.query('GET_CHECK_VALIDITY');\n      if (shouldCheckValidity) {\n        element.setCustomValidity('');\n      }\n\n      // we only add required if the field has been deemed required\n      if (root.query('GET_REQUIRED')) {\n        attrToggle(element, 'required', true);\n      }\n    }\n  };\n\n  var updateFieldValidityStatus = function updateFieldValidityStatus(_ref9) {\n    var root = _ref9.root;\n    var shouldCheckValidity = root.query('GET_CHECK_VALIDITY');\n    if (!shouldCheckValidity) return;\n    root.element.setCustomValidity(root.query('GET_LABEL_INVALID_FIELD'));\n  };\n\n  var browser = createView({\n    tag: 'input',\n    name: 'browser',\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    attributes: {\n      type: 'file'\n    },\n\n    create: create$a,\n    destroy: function destroy(_ref10) {\n      var root = _ref10.root;\n      root.element.removeEventListener('change', root.ref.handleChange);\n    },\n    write: createRoute({\n      DID_LOAD_ITEM: updateRequiredStatus,\n      DID_REMOVE_ITEM: updateRequiredStatus,\n      DID_THROW_ITEM_INVALID: updateFieldValidityStatus,\n\n      DID_SET_DISABLED: toggleDisabled,\n      DID_SET_ALLOW_BROWSE: toggleDisabled,\n      DID_SET_ALLOW_DIRECTORIES_ONLY: toggleDirectoryFilter,\n      DID_SET_ALLOW_MULTIPLE: toggleAllowMultiple,\n      DID_SET_ACCEPTED_FILE_TYPES: setAcceptedFileTypes,\n      DID_SET_CAPTURE_METHOD: setCaptureMethod,\n      DID_SET_REQUIRED: toggleRequired\n    })\n  });\n\n  var Key = {\n    ENTER: 13,\n    SPACE: 32\n  };\n\n  var create$b = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n\n    // create the label and link it to the file browser\n    var label = createElement$1('label');\n    attr(label, 'for', 'filepond--browser-' + props.id);\n\n    // use for labeling file input (aria-labelledby on file input)\n    attr(label, 'id', 'filepond--drop-label-' + props.id);\n\n    // hide the label for screenreaders, the input element will read the contents of the label when it's focussed. If we don't set aria-hidden the screenreader will also navigate the contents of the label separately from the input.\n    attr(label, 'aria-hidden', 'true');\n\n    // handle keys\n    root.ref.handleKeyDown = function(e) {\n      var isActivationKey = e.keyCode === Key.ENTER || e.keyCode === Key.SPACE;\n      if (!isActivationKey) return;\n      // stops from triggering the element a second time\n      e.preventDefault();\n\n      // click link (will then in turn activate file input)\n      root.ref.label.click();\n    };\n\n    root.ref.handleClick = function(e) {\n      var isLabelClick = e.target === label || label.contains(e.target);\n\n      // don't want to click twice\n      if (isLabelClick) return;\n\n      // click link (will then in turn activate file input)\n      root.ref.label.click();\n    };\n\n    // attach events\n    label.addEventListener('keydown', root.ref.handleKeyDown);\n    root.element.addEventListener('click', root.ref.handleClick);\n\n    // update\n    updateLabelValue(label, props.caption);\n\n    // add!\n    root.appendChild(label);\n    root.ref.label = label;\n  };\n\n  var updateLabelValue = function updateLabelValue(label, value) {\n    label.innerHTML = value;\n    var clickable = label.querySelector('.filepond--label-action');\n    if (clickable) {\n      attr(clickable, 'tabindex', '0');\n    }\n    return value;\n  };\n\n  var dropLabel = createView({\n    name: 'drop-label',\n    ignoreRect: true,\n    create: create$b,\n    destroy: function destroy(_ref2) {\n      var root = _ref2.root;\n      root.ref.label.addEventListener('keydown', root.ref.handleKeyDown);\n      root.element.removeEventListener('click', root.ref.handleClick);\n    },\n    write: createRoute({\n      DID_SET_LABEL_IDLE: function DID_SET_LABEL_IDLE(_ref3) {\n        var root = _ref3.root,\n          action = _ref3.action;\n        updateLabelValue(root.ref.label, action.value);\n      }\n    }),\n\n    mixins: {\n      styles: ['opacity', 'translateX', 'translateY'],\n      animations: {\n        opacity: { type: 'tween', duration: 150 },\n        translateX: 'spring',\n        translateY: 'spring'\n      }\n    }\n  });\n\n  var blob = createView({\n    name: 'drip-blob',\n    ignoreRect: true,\n    mixins: {\n      styles: ['translateX', 'translateY', 'scaleX', 'scaleY', 'opacity'],\n      animations: {\n        scaleX: 'spring',\n        scaleY: 'spring',\n        translateX: 'spring',\n        translateY: 'spring',\n        opacity: { type: 'tween', duration: 250 }\n      }\n    }\n  });\n\n  var addBlob = function addBlob(_ref) {\n    var root = _ref.root;\n    var centerX = root.rect.element.width * 0.5;\n    var centerY = root.rect.element.height * 0.5;\n\n    root.ref.blob = root.appendChildView(\n      root.createChildView(blob, {\n        opacity: 0,\n        scaleX: 2.5,\n        scaleY: 2.5,\n        translateX: centerX,\n        translateY: centerY\n      })\n    );\n  };\n\n  var moveBlob = function moveBlob(_ref2) {\n    var root = _ref2.root,\n      action = _ref2.action;\n    if (!root.ref.blob) {\n      addBlob({ root: root });\n      return;\n    }\n\n    root.ref.blob.translateX = action.position.scopeLeft;\n    root.ref.blob.translateY = action.position.scopeTop;\n    root.ref.blob.scaleX = 1;\n    root.ref.blob.scaleY = 1;\n    root.ref.blob.opacity = 1;\n  };\n\n  var hideBlob = function hideBlob(_ref3) {\n    var root = _ref3.root;\n    if (!root.ref.blob) {\n      return;\n    }\n    root.ref.blob.opacity = 0;\n  };\n\n  var explodeBlob = function explodeBlob(_ref4) {\n    var root = _ref4.root;\n    if (!root.ref.blob) {\n      return;\n    }\n    root.ref.blob.scaleX = 2.5;\n    root.ref.blob.scaleY = 2.5;\n    root.ref.blob.opacity = 0;\n  };\n\n  var write$7 = function write(_ref5) {\n    var root = _ref5.root,\n      props = _ref5.props,\n      actions = _ref5.actions;\n    route$4({ root: root, props: props, actions: actions });\n    var blob = root.ref.blob;\n\n    if (actions.length === 0 && blob && blob.opacity === 0) {\n      root.removeChildView(blob);\n      root.ref.blob = null;\n    }\n  };\n\n  var route$4 = createRoute({\n    DID_DRAG: moveBlob,\n    DID_DROP: explodeBlob,\n    DID_END_DRAG: hideBlob\n  });\n\n  var drip = createView({\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    name: 'drip',\n    write: write$7\n  });\n\n  var create$c = function create(_ref) {\n    var root = _ref.root;\n    return (root.ref.fields = {});\n  };\n\n  var getField = function getField(root, id) {\n    return root.ref.fields[id];\n  };\n\n  var syncFieldPositionsWithItems = function syncFieldPositionsWithItems(root) {\n    root.query('GET_ACTIVE_ITEMS').forEach(function(item) {\n      if (!root.ref.fields[item.id]) return;\n      root.element.appendChild(root.ref.fields[item.id]);\n    });\n  };\n\n  var didReorderItems = function didReorderItems(_ref2) {\n    var root = _ref2.root;\n    return syncFieldPositionsWithItems(root);\n  };\n\n  var didAddItem = function didAddItem(_ref3) {\n    var root = _ref3.root,\n      action = _ref3.action;\n    var dataContainer = createElement$1('input');\n    dataContainer.type = 'hidden';\n    dataContainer.name = root.query('GET_NAME');\n    dataContainer.disabled = root.query('GET_DISABLED');\n    root.ref.fields[action.id] = dataContainer;\n    syncFieldPositionsWithItems(root);\n  };\n\n  var didLoadItem$1 = function didLoadItem(_ref4) {\n    var root = _ref4.root,\n      action = _ref4.action;\n    var field = getField(root, action.id);\n    if (!field || action.serverFileReference === null) return;\n    field.value = action.serverFileReference;\n  };\n\n  var didSetDisabled = function didSetDisabled(_ref5) {\n    var root = _ref5.root;\n    root.element.disabled = root.query('GET_DISABLED');\n  };\n\n  var didRemoveItem = function didRemoveItem(_ref6) {\n    var root = _ref6.root,\n      action = _ref6.action;\n    var field = getField(root, action.id);\n    if (!field) return;\n    field.parentNode.removeChild(field);\n    delete root.ref.fields[action.id];\n  };\n\n  var didDefineValue = function didDefineValue(_ref7) {\n    var root = _ref7.root,\n      action = _ref7.action;\n    var field = getField(root, action.id);\n    if (!field) return;\n    if (action.value === null) {\n      field.removeAttribute('value');\n    } else {\n      field.value = action.value;\n    }\n    syncFieldPositionsWithItems(root);\n  };\n\n  var write$8 = createRoute({\n    DID_SET_DISABLED: didSetDisabled,\n    DID_ADD_ITEM: didAddItem,\n    DID_LOAD_ITEM: didLoadItem$1,\n    DID_REMOVE_ITEM: didRemoveItem,\n    DID_DEFINE_VALUE: didDefineValue,\n    DID_REORDER_ITEMS: didReorderItems,\n    DID_SORT_ITEMS: didReorderItems\n  });\n\n  var data = createView({\n    tag: 'fieldset',\n    name: 'data',\n    create: create$c,\n    write: write$8,\n    ignoreRect: true\n  });\n\n  var getRootNode = function getRootNode(element) {\n    return 'getRootNode' in element ? element.getRootNode() : document;\n  };\n\n  var images = ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp', 'svg', 'tiff'];\n  var text$1 = ['css', 'csv', 'html', 'txt'];\n  var map = {\n    zip: 'zip|compressed',\n    epub: 'application/epub+zip'\n  };\n\n  var guesstimateMimeType = function guesstimateMimeType() {\n    var extension =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    extension = extension.toLowerCase();\n    if (images.includes(extension)) {\n      return (\n        'image/' +\n        (extension === 'jpg'\n          ? 'jpeg'\n          : extension === 'svg'\n          ? 'svg+xml'\n          : extension)\n      );\n    }\n    if (text$1.includes(extension)) {\n      return 'text/' + extension;\n    }\n\n    return map[extension] || '';\n  };\n\n  var requestDataTransferItems = function requestDataTransferItems(\n    dataTransfer\n  ) {\n    return new Promise(function(resolve, reject) {\n      // try to get links from transfer, if found we'll exit immidiately (unless a file is in the dataTransfer as well, this is because Firefox could represent the file as a URL and a file object at the same time)\n      var links = getLinks(dataTransfer);\n      if (links.length && !hasFiles(dataTransfer)) {\n        return resolve(links);\n      }\n      // try to get files from the transfer\n      getFiles(dataTransfer).then(resolve);\n    });\n  };\n\n  /**\n   * Test if datatransfer has files\n   */\n  var hasFiles = function hasFiles(dataTransfer) {\n    if (dataTransfer.files) return dataTransfer.files.length > 0;\n    return false;\n  };\n\n  /**\n   * Extracts files from a DataTransfer object\n   */\n  var getFiles = function getFiles(dataTransfer) {\n    return new Promise(function(resolve, reject) {\n      // get the transfer items as promises\n      var promisedFiles = (dataTransfer.items\n        ? Array.from(dataTransfer.items)\n        : []\n      )\n        // only keep file system items (files and directories)\n        .filter(function(item) {\n          return isFileSystemItem(item);\n        })\n\n        // map each item to promise\n        .map(function(item) {\n          return getFilesFromItem(item);\n        });\n\n      // if is empty, see if we can extract some info from the files property as a fallback\n      if (!promisedFiles.length) {\n        // TODO: test for directories (should not be allowed)\n        // Use FileReader, problem is that the files property gets lost in the process\n        resolve(dataTransfer.files ? Array.from(dataTransfer.files) : []);\n        return;\n      }\n\n      // done!\n      Promise.all(promisedFiles)\n        .then(function(returnedFileGroups) {\n          // flatten groups\n          var files = [];\n          returnedFileGroups.forEach(function(group) {\n            files.push.apply(files, group);\n          });\n\n          // done (filter out empty files)!\n          resolve(\n            files\n              .filter(function(file) {\n                return file;\n              })\n              .map(function(file) {\n                if (!file._relativePath)\n                  file._relativePath = file.webkitRelativePath;\n                return file;\n              })\n          );\n        })\n        .catch(console.error);\n    });\n  };\n\n  var isFileSystemItem = function isFileSystemItem(item) {\n    if (isEntry(item)) {\n      var entry = getAsEntry(item);\n      if (entry) {\n        return entry.isFile || entry.isDirectory;\n      }\n    }\n    return item.kind === 'file';\n  };\n\n  var getFilesFromItem = function getFilesFromItem(item) {\n    return new Promise(function(resolve, reject) {\n      if (isDirectoryEntry(item)) {\n        getFilesInDirectory(getAsEntry(item))\n          .then(resolve)\n          .catch(reject);\n        return;\n      }\n\n      resolve([item.getAsFile()]);\n    });\n  };\n\n  var getFilesInDirectory = function getFilesInDirectory(entry) {\n    return new Promise(function(resolve, reject) {\n      var files = [];\n\n      // the total entries to read\n      var dirCounter = 0;\n      var fileCounter = 0;\n\n      var resolveIfDone = function resolveIfDone() {\n        if (fileCounter === 0 && dirCounter === 0) {\n          resolve(files);\n        }\n      };\n\n      // the recursive function\n      var readEntries = function readEntries(dirEntry) {\n        dirCounter++;\n\n        var directoryReader = dirEntry.createReader();\n\n        // directories are returned in batches, we need to process all batches before we're done\n        var readBatch = function readBatch() {\n          directoryReader.readEntries(function(entries) {\n            if (entries.length === 0) {\n              dirCounter--;\n              resolveIfDone();\n              return;\n            }\n\n            entries.forEach(function(entry) {\n              // recursively read more directories\n              if (entry.isDirectory) {\n                readEntries(entry);\n              } else {\n                // read as file\n                fileCounter++;\n\n                entry.file(function(file) {\n                  var correctedFile = correctMissingFileType(file);\n                  if (entry.fullPath)\n                    correctedFile._relativePath = entry.fullPath;\n                  files.push(correctedFile);\n                  fileCounter--;\n                  resolveIfDone();\n                });\n              }\n            });\n\n            // try to get next batch of files\n            readBatch();\n          }, reject);\n        };\n\n        // read first batch of files\n        readBatch();\n      };\n\n      // go!\n      readEntries(entry);\n    });\n  };\n\n  var correctMissingFileType = function correctMissingFileType(file) {\n    if (file.type.length) return file;\n    var date = file.lastModifiedDate;\n    var name = file.name;\n    file = file.slice(\n      0,\n      file.size,\n      guesstimateMimeType(getExtensionFromFilename(file.name))\n    );\n    file.name = name;\n    file.lastModifiedDate = date;\n    return file;\n  };\n\n  var isDirectoryEntry = function isDirectoryEntry(item) {\n    return isEntry(item) && (getAsEntry(item) || {}).isDirectory;\n  };\n\n  var isEntry = function isEntry(item) {\n    return 'webkitGetAsEntry' in item;\n  };\n\n  var getAsEntry = function getAsEntry(item) {\n    return item.webkitGetAsEntry();\n  };\n\n  /**\n   * Extracts links from a DataTransfer object\n   */\n  var getLinks = function getLinks(dataTransfer) {\n    var links = [];\n    try {\n      // look in meta data property\n      links = getLinksFromTransferMetaData(dataTransfer);\n      if (links.length) {\n        return links;\n      }\n      links = getLinksFromTransferURLData(dataTransfer);\n    } catch (e) {\n      // nope nope nope (probably IE trouble)\n    }\n    return links;\n  };\n\n  var getLinksFromTransferURLData = function getLinksFromTransferURLData(\n    dataTransfer\n  ) {\n    var data = dataTransfer.getData('url');\n    if (typeof data === 'string' && data.length) {\n      return [data];\n    }\n    return [];\n  };\n\n  var getLinksFromTransferMetaData = function getLinksFromTransferMetaData(\n    dataTransfer\n  ) {\n    var data = dataTransfer.getData('text/html');\n    if (typeof data === 'string' && data.length) {\n      var matches = data.match(/src\\s*=\\s*\"(.+?)\"/);\n      if (matches) {\n        return [matches[1]];\n      }\n    }\n    return [];\n  };\n\n  var dragNDropObservers = [];\n\n  var eventPosition = function eventPosition(e) {\n    return {\n      pageLeft: e.pageX,\n      pageTop: e.pageY,\n      scopeLeft: e.offsetX || e.layerX,\n      scopeTop: e.offsetY || e.layerY\n    };\n  };\n\n  var createDragNDropClient = function createDragNDropClient(\n    element,\n    scopeToObserve,\n    filterElement\n  ) {\n    var observer = getDragNDropObserver(scopeToObserve);\n\n    var client = {\n      element: element,\n      filterElement: filterElement,\n      state: null,\n      ondrop: function ondrop() {},\n      onenter: function onenter() {},\n      ondrag: function ondrag() {},\n      onexit: function onexit() {},\n      onload: function onload() {},\n      allowdrop: function allowdrop() {}\n    };\n\n    client.destroy = observer.addListener(client);\n\n    return client;\n  };\n\n  var getDragNDropObserver = function getDragNDropObserver(element) {\n    // see if already exists, if so, return\n    var observer = dragNDropObservers.find(function(item) {\n      return item.element === element;\n    });\n    if (observer) {\n      return observer;\n    }\n\n    // create new observer, does not yet exist for this element\n    var newObserver = createDragNDropObserver(element);\n    dragNDropObservers.push(newObserver);\n    return newObserver;\n  };\n\n  var createDragNDropObserver = function createDragNDropObserver(element) {\n    var clients = [];\n\n    var routes = {\n      dragenter: dragenter,\n      dragover: dragover,\n      dragleave: dragleave,\n      drop: drop\n    };\n\n    var handlers = {};\n\n    forin(routes, function(event, createHandler) {\n      handlers[event] = createHandler(element, clients);\n      element.addEventListener(event, handlers[event], false);\n    });\n\n    var observer = {\n      element: element,\n      addListener: function addListener(client) {\n        // add as client\n        clients.push(client);\n\n        // return removeListener function\n        return function() {\n          // remove client\n          clients.splice(clients.indexOf(client), 1);\n\n          // if no more clients, clean up observer\n          if (clients.length === 0) {\n            dragNDropObservers.splice(dragNDropObservers.indexOf(observer), 1);\n\n            forin(routes, function(event) {\n              element.removeEventListener(event, handlers[event], false);\n            });\n          }\n        };\n      }\n    };\n\n    return observer;\n  };\n\n  var elementFromPoint = function elementFromPoint(root, point) {\n    if (!('elementFromPoint' in root)) {\n      root = document;\n    }\n    return root.elementFromPoint(point.x, point.y);\n  };\n\n  var isEventTarget = function isEventTarget(e, target) {\n    // get root\n    var root = getRootNode(target);\n\n    // get element at position\n    // if root is not actual shadow DOM and does not have elementFromPoint method, use the one on document\n    var elementAtPosition = elementFromPoint(root, {\n      x: e.pageX - window.pageXOffset,\n      y: e.pageY - window.pageYOffset\n    });\n\n    // test if target is the element or if one of its children is\n    return elementAtPosition === target || target.contains(elementAtPosition);\n  };\n\n  var initialTarget = null;\n\n  var setDropEffect = function setDropEffect(dataTransfer, effect) {\n    // is in try catch as IE11 will throw error if not\n    try {\n      dataTransfer.dropEffect = effect;\n    } catch (e) {}\n  };\n\n  var dragenter = function dragenter(root, clients) {\n    return function(e) {\n      e.preventDefault();\n\n      initialTarget = e.target;\n\n      clients.forEach(function(client) {\n        var element = client.element,\n          onenter = client.onenter;\n\n        if (isEventTarget(e, element)) {\n          client.state = 'enter';\n\n          // fire enter event\n          onenter(eventPosition(e));\n        }\n      });\n    };\n  };\n\n  var dragover = function dragover(root, clients) {\n    return function(e) {\n      e.preventDefault();\n\n      var dataTransfer = e.dataTransfer;\n\n      requestDataTransferItems(dataTransfer).then(function(items) {\n        var overDropTarget = false;\n\n        clients.some(function(client) {\n          var filterElement = client.filterElement,\n            element = client.element,\n            onenter = client.onenter,\n            onexit = client.onexit,\n            ondrag = client.ondrag,\n            allowdrop = client.allowdrop;\n\n          // by default we can drop\n          setDropEffect(dataTransfer, 'copy');\n\n          // allow transfer of these items\n          var allowsTransfer = allowdrop(items);\n\n          // only used when can be dropped on page\n          if (!allowsTransfer) {\n            setDropEffect(dataTransfer, 'none');\n            return;\n          }\n\n          // targetting this client\n          if (isEventTarget(e, element)) {\n            overDropTarget = true;\n\n            // had no previous state, means we are entering this client\n            if (client.state === null) {\n              client.state = 'enter';\n              onenter(eventPosition(e));\n              return;\n            }\n\n            // now over element (no matter if it allows the drop or not)\n            client.state = 'over';\n\n            // needs to allow transfer\n            if (filterElement && !allowsTransfer) {\n              setDropEffect(dataTransfer, 'none');\n              return;\n            }\n\n            // dragging\n            ondrag(eventPosition(e));\n          } else {\n            // should be over an element to drop\n            if (filterElement && !overDropTarget) {\n              setDropEffect(dataTransfer, 'none');\n            }\n\n            // might have just left this client?\n            if (client.state) {\n              client.state = null;\n              onexit(eventPosition(e));\n            }\n          }\n        });\n      });\n    };\n  };\n\n  var drop = function drop(root, clients) {\n    return function(e) {\n      e.preventDefault();\n\n      var dataTransfer = e.dataTransfer;\n\n      requestDataTransferItems(dataTransfer).then(function(items) {\n        clients.forEach(function(client) {\n          var filterElement = client.filterElement,\n            element = client.element,\n            ondrop = client.ondrop,\n            onexit = client.onexit,\n            allowdrop = client.allowdrop;\n\n          client.state = null;\n\n          // if we're filtering on element we need to be over the element to drop\n          if (filterElement && !isEventTarget(e, element)) return;\n\n          // no transfer for this client\n          if (!allowdrop(items)) return onexit(eventPosition(e));\n\n          // we can drop these items on this client\n          ondrop(eventPosition(e), items);\n        });\n      });\n    };\n  };\n\n  var dragleave = function dragleave(root, clients) {\n    return function(e) {\n      if (initialTarget !== e.target) {\n        return;\n      }\n\n      clients.forEach(function(client) {\n        var onexit = client.onexit;\n\n        client.state = null;\n\n        onexit(eventPosition(e));\n      });\n    };\n  };\n\n  var createHopper = function createHopper(scope, validateItems, options) {\n    // is now hopper scope\n    scope.classList.add('filepond--hopper');\n\n    // shortcuts\n    var catchesDropsOnPage = options.catchesDropsOnPage,\n      requiresDropOnElement = options.requiresDropOnElement,\n      _options$filterItems = options.filterItems,\n      filterItems =\n        _options$filterItems === void 0\n          ? function(items) {\n              return items;\n            }\n          : _options$filterItems;\n\n    // create a dnd client\n    var client = createDragNDropClient(\n      scope,\n      catchesDropsOnPage ? document.documentElement : scope,\n      requiresDropOnElement\n    );\n\n    // current client state\n    var lastState = '';\n    var currentState = '';\n\n    // determines if a file may be dropped\n    client.allowdrop = function(items) {\n      // TODO: if we can, throw error to indicate the items cannot by dropped\n\n      return validateItems(filterItems(items));\n    };\n\n    client.ondrop = function(position, items) {\n      var filteredItems = filterItems(items);\n\n      if (!validateItems(filteredItems)) {\n        api.ondragend(position);\n        return;\n      }\n\n      currentState = 'drag-drop';\n\n      api.onload(filteredItems, position);\n    };\n\n    client.ondrag = function(position) {\n      api.ondrag(position);\n    };\n\n    client.onenter = function(position) {\n      currentState = 'drag-over';\n\n      api.ondragstart(position);\n    };\n\n    client.onexit = function(position) {\n      currentState = 'drag-exit';\n\n      api.ondragend(position);\n    };\n\n    var api = {\n      updateHopperState: function updateHopperState() {\n        if (lastState !== currentState) {\n          scope.dataset.hopperState = currentState;\n          lastState = currentState;\n        }\n      },\n      onload: function onload() {},\n      ondragstart: function ondragstart() {},\n      ondrag: function ondrag() {},\n      ondragend: function ondragend() {},\n      destroy: function destroy() {\n        // destroy client\n        client.destroy();\n      }\n    };\n\n    return api;\n  };\n\n  var listening = false;\n  var listeners$1 = [];\n\n  var handlePaste = function handlePaste(e) {\n    // if is pasting in input or textarea and the target is outside of a filepond scope, ignore\n    var activeEl = document.activeElement;\n    if (activeEl && /textarea|input/i.test(activeEl.nodeName)) {\n      // test textarea or input is contained in filepond root\n      var inScope = false;\n      var element = activeEl;\n      while (element !== document.body) {\n        if (element.classList.contains('filepond--root')) {\n          inScope = true;\n          break;\n        }\n        element = element.parentNode;\n      }\n\n      if (!inScope) return;\n    }\n\n    requestDataTransferItems(e.clipboardData).then(function(files) {\n      // no files received\n      if (!files.length) {\n        return;\n      }\n\n      // notify listeners of received files\n      listeners$1.forEach(function(listener) {\n        return listener(files);\n      });\n    });\n  };\n\n  var listen = function listen(cb) {\n    // can't add twice\n    if (listeners$1.includes(cb)) {\n      return;\n    }\n\n    // add initial listener\n    listeners$1.push(cb);\n\n    // setup paste listener for entire page\n    if (listening) {\n      return;\n    }\n\n    listening = true;\n    document.addEventListener('paste', handlePaste);\n  };\n\n  var unlisten = function unlisten(listener) {\n    arrayRemove(listeners$1, listeners$1.indexOf(listener));\n\n    // clean up\n    if (listeners$1.length === 0) {\n      document.removeEventListener('paste', handlePaste);\n      listening = false;\n    }\n  };\n\n  var createPaster = function createPaster() {\n    var cb = function cb(files) {\n      api.onload(files);\n    };\n\n    var api = {\n      destroy: function destroy() {\n        unlisten(cb);\n      },\n      onload: function onload() {}\n    };\n\n    listen(cb);\n\n    return api;\n  };\n\n  /**\n   * Creates the file view\n   */\n  var create$d = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n    root.element.id = 'filepond--assistant-' + props.id;\n    attr(root.element, 'role', 'status');\n    attr(root.element, 'aria-live', 'polite');\n    attr(root.element, 'aria-relevant', 'additions');\n  };\n\n  var addFilesNotificationTimeout = null;\n  var notificationClearTimeout = null;\n\n  var filenames = [];\n\n  var assist = function assist(root, message) {\n    root.element.textContent = message;\n  };\n\n  var clear$1 = function clear(root) {\n    root.element.textContent = '';\n  };\n\n  var listModified = function listModified(root, filename, label) {\n    var total = root.query('GET_TOTAL_ITEMS');\n    assist(\n      root,\n      label +\n        ' ' +\n        filename +\n        ', ' +\n        total +\n        ' ' +\n        (total === 1\n          ? root.query('GET_LABEL_FILE_COUNT_SINGULAR')\n          : root.query('GET_LABEL_FILE_COUNT_PLURAL'))\n    );\n\n    // clear group after set amount of time so the status is not read twice\n    clearTimeout(notificationClearTimeout);\n    notificationClearTimeout = setTimeout(function() {\n      clear$1(root);\n    }, 1500);\n  };\n\n  var isUsingFilePond = function isUsingFilePond(root) {\n    return root.element.parentNode.contains(document.activeElement);\n  };\n\n  var itemAdded = function itemAdded(_ref2) {\n    var root = _ref2.root,\n      action = _ref2.action;\n    if (!isUsingFilePond(root)) {\n      return;\n    }\n\n    root.element.textContent = '';\n    var item = root.query('GET_ITEM', action.id);\n    filenames.push(item.filename);\n\n    clearTimeout(addFilesNotificationTimeout);\n    addFilesNotificationTimeout = setTimeout(function() {\n      listModified(\n        root,\n        filenames.join(', '),\n        root.query('GET_LABEL_FILE_ADDED')\n      );\n\n      filenames.length = 0;\n    }, 750);\n  };\n\n  var itemRemoved = function itemRemoved(_ref3) {\n    var root = _ref3.root,\n      action = _ref3.action;\n    if (!isUsingFilePond(root)) {\n      return;\n    }\n\n    var item = action.item;\n    listModified(root, item.filename, root.query('GET_LABEL_FILE_REMOVED'));\n  };\n\n  var itemProcessed = function itemProcessed(_ref4) {\n    var root = _ref4.root,\n      action = _ref4.action;\n    // will also notify the user when FilePond is not being used, as the user might be occupied with other activities while uploading a file\n\n    var item = root.query('GET_ITEM', action.id);\n    var filename = item.filename;\n    var label = root.query('GET_LABEL_FILE_PROCESSING_COMPLETE');\n\n    assist(root, filename + ' ' + label);\n  };\n\n  var itemProcessedUndo = function itemProcessedUndo(_ref5) {\n    var root = _ref5.root,\n      action = _ref5.action;\n    var item = root.query('GET_ITEM', action.id);\n    var filename = item.filename;\n    var label = root.query('GET_LABEL_FILE_PROCESSING_ABORTED');\n\n    assist(root, filename + ' ' + label);\n  };\n\n  var itemError = function itemError(_ref6) {\n    var root = _ref6.root,\n      action = _ref6.action;\n    var item = root.query('GET_ITEM', action.id);\n    var filename = item.filename;\n\n    // will also notify the user when FilePond is not being used, as the user might be occupied with other activities while uploading a file\n\n    assist(root, action.status.main + ' ' + filename + ' ' + action.status.sub);\n  };\n\n  var assistant = createView({\n    create: create$d,\n    ignoreRect: true,\n    ignoreRectUpdate: true,\n    write: createRoute({\n      DID_LOAD_ITEM: itemAdded,\n      DID_REMOVE_ITEM: itemRemoved,\n      DID_COMPLETE_ITEM_PROCESSING: itemProcessed,\n\n      DID_ABORT_ITEM_PROCESSING: itemProcessedUndo,\n      DID_REVERT_ITEM_PROCESSING: itemProcessedUndo,\n\n      DID_THROW_ITEM_REMOVE_ERROR: itemError,\n      DID_THROW_ITEM_LOAD_ERROR: itemError,\n      DID_THROW_ITEM_INVALID: itemError,\n      DID_THROW_ITEM_PROCESSING_ERROR: itemError\n    }),\n\n    tag: 'span',\n    name: 'assistant'\n  });\n\n  var toCamels = function toCamels(string) {\n    var separator =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '-';\n    return string.replace(new RegExp(separator + '.', 'g'), function(sub) {\n      return sub.charAt(1).toUpperCase();\n    });\n  };\n\n  var debounce = function debounce(func) {\n    var interval =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 16;\n    var immidiateOnly =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    var last = Date.now();\n    var timeout = null;\n\n    return function() {\n      for (\n        var _len = arguments.length, args = new Array(_len), _key = 0;\n        _key < _len;\n        _key++\n      ) {\n        args[_key] = arguments[_key];\n      }\n      clearTimeout(timeout);\n\n      var dist = Date.now() - last;\n\n      var fn = function fn() {\n        last = Date.now();\n        func.apply(void 0, args);\n      };\n\n      if (dist < interval) {\n        // we need to delay by the difference between interval and dist\n        // for example: if distance is 10 ms and interval is 16 ms,\n        // we need to wait an additional 6ms before calling the function)\n        if (!immidiateOnly) {\n          timeout = setTimeout(fn, interval - dist);\n        }\n      } else {\n        // go!\n        fn();\n      }\n    };\n  };\n\n  var MAX_FILES_LIMIT = 1000000;\n\n  var prevent = function prevent(e) {\n    return e.preventDefault();\n  };\n\n  var create$e = function create(_ref) {\n    var root = _ref.root,\n      props = _ref.props;\n\n    // Add id\n    var id = root.query('GET_ID');\n    if (id) {\n      root.element.id = id;\n    }\n\n    // Add className\n    var className = root.query('GET_CLASS_NAME');\n    if (className) {\n      className\n        .split(' ')\n        .filter(function(name) {\n          return name.length;\n        })\n        .forEach(function(name) {\n          root.element.classList.add(name);\n        });\n    }\n\n    // Field label\n    root.ref.label = root.appendChildView(\n      root.createChildView(\n        dropLabel,\n        Object.assign({}, props, {\n          translateY: null,\n          caption: root.query('GET_LABEL_IDLE')\n        })\n      )\n    );\n\n    // List of items\n    root.ref.list = root.appendChildView(\n      root.createChildView(listScroller, { translateY: null })\n    );\n\n    // Background panel\n    root.ref.panel = root.appendChildView(\n      root.createChildView(panel, { name: 'panel-root' })\n    );\n\n    // Assistant notifies assistive tech when content changes\n    root.ref.assistant = root.appendChildView(\n      root.createChildView(assistant, Object.assign({}, props))\n    );\n\n    // Data\n    root.ref.data = root.appendChildView(\n      root.createChildView(data, Object.assign({}, props))\n    );\n\n    // Measure (tests if fixed height was set)\n    // DOCTYPE needs to be set for this to work\n    root.ref.measure = createElement$1('div');\n    root.ref.measure.style.height = '100%';\n    root.element.appendChild(root.ref.measure);\n\n    // information on the root height or fixed height status\n    root.ref.bounds = null;\n\n    // apply initial style properties\n    root\n      .query('GET_STYLES')\n      .filter(function(style) {\n        return !isEmpty(style.value);\n      })\n      .map(function(_ref2) {\n        var name = _ref2.name,\n          value = _ref2.value;\n        root.element.dataset[name] = value;\n      });\n\n    // determine if width changed\n    root.ref.widthPrevious = null;\n    root.ref.widthUpdated = debounce(function() {\n      root.ref.updateHistory = [];\n      root.dispatch('DID_RESIZE_ROOT');\n    }, 250);\n\n    // history of updates\n    root.ref.previousAspectRatio = null;\n    root.ref.updateHistory = [];\n\n    // prevent scrolling and zooming on iOS (only if supports pointer events, for then we can enable reorder)\n    var canHover = window.matchMedia('(pointer: fine) and (hover: hover)')\n      .matches;\n    var hasPointerEvents = 'PointerEvent' in window;\n    if (root.query('GET_ALLOW_REORDER') && hasPointerEvents && !canHover) {\n      root.element.addEventListener('touchmove', prevent, { passive: false });\n      root.element.addEventListener('gesturestart', prevent);\n    }\n  };\n\n  var write$9 = function write(_ref3) {\n    var root = _ref3.root,\n      props = _ref3.props,\n      actions = _ref3.actions;\n\n    // route actions\n    route$5({ root: root, props: props, actions: actions });\n\n    // apply style properties\n    actions\n      .filter(function(action) {\n        return /^DID_SET_STYLE_/.test(action.type);\n      })\n      .filter(function(action) {\n        return !isEmpty(action.data.value);\n      })\n      .map(function(_ref4) {\n        var type = _ref4.type,\n          data = _ref4.data;\n        var name = toCamels(type.substr(8).toLowerCase(), '_');\n        root.element.dataset[name] = data.value;\n        root.invalidateLayout();\n      });\n\n    if (root.rect.element.hidden) return;\n\n    if (root.rect.element.width !== root.ref.widthPrevious) {\n      root.ref.widthPrevious = root.rect.element.width;\n      root.ref.widthUpdated();\n    }\n\n    // get box bounds, we do this only once\n    var bounds = root.ref.bounds;\n    if (!bounds) {\n      bounds = root.ref.bounds = calculateRootBoundingBoxHeight(root);\n\n      // destroy measure element\n      root.element.removeChild(root.ref.measure);\n      root.ref.measure = null;\n    }\n\n    // get quick references to various high level parts of the upload tool\n    var _root$ref = root.ref,\n      hopper = _root$ref.hopper,\n      label = _root$ref.label,\n      list = _root$ref.list,\n      panel = _root$ref.panel;\n\n    // sets correct state to hopper scope\n    if (hopper) {\n      hopper.updateHopperState();\n    }\n\n    // bool to indicate if we're full or not\n    var aspectRatio = root.query('GET_PANEL_ASPECT_RATIO');\n    var isMultiItem = root.query('GET_ALLOW_MULTIPLE');\n    var totalItems = root.query('GET_TOTAL_ITEMS');\n    var maxItems = isMultiItem\n      ? root.query('GET_MAX_FILES') || MAX_FILES_LIMIT\n      : 1;\n    var atMaxCapacity = totalItems === maxItems;\n\n    // action used to add item\n    var addAction = actions.find(function(action) {\n      return action.type === 'DID_ADD_ITEM';\n    });\n\n    // if reached max capacity and we've just reached it\n    if (atMaxCapacity && addAction) {\n      // get interaction type\n      var interactionMethod = addAction.data.interactionMethod;\n\n      // hide label\n      label.opacity = 0;\n\n      if (isMultiItem) {\n        label.translateY = -40;\n      } else {\n        if (interactionMethod === InteractionMethod.API) {\n          label.translateX = 40;\n        } else if (interactionMethod === InteractionMethod.BROWSE) {\n          label.translateY = 40;\n        } else {\n          label.translateY = 30;\n        }\n      }\n    } else if (!atMaxCapacity) {\n      label.opacity = 1;\n      label.translateX = 0;\n      label.translateY = 0;\n    }\n\n    var listItemMargin = calculateListItemMargin(root);\n\n    var listHeight = calculateListHeight(root);\n\n    var labelHeight = label.rect.element.height;\n    var currentLabelHeight = !isMultiItem || atMaxCapacity ? 0 : labelHeight;\n\n    var listMarginTop = atMaxCapacity ? list.rect.element.marginTop : 0;\n    var listMarginBottom =\n      totalItems === 0 ? 0 : list.rect.element.marginBottom;\n\n    var visualHeight =\n      currentLabelHeight + listMarginTop + listHeight.visual + listMarginBottom;\n    var boundsHeight =\n      currentLabelHeight + listMarginTop + listHeight.bounds + listMarginBottom;\n\n    // link list to label bottom position\n    list.translateY =\n      Math.max(0, currentLabelHeight - list.rect.element.marginTop) -\n      listItemMargin.top;\n\n    if (aspectRatio) {\n      // fixed aspect ratio\n\n      // calculate height based on width\n      var width = root.rect.element.width;\n      var height = width * aspectRatio;\n\n      // clear history if aspect ratio has changed\n      if (aspectRatio !== root.ref.previousAspectRatio) {\n        root.ref.previousAspectRatio = aspectRatio;\n        root.ref.updateHistory = [];\n      }\n\n      // remember this width\n      var history = root.ref.updateHistory;\n      history.push(width);\n\n      var MAX_BOUNCES = 2;\n      if (history.length > MAX_BOUNCES * 2) {\n        var l = history.length;\n        var bottom = l - 10;\n        var bounces = 0;\n        for (var i = l; i >= bottom; i--) {\n          if (history[i] === history[i - 2]) {\n            bounces++;\n          }\n\n          if (bounces >= MAX_BOUNCES) {\n            // dont adjust height\n            return;\n          }\n        }\n      }\n\n      // fix height of panel so it adheres to aspect ratio\n      panel.scalable = false;\n      panel.height = height;\n\n      // available height for list\n      var listAvailableHeight =\n        // the height of the panel minus the label height\n        height -\n        currentLabelHeight -\n        // the room we leave open between the end of the list and the panel bottom\n        (listMarginBottom - listItemMargin.bottom) -\n        // if we're full we need to leave some room between the top of the panel and the list\n        (atMaxCapacity ? listMarginTop : 0);\n\n      if (listHeight.visual > listAvailableHeight) {\n        list.overflow = listAvailableHeight;\n      } else {\n        list.overflow = null;\n      }\n\n      // set container bounds (so pushes siblings downwards)\n      root.height = height;\n    } else if (bounds.fixedHeight) {\n      // fixed height\n\n      // fix height of panel\n      panel.scalable = false;\n\n      // available height for list\n      var _listAvailableHeight =\n        // the height of the panel minus the label height\n        bounds.fixedHeight -\n        currentLabelHeight -\n        // the room we leave open between the end of the list and the panel bottom\n        (listMarginBottom - listItemMargin.bottom) -\n        // if we're full we need to leave some room between the top of the panel and the list\n        (atMaxCapacity ? listMarginTop : 0);\n\n      // set list height\n      if (listHeight.visual > _listAvailableHeight) {\n        list.overflow = _listAvailableHeight;\n      } else {\n        list.overflow = null;\n      }\n\n      // no need to set container bounds as these are handles by CSS fixed height\n    } else if (bounds.cappedHeight) {\n      // max-height\n\n      // not a fixed height panel\n      var isCappedHeight = visualHeight >= bounds.cappedHeight;\n      var panelHeight = Math.min(bounds.cappedHeight, visualHeight);\n      panel.scalable = true;\n      panel.height = isCappedHeight\n        ? panelHeight\n        : panelHeight - listItemMargin.top - listItemMargin.bottom;\n\n      // available height for list\n      var _listAvailableHeight2 =\n        // the height of the panel minus the label height\n        panelHeight -\n        currentLabelHeight -\n        // the room we leave open between the end of the list and the panel bottom\n        (listMarginBottom - listItemMargin.bottom) -\n        // if we're full we need to leave some room between the top of the panel and the list\n        (atMaxCapacity ? listMarginTop : 0);\n\n      // set list height (if is overflowing)\n      if (\n        visualHeight > bounds.cappedHeight &&\n        listHeight.visual > _listAvailableHeight2\n      ) {\n        list.overflow = _listAvailableHeight2;\n      } else {\n        list.overflow = null;\n      }\n\n      // set container bounds (so pushes siblings downwards)\n      root.height = Math.min(\n        bounds.cappedHeight,\n        boundsHeight - listItemMargin.top - listItemMargin.bottom\n      );\n    } else {\n      // flexible height\n\n      // not a fixed height panel\n      var itemMargin =\n        totalItems > 0 ? listItemMargin.top + listItemMargin.bottom : 0;\n      panel.scalable = true;\n      panel.height = Math.max(labelHeight, visualHeight - itemMargin);\n\n      // set container bounds (so pushes siblings downwards)\n      root.height = Math.max(labelHeight, boundsHeight - itemMargin);\n    }\n  };\n\n  var calculateListItemMargin = function calculateListItemMargin(root) {\n    var item = root.ref.list.childViews[0].childViews[0];\n    return item\n      ? {\n          top: item.rect.element.marginTop,\n          bottom: item.rect.element.marginBottom\n        }\n      : {\n          top: 0,\n          bottom: 0\n        };\n  };\n\n  var calculateListHeight = function calculateListHeight(root) {\n    var visual = 0;\n    var bounds = 0;\n\n    // get file list reference\n    var scrollList = root.ref.list;\n    var itemList = scrollList.childViews[0];\n    var visibleChildren = itemList.childViews.filter(function(child) {\n      return child.rect.element.height;\n    });\n    var children = root\n      .query('GET_ACTIVE_ITEMS')\n      .map(function(item) {\n        return visibleChildren.find(function(child) {\n          return child.id === item.id;\n        });\n      })\n      .filter(function(item) {\n        return item;\n      });\n\n    // no children, done!\n    if (children.length === 0) return { visual: visual, bounds: bounds };\n\n    var horizontalSpace = itemList.rect.element.width;\n    var dragIndex = getItemIndexByPosition(\n      itemList,\n      children,\n      scrollList.dragCoordinates\n    );\n\n    var childRect = children[0].rect.element;\n\n    var itemVerticalMargin = childRect.marginTop + childRect.marginBottom;\n    var itemHorizontalMargin = childRect.marginLeft + childRect.marginRight;\n\n    var itemWidth = childRect.width + itemHorizontalMargin;\n    var itemHeight = childRect.height + itemVerticalMargin;\n\n    var newItem = typeof dragIndex !== 'undefined' && dragIndex >= 0 ? 1 : 0;\n    var removedItem = children.find(function(child) {\n      return child.markedForRemoval && child.opacity < 0.45;\n    })\n      ? -1\n      : 0;\n    var verticalItemCount = children.length + newItem + removedItem;\n    var itemsPerRow = Math.round(horizontalSpace / itemWidth);\n\n    // stack\n    if (itemsPerRow === 1) {\n      children.forEach(function(item) {\n        var height = item.rect.element.height + itemVerticalMargin;\n        bounds += height;\n        visual += height * item.opacity;\n      });\n    }\n    // grid\n    else {\n      bounds = Math.ceil(verticalItemCount / itemsPerRow) * itemHeight;\n      visual = bounds;\n    }\n\n    return { visual: visual, bounds: bounds };\n  };\n\n  var calculateRootBoundingBoxHeight = function calculateRootBoundingBoxHeight(\n    root\n  ) {\n    var height = root.ref.measureHeight || null;\n    var cappedHeight = parseInt(root.style.maxHeight, 10) || null;\n    var fixedHeight = height === 0 ? null : height;\n\n    return {\n      cappedHeight: cappedHeight,\n      fixedHeight: fixedHeight\n    };\n  };\n\n  var exceedsMaxFiles = function exceedsMaxFiles(root, items) {\n    var allowReplace = root.query('GET_ALLOW_REPLACE');\n    var allowMultiple = root.query('GET_ALLOW_MULTIPLE');\n    var totalItems = root.query('GET_TOTAL_ITEMS');\n    var maxItems = root.query('GET_MAX_FILES');\n\n    // total amount of items being dragged\n    var totalBrowseItems = items.length;\n\n    // if does not allow multiple items and dragging more than one item\n    if (!allowMultiple && totalBrowseItems > 1) {\n      return true;\n    }\n\n    // limit max items to one if not allowed to drop multiple items\n    maxItems = allowMultiple ? maxItems : allowReplace ? maxItems : 1;\n\n    // no more room?\n    var hasMaxItems = isInt(maxItems);\n    if (hasMaxItems && totalItems + totalBrowseItems > maxItems) {\n      root.dispatch('DID_THROW_MAX_FILES', {\n        source: items,\n        error: createResponse('warning', 0, 'Max files')\n      });\n\n      return true;\n    }\n\n    return false;\n  };\n\n  var getDragIndex = function getDragIndex(list, children, position) {\n    var itemList = list.childViews[0];\n    return getItemIndexByPosition(itemList, children, {\n      left: position.scopeLeft - itemList.rect.element.left,\n      top:\n        position.scopeTop -\n        (list.rect.outer.top +\n          list.rect.element.marginTop +\n          list.rect.element.scrollTop)\n    });\n  };\n\n  /**\n   * Enable or disable file drop functionality\n   */\n  var toggleDrop = function toggleDrop(root) {\n    var isAllowed = root.query('GET_ALLOW_DROP');\n    var isDisabled = root.query('GET_DISABLED');\n    var enabled = isAllowed && !isDisabled;\n    if (enabled && !root.ref.hopper) {\n      var hopper = createHopper(\n        root.element,\n        function(items) {\n          // these files don't fit so stop here\n          if (exceedsMaxFiles(root, items)) return false;\n\n          // allow quick validation of dropped items\n          var beforeDropFile =\n            root.query('GET_BEFORE_DROP_FILE') ||\n            function() {\n              return true;\n            };\n\n          // all items should be validated by all filters as valid\n          var dropValidation = root.query('GET_DROP_VALIDATION');\n          return dropValidation\n            ? items.every(function(item) {\n                return (\n                  applyFilters('ALLOW_HOPPER_ITEM', item, {\n                    query: root.query\n                  }).every(function(result) {\n                    return result === true;\n                  }) && beforeDropFile(item)\n                );\n              })\n            : true;\n        },\n        {\n          filterItems: function filterItems(items) {\n            var ignoredFiles = root.query('GET_IGNORED_FILES');\n            return items.filter(function(item) {\n              if (isFile(item)) {\n                return !ignoredFiles.includes(item.name.toLowerCase());\n              }\n              return true;\n            });\n          },\n          catchesDropsOnPage: root.query('GET_DROP_ON_PAGE'),\n          requiresDropOnElement: root.query('GET_DROP_ON_ELEMENT')\n        }\n      );\n\n      hopper.onload = function(items, position) {\n        // get item children elements and sort based on list sort\n        var list = root.ref.list.childViews[0];\n        var visibleChildren = list.childViews.filter(function(child) {\n          return child.rect.element.height;\n        });\n        var children = root\n          .query('GET_ACTIVE_ITEMS')\n          .map(function(item) {\n            return visibleChildren.find(function(child) {\n              return child.id === item.id;\n            });\n          })\n          .filter(function(item) {\n            return item;\n          });\n\n        // go\n        root.dispatch('ADD_ITEMS', {\n          items: items,\n          index: getDragIndex(root.ref.list, children, position),\n          interactionMethod: InteractionMethod.DROP\n        });\n\n        root.dispatch('DID_DROP', { position: position });\n\n        root.dispatch('DID_END_DRAG', { position: position });\n      };\n\n      hopper.ondragstart = function(position) {\n        root.dispatch('DID_START_DRAG', { position: position });\n      };\n\n      hopper.ondrag = debounce(function(position) {\n        root.dispatch('DID_DRAG', { position: position });\n      });\n\n      hopper.ondragend = function(position) {\n        root.dispatch('DID_END_DRAG', { position: position });\n      };\n\n      root.ref.hopper = hopper;\n\n      root.ref.drip = root.appendChildView(root.createChildView(drip));\n    } else if (!enabled && root.ref.hopper) {\n      root.ref.hopper.destroy();\n      root.ref.hopper = null;\n      root.removeChildView(root.ref.drip);\n    }\n  };\n\n  /**\n   * Enable or disable browse functionality\n   */\n  var toggleBrowse = function toggleBrowse(root, props) {\n    var isAllowed = root.query('GET_ALLOW_BROWSE');\n    var isDisabled = root.query('GET_DISABLED');\n    var enabled = isAllowed && !isDisabled;\n    if (enabled && !root.ref.browser) {\n      root.ref.browser = root.appendChildView(\n        root.createChildView(\n          browser,\n          Object.assign({}, props, {\n            onload: function onload(items) {\n              // these files don't fit so stop here\n              if (exceedsMaxFiles(root, items)) return false;\n\n              // add items!\n              root.dispatch('ADD_ITEMS', {\n                items: items,\n                index: -1,\n                interactionMethod: InteractionMethod.BROWSE\n              });\n            }\n          })\n        ),\n\n        0\n      );\n    } else if (!enabled && root.ref.browser) {\n      root.removeChildView(root.ref.browser);\n      root.ref.browser = null;\n    }\n  };\n\n  /**\n   * Enable or disable paste functionality\n   */\n  var togglePaste = function togglePaste(root) {\n    var isAllowed = root.query('GET_ALLOW_PASTE');\n    var isDisabled = root.query('GET_DISABLED');\n    var enabled = isAllowed && !isDisabled;\n    if (enabled && !root.ref.paster) {\n      root.ref.paster = createPaster();\n      root.ref.paster.onload = function(items) {\n        root.dispatch('ADD_ITEMS', {\n          items: items,\n          index: -1,\n          interactionMethod: InteractionMethod.PASTE\n        });\n      };\n    } else if (!enabled && root.ref.paster) {\n      root.ref.paster.destroy();\n      root.ref.paster = null;\n    }\n  };\n\n  /**\n   * Route actions\n   */\n  var route$5 = createRoute({\n    DID_SET_ALLOW_BROWSE: function DID_SET_ALLOW_BROWSE(_ref5) {\n      var root = _ref5.root,\n        props = _ref5.props;\n      toggleBrowse(root, props);\n    },\n    DID_SET_ALLOW_DROP: function DID_SET_ALLOW_DROP(_ref6) {\n      var root = _ref6.root;\n      toggleDrop(root);\n    },\n    DID_SET_ALLOW_PASTE: function DID_SET_ALLOW_PASTE(_ref7) {\n      var root = _ref7.root;\n      togglePaste(root);\n    },\n    DID_SET_DISABLED: function DID_SET_DISABLED(_ref8) {\n      var root = _ref8.root,\n        props = _ref8.props;\n      toggleDrop(root);\n      togglePaste(root);\n      toggleBrowse(root, props);\n      var isDisabled = root.query('GET_DISABLED');\n      if (isDisabled) {\n        root.element.dataset.disabled = 'disabled';\n      } else {\n        // delete root.element.dataset.disabled; <= this does not work on iOS 10\n        root.element.removeAttribute('data-disabled');\n      }\n    }\n  });\n\n  var root = createView({\n    name: 'root',\n    read: function read(_ref9) {\n      var root = _ref9.root;\n      if (root.ref.measure) {\n        root.ref.measureHeight = root.ref.measure.offsetHeight;\n      }\n    },\n    create: create$e,\n    write: write$9,\n    destroy: function destroy(_ref10) {\n      var root = _ref10.root;\n      if (root.ref.paster) {\n        root.ref.paster.destroy();\n      }\n      if (root.ref.hopper) {\n        root.ref.hopper.destroy();\n      }\n      root.element.removeEventListener('touchmove', prevent);\n      root.element.removeEventListener('gesturestart', prevent);\n    },\n    mixins: {\n      styles: ['height']\n    }\n  });\n\n  // creates the app\n  var createApp = function createApp() {\n    var initialOptions =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    // let element\n    var originalElement = null;\n\n    // get default options\n    var defaultOptions = getOptions();\n\n    // create the data store, this will contain all our app info\n    var store = createStore(\n      // initial state (should be serializable)\n      createInitialState(defaultOptions),\n\n      // queries\n      [queries, createOptionQueries(defaultOptions)],\n\n      // action handlers\n      [actions, createOptionActions(defaultOptions)]\n    );\n\n    // set initial options\n    store.dispatch('SET_OPTIONS', { options: initialOptions });\n\n    // kick thread if visibility changes\n    var visibilityHandler = function visibilityHandler() {\n      if (document.hidden) return;\n      store.dispatch('KICK');\n    };\n    document.addEventListener('visibilitychange', visibilityHandler);\n\n    // re-render on window resize start and finish\n    var resizeDoneTimer = null;\n    var isResizing = false;\n    var isResizingHorizontally = false;\n    var initialWindowWidth = null;\n    var currentWindowWidth = null;\n    var resizeHandler = function resizeHandler() {\n      if (!isResizing) {\n        isResizing = true;\n      }\n      clearTimeout(resizeDoneTimer);\n      resizeDoneTimer = setTimeout(function() {\n        isResizing = false;\n        initialWindowWidth = null;\n        currentWindowWidth = null;\n        if (isResizingHorizontally) {\n          isResizingHorizontally = false;\n          store.dispatch('DID_STOP_RESIZE');\n        }\n      }, 500);\n    };\n    window.addEventListener('resize', resizeHandler);\n\n    // render initial view\n    var view = root(store, { id: getUniqueId() });\n\n    //\n    // PRIVATE API -------------------------------------------------------------------------------------\n    //\n    var isResting = false;\n    var isHidden = false;\n\n    var readWriteApi = {\n      // necessary for update loop\n\n      /**\n       * Reads from dom (never call manually)\n       * @private\n       */\n      _read: function _read() {\n        // test if we're resizing horizontally\n        // TODO: see if we can optimize this by measuring root rect\n        if (isResizing) {\n          currentWindowWidth = window.innerWidth;\n          if (!initialWindowWidth) {\n            initialWindowWidth = currentWindowWidth;\n          }\n\n          if (\n            !isResizingHorizontally &&\n            currentWindowWidth !== initialWindowWidth\n          ) {\n            store.dispatch('DID_START_RESIZE');\n            isResizingHorizontally = true;\n          }\n        }\n\n        if (isHidden && isResting) {\n          // test if is no longer hidden\n          isResting = view.element.offsetParent === null;\n        }\n\n        // if resting, no need to read as numbers will still all be correct\n        if (isResting) return;\n\n        // read view data\n        view._read();\n\n        // if is hidden we need to know so we exit rest mode when revealed\n        isHidden = view.rect.element.hidden;\n      },\n\n      /**\n       * Writes to dom (never call manually)\n       * @private\n       */\n      _write: function _write(ts) {\n        // get all actions from store\n        var actions = store\n          .processActionQueue()\n\n          // filter out set actions (these will automatically trigger DID_SET)\n          .filter(function(action) {\n            return !/^SET_/.test(action.type);\n          });\n\n        // if was idling and no actions stop here\n        if (isResting && !actions.length) return;\n\n        // some actions might trigger events\n        routeActionsToEvents(actions);\n\n        // update the view\n        isResting = view._write(ts, actions, isResizingHorizontally);\n\n        // will clean up all archived items\n        removeReleasedItems(store.query('GET_ITEMS'));\n\n        // now idling\n        if (isResting) {\n          store.processDispatchQueue();\n        }\n      }\n    };\n\n    //\n    // EXPOSE EVENTS -------------------------------------------------------------------------------------\n    //\n    var createEvent = function createEvent(name) {\n      return function(data) {\n        // create default event\n        var event = {\n          type: name\n        };\n\n        // no data to add\n        if (!data) {\n          return event;\n        }\n\n        // copy relevant props\n        if (data.hasOwnProperty('error')) {\n          event.error = data.error ? Object.assign({}, data.error) : null;\n        }\n\n        if (data.status) {\n          event.status = Object.assign({}, data.status);\n        }\n\n        if (data.file) {\n          event.output = data.file;\n        }\n\n        // only source is available, else add item if possible\n        if (data.source) {\n          event.file = data.source;\n        } else if (data.item || data.id) {\n          var item = data.item ? data.item : store.query('GET_ITEM', data.id);\n          event.file = item ? createItemAPI(item) : null;\n        }\n\n        // map all items in a possible items array\n        if (data.items) {\n          event.items = data.items.map(createItemAPI);\n        }\n\n        // if this is a progress event add the progress amount\n        if (/progress/.test(name)) {\n          event.progress = data.progress;\n        }\n\n        // copy relevant props\n        if (data.hasOwnProperty('origin') && data.hasOwnProperty('target')) {\n          event.origin = data.origin;\n          event.target = data.target;\n        }\n\n        return event;\n      };\n    };\n\n    var eventRoutes = {\n      DID_DESTROY: createEvent('destroy'),\n\n      DID_INIT: createEvent('init'),\n\n      DID_THROW_MAX_FILES: createEvent('warning'),\n\n      DID_INIT_ITEM: createEvent('initfile'),\n      DID_START_ITEM_LOAD: createEvent('addfilestart'),\n      DID_UPDATE_ITEM_LOAD_PROGRESS: createEvent('addfileprogress'),\n      DID_LOAD_ITEM: createEvent('addfile'),\n\n      DID_THROW_ITEM_INVALID: [createEvent('error'), createEvent('addfile')],\n\n      DID_THROW_ITEM_LOAD_ERROR: [createEvent('error'), createEvent('addfile')],\n\n      DID_THROW_ITEM_REMOVE_ERROR: [\n        createEvent('error'),\n        createEvent('removefile')\n      ],\n\n      DID_PREPARE_OUTPUT: createEvent('preparefile'),\n\n      DID_START_ITEM_PROCESSING: createEvent('processfilestart'),\n      DID_UPDATE_ITEM_PROCESS_PROGRESS: createEvent('processfileprogress'),\n      DID_ABORT_ITEM_PROCESSING: createEvent('processfileabort'),\n      DID_COMPLETE_ITEM_PROCESSING: createEvent('processfile'),\n      DID_COMPLETE_ITEM_PROCESSING_ALL: createEvent('processfiles'),\n      DID_REVERT_ITEM_PROCESSING: createEvent('processfilerevert'),\n\n      DID_THROW_ITEM_PROCESSING_ERROR: [\n        createEvent('error'),\n        createEvent('processfile')\n      ],\n\n      DID_REMOVE_ITEM: createEvent('removefile'),\n\n      DID_UPDATE_ITEMS: createEvent('updatefiles'),\n\n      DID_ACTIVATE_ITEM: createEvent('activatefile'),\n\n      DID_REORDER_ITEMS: createEvent('reorderfiles')\n    };\n\n    var exposeEvent = function exposeEvent(event) {\n      // create event object to be dispatched\n      var detail = Object.assign({ pond: exports }, event);\n      delete detail.type;\n      view.element.dispatchEvent(\n        new CustomEvent('FilePond:' + event.type, {\n          // event info\n          detail: detail,\n\n          // event behaviour\n          bubbles: true,\n          cancelable: true,\n          composed: true // triggers listeners outside of shadow root\n        })\n      );\n\n      // event object to params used for `on()` event handlers and callbacks `oninit()`\n      var params = [];\n\n      // if is possible error event, make it the first param\n      if (event.hasOwnProperty('error')) {\n        params.push(event.error);\n      }\n\n      // file is always section\n      if (event.hasOwnProperty('file')) {\n        params.push(event.file);\n      }\n\n      // append other props\n      var filtered = ['type', 'error', 'file'];\n      Object.keys(event)\n        .filter(function(key) {\n          return !filtered.includes(key);\n        })\n        .forEach(function(key) {\n          return params.push(event[key]);\n        });\n\n      // on(type, () => { })\n      exports.fire.apply(exports, [event.type].concat(params));\n\n      // oninit = () => {}\n      var handler = store.query('GET_ON' + event.type.toUpperCase());\n      if (handler) {\n        handler.apply(void 0, params);\n      }\n    };\n\n    var routeActionsToEvents = function routeActionsToEvents(actions) {\n      if (!actions.length) return;\n      actions\n        .filter(function(action) {\n          return eventRoutes[action.type];\n        })\n        .forEach(function(action) {\n          var routes = eventRoutes[action.type];\n          (Array.isArray(routes) ? routes : [routes]).forEach(function(route) {\n            // this isn't fantastic, but because of the stacking of settimeouts plugins can handle the did_load before the did_init\n            if (action.type === 'DID_INIT_ITEM') {\n              exposeEvent(route(action.data));\n            } else {\n              setTimeout(function() {\n                exposeEvent(route(action.data));\n              }, 0);\n            }\n          });\n        });\n    };\n\n    //\n    // PUBLIC API -------------------------------------------------------------------------------------\n    //\n    var setOptions = function setOptions(options) {\n      return store.dispatch('SET_OPTIONS', { options: options });\n    };\n\n    var getFile = function getFile(query) {\n      return store.query('GET_ACTIVE_ITEM', query);\n    };\n\n    var prepareFile = function prepareFile(query) {\n      return new Promise(function(resolve, reject) {\n        store.dispatch('REQUEST_ITEM_PREPARE', {\n          query: query,\n          success: function success(item) {\n            resolve(item);\n          },\n          failure: function failure(error) {\n            reject(error);\n          }\n        });\n      });\n    };\n\n    var addFile = function addFile(source) {\n      var options =\n        arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return new Promise(function(resolve, reject) {\n        addFiles([{ source: source, options: options }], {\n          index: options.index\n        })\n          .then(function(items) {\n            return resolve(items && items[0]);\n          })\n          .catch(reject);\n      });\n    };\n\n    var removeFile = function removeFile(query, options) {\n      // if only passed options\n      if (typeof query === 'object' && !options) {\n        options = query;\n        query = undefined;\n      }\n\n      // request item removal\n      store.dispatch(\n        'REMOVE_ITEM',\n        Object.assign({}, options, { query: query })\n      );\n\n      // see if item has been removed\n      return store.query('GET_ACTIVE_ITEM', query) === null;\n    };\n\n    var addFiles = function addFiles() {\n      for (\n        var _len = arguments.length, args = new Array(_len), _key = 0;\n        _key < _len;\n        _key++\n      ) {\n        args[_key] = arguments[_key];\n      }\n      return new Promise(function(resolve, reject) {\n        var sources = [];\n        var options = {};\n\n        // user passed a sources array\n        if (isArray(args[0])) {\n          sources.push.apply(sources, args[0]);\n          Object.assign(options, args[1] || {});\n        } else {\n          // user passed sources as arguments, last one might be options object\n          var lastArgument = args[args.length - 1];\n          if (\n            typeof lastArgument === 'object' &&\n            !(lastArgument instanceof Blob)\n          ) {\n            Object.assign(options, args.pop());\n          }\n\n          // add rest to sources\n          sources.push.apply(sources, args);\n        }\n\n        store.dispatch('ADD_ITEMS', {\n          items: sources,\n          index: options.index,\n          interactionMethod: InteractionMethod.API,\n          success: resolve,\n          failure: reject\n        });\n      });\n    };\n\n    var getFiles = function getFiles() {\n      return store.query('GET_ACTIVE_ITEMS');\n    };\n\n    var processFile = function processFile(query) {\n      return new Promise(function(resolve, reject) {\n        store.dispatch('REQUEST_ITEM_PROCESSING', {\n          query: query,\n          success: function success(item) {\n            resolve(item);\n          },\n          failure: function failure(error) {\n            reject(error);\n          }\n        });\n      });\n    };\n\n    var prepareFiles = function prepareFiles() {\n      for (\n        var _len2 = arguments.length, args = new Array(_len2), _key2 = 0;\n        _key2 < _len2;\n        _key2++\n      ) {\n        args[_key2] = arguments[_key2];\n      }\n      var queries = Array.isArray(args[0]) ? args[0] : args;\n      var items = queries.length ? queries : getFiles();\n      return Promise.all(items.map(prepareFile));\n    };\n\n    var processFiles = function processFiles() {\n      for (\n        var _len3 = arguments.length, args = new Array(_len3), _key3 = 0;\n        _key3 < _len3;\n        _key3++\n      ) {\n        args[_key3] = arguments[_key3];\n      }\n      var queries = Array.isArray(args[0]) ? args[0] : args;\n      if (!queries.length) {\n        var files = getFiles().filter(function(item) {\n          return (\n            !(\n              item.status === ItemStatus.IDLE &&\n              item.origin === FileOrigin.LOCAL\n            ) &&\n            item.status !== ItemStatus.PROCESSING &&\n            item.status !== ItemStatus.PROCESSING_COMPLETE &&\n            item.status !== ItemStatus.PROCESSING_REVERT_ERROR\n          );\n        });\n\n        return Promise.all(files.map(processFile));\n      }\n      return Promise.all(queries.map(processFile));\n    };\n\n    var removeFiles = function removeFiles() {\n      for (\n        var _len4 = arguments.length, args = new Array(_len4), _key4 = 0;\n        _key4 < _len4;\n        _key4++\n      ) {\n        args[_key4] = arguments[_key4];\n      }\n\n      var queries = Array.isArray(args[0]) ? args[0] : args;\n\n      var options;\n      if (typeof queries[queries.length - 1] === 'object') {\n        options = queries.pop();\n      } else if (Array.isArray(args[0])) {\n        options = args[1];\n      }\n\n      var files = getFiles();\n\n      if (!queries.length)\n        return Promise.all(\n          files.map(function(file) {\n            return removeFile(file, options);\n          })\n        );\n\n      // when removing by index the indexes shift after each file removal so we need to convert indexes to ids\n      var mappedQueries = queries\n        .map(function(query) {\n          return isNumber(query)\n            ? files[query]\n              ? files[query].id\n              : null\n            : query;\n        })\n        .filter(function(query) {\n          return query;\n        });\n\n      return mappedQueries.map(function(q) {\n        return removeFile(q, options);\n      });\n    };\n\n    var exports = Object.assign(\n      {},\n\n      on(),\n      {},\n\n      readWriteApi,\n      {},\n\n      createOptionAPI(store, defaultOptions),\n      {\n        /**\n         * Override options defined in options object\n         * @param options\n         */\n        setOptions: setOptions,\n\n        /**\n         * Load the given file\n         * @param source - the source of the file (either a File, base64 data uri or url)\n         * @param options - object, { index: 0 }\n         */\n        addFile: addFile,\n\n        /**\n         * Load the given files\n         * @param sources - the sources of the files to load\n         * @param options - object, { index: 0 }\n         */\n        addFiles: addFiles,\n\n        /**\n         * Returns the file objects matching the given query\n         * @param query { string, number, null }\n         */\n        getFile: getFile,\n\n        /**\n         * Upload file with given name\n         * @param query { string, number, null  }\n         */\n        processFile: processFile,\n\n        /**\n         * Request prepare output for file with given name\n         * @param query { string, number, null  }\n         */\n        prepareFile: prepareFile,\n\n        /**\n         * Removes a file by its name\n         * @param query { string, number, null  }\n         */\n        removeFile: removeFile,\n\n        /**\n         * Moves a file to a new location in the files list\n         */\n        moveFile: function moveFile(query, index) {\n          return store.dispatch('MOVE_ITEM', { query: query, index: index });\n        },\n\n        /**\n         * Returns all files (wrapped in public api)\n         */\n        getFiles: getFiles,\n\n        /**\n         * Starts uploading all files\n         */\n        processFiles: processFiles,\n\n        /**\n         * Clears all files from the files list\n         */\n        removeFiles: removeFiles,\n\n        /**\n         * Starts preparing output of all files\n         */\n        prepareFiles: prepareFiles,\n\n        /**\n         * Sort list of files\n         */\n        sort: function sort(compare) {\n          return store.dispatch('SORT', { compare: compare });\n        },\n\n        /**\n         * Browse the file system for a file\n         */\n        browse: function browse() {\n          // needs to be trigger directly as user action needs to be traceable (is not traceable in requestAnimationFrame)\n          var input = view.element.querySelector('input[type=file]');\n          if (input) {\n            input.click();\n          }\n        },\n\n        /**\n         * Destroys the app\n         */\n        destroy: function destroy() {\n          // request destruction\n          exports.fire('destroy', view.element);\n\n          // stop active processes (file uploads, fetches, stuff like that)\n          // loop over items and depending on states call abort for ongoing processes\n          store.dispatch('ABORT_ALL');\n\n          // destroy view\n          view._destroy();\n\n          // stop listening to resize\n          window.removeEventListener('resize', resizeHandler);\n\n          // stop listening to the visiblitychange event\n          document.removeEventListener('visibilitychange', visibilityHandler);\n\n          // dispatch destroy\n          store.dispatch('DID_DESTROY');\n        },\n\n        /**\n         * Inserts the plugin before the target element\n         */\n        insertBefore: function insertBefore$1(element) {\n          return insertBefore(view.element, element);\n        },\n\n        /**\n         * Inserts the plugin after the target element\n         */\n        insertAfter: function insertAfter$1(element) {\n          return insertAfter(view.element, element);\n        },\n\n        /**\n         * Appends the plugin to the target element\n         */\n        appendTo: function appendTo(element) {\n          return element.appendChild(view.element);\n        },\n\n        /**\n         * Replaces an element with the app\n         */\n        replaceElement: function replaceElement(element) {\n          // insert the app before the element\n          insertBefore(view.element, element);\n\n          // remove the original element\n          element.parentNode.removeChild(element);\n\n          // remember original element\n          originalElement = element;\n        },\n\n        /**\n         * Restores the original element\n         */\n        restoreElement: function restoreElement() {\n          if (!originalElement) {\n            return; // no element to restore\n          }\n\n          // restore original element\n          insertAfter(originalElement, view.element);\n\n          // remove our element\n          view.element.parentNode.removeChild(view.element);\n\n          // remove reference\n          originalElement = null;\n        },\n\n        /**\n         * Returns true if the app root is attached to given element\n         * @param element\n         */\n        isAttachedTo: function isAttachedTo(element) {\n          return view.element === element || originalElement === element;\n        },\n\n        /**\n         * Returns the root element\n         */\n        element: {\n          get: function get() {\n            return view.element;\n          }\n        },\n\n        /**\n         * Returns the current pond status\n         */\n        status: {\n          get: function get() {\n            return store.query('GET_STATUS');\n          }\n        }\n      }\n    );\n\n    // Done!\n    store.dispatch('DID_INIT');\n\n    // create actual api object\n    return createObject(exports);\n  };\n\n  var createAppObject = function createAppObject() {\n    var customOptions =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    // default options\n    var defaultOptions = {};\n    forin(getOptions(), function(key, value) {\n      defaultOptions[key] = value[0];\n    });\n\n    // set app options\n    var app = createApp(\n      Object.assign(\n        {},\n\n        defaultOptions,\n        {},\n\n        customOptions\n      )\n    );\n\n    // return the plugin instance\n    return app;\n  };\n\n  var lowerCaseFirstLetter = function lowerCaseFirstLetter(string) {\n    return string.charAt(0).toLowerCase() + string.slice(1);\n  };\n\n  var attributeNameToPropertyName = function attributeNameToPropertyName(\n    attributeName\n  ) {\n    return toCamels(attributeName.replace(/^data-/, ''));\n  };\n\n  var mapObject = function mapObject(object, propertyMap) {\n    // remove unwanted\n    forin(propertyMap, function(selector, mapping) {\n      forin(object, function(property, value) {\n        // create regexp shortcut\n        var selectorRegExp = new RegExp(selector);\n\n        // tests if\n        var matches = selectorRegExp.test(property);\n\n        // no match, skip\n        if (!matches) {\n          return;\n        }\n\n        // if there's a mapping, the original property is always removed\n        delete object[property];\n\n        // should only remove, we done!\n        if (mapping === false) {\n          return;\n        }\n\n        // move value to new property\n        if (isString(mapping)) {\n          object[mapping] = value;\n          return;\n        }\n\n        // move to group\n        var group = mapping.group;\n        if (isObject(mapping) && !object[group]) {\n          object[group] = {};\n        }\n\n        object[group][\n          lowerCaseFirstLetter(property.replace(selectorRegExp, ''))\n        ] = value;\n      });\n\n      // do submapping\n      if (mapping.mapping) {\n        mapObject(object[mapping.group], mapping.mapping);\n      }\n    });\n  };\n\n  var getAttributesAsObject = function getAttributesAsObject(node) {\n    var attributeMapping =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    // turn attributes into object\n    var attributes = [];\n    forin(node.attributes, function(index) {\n      attributes.push(node.attributes[index]);\n    });\n\n    var output = attributes\n      .filter(function(attribute) {\n        return attribute.name;\n      })\n      .reduce(function(obj, attribute) {\n        var value = attr(node, attribute.name);\n\n        obj[attributeNameToPropertyName(attribute.name)] =\n          value === attribute.name ? true : value;\n        return obj;\n      }, {});\n\n    // do mapping of object properties\n    mapObject(output, attributeMapping);\n\n    return output;\n  };\n\n  var createAppAtElement = function createAppAtElement(element) {\n    var options =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    // how attributes of the input element are mapped to the options for the plugin\n    var attributeMapping = {\n      // translate to other name\n      '^class$': 'className',\n      '^multiple$': 'allowMultiple',\n      '^capture$': 'captureMethod',\n      '^webkitdirectory$': 'allowDirectoriesOnly',\n\n      // group under single property\n      '^server': {\n        group: 'server',\n        mapping: {\n          '^process': {\n            group: 'process'\n          },\n\n          '^revert': {\n            group: 'revert'\n          },\n\n          '^fetch': {\n            group: 'fetch'\n          },\n\n          '^restore': {\n            group: 'restore'\n          },\n\n          '^load': {\n            group: 'load'\n          }\n        }\n      },\n\n      // don't include in object\n      '^type$': false,\n      '^files$': false\n    };\n\n    // add additional option translators\n    applyFilters('SET_ATTRIBUTE_TO_OPTION_MAP', attributeMapping);\n\n    // create final options object by setting options object and then overriding options supplied on element\n    var mergedOptions = Object.assign({}, options);\n\n    var attributeOptions = getAttributesAsObject(\n      element.nodeName === 'FIELDSET'\n        ? element.querySelector('input[type=file]')\n        : element,\n      attributeMapping\n    );\n\n    // merge with options object\n    Object.keys(attributeOptions).forEach(function(key) {\n      if (isObject(attributeOptions[key])) {\n        if (!isObject(mergedOptions[key])) {\n          mergedOptions[key] = {};\n        }\n        Object.assign(mergedOptions[key], attributeOptions[key]);\n      } else {\n        mergedOptions[key] = attributeOptions[key];\n      }\n    });\n\n    // if parent is a fieldset, get files from parent by selecting all input fields that are not file upload fields\n    // these will then be automatically set to the initial files\n    mergedOptions.files = (options.files || []).concat(\n      Array.from(element.querySelectorAll('input:not([type=file])')).map(\n        function(input) {\n          return {\n            source: input.value,\n            options: {\n              type: input.dataset.type\n            }\n          };\n        }\n      )\n    );\n\n    // build plugin\n    var app = createAppObject(mergedOptions);\n\n    // add already selected files\n    if (element.files) {\n      Array.from(element.files).forEach(function(file) {\n        app.addFile(file);\n      });\n    }\n\n    // replace the target element\n    app.replaceElement(element);\n\n    // expose\n    return app;\n  };\n\n  // if an element is passed, we create the instance at that element, if not, we just create an up object\n  var createApp$1 = function createApp() {\n    return isNode(arguments.length <= 0 ? undefined : arguments[0])\n      ? createAppAtElement.apply(void 0, arguments)\n      : createAppObject.apply(void 0, arguments);\n  };\n\n  var PRIVATE_METHODS = ['fire', '_read', '_write'];\n\n  var createAppAPI = function createAppAPI(app) {\n    var api = {};\n\n    copyObjectPropertiesToObject(app, api, PRIVATE_METHODS);\n\n    return api;\n  };\n\n  /**\n   * Replaces placeholders in given string with replacements\n   * @param string - \"Foo {bar}\"\"\n   * @param replacements - { \"bar\": 10 }\n   */\n  var replaceInString = function replaceInString(string, replacements) {\n    return string.replace(/(?:{([a-zA-Z]+)})/g, function(match, group) {\n      return replacements[group];\n    });\n  };\n\n  var createWorker = function createWorker(fn) {\n    var workerBlob = new Blob(['(', fn.toString(), ')()'], {\n      type: 'application/javascript'\n    });\n\n    var workerURL = URL.createObjectURL(workerBlob);\n    var worker = new Worker(workerURL);\n\n    return {\n      transfer: function transfer(message, cb) {},\n      post: function post(message, cb, transferList) {\n        var id = getUniqueId();\n\n        worker.onmessage = function(e) {\n          if (e.data.id === id) {\n            cb(e.data.message);\n          }\n        };\n\n        worker.postMessage(\n          {\n            id: id,\n            message: message\n          },\n\n          transferList\n        );\n      },\n      terminate: function terminate() {\n        worker.terminate();\n        URL.revokeObjectURL(workerURL);\n      }\n    };\n  };\n\n  var loadImage = function loadImage(url) {\n    return new Promise(function(resolve, reject) {\n      var img = new Image();\n      img.onload = function() {\n        resolve(img);\n      };\n      img.onerror = function(e) {\n        reject(e);\n      };\n      img.src = url;\n    });\n  };\n\n  var renameFile = function renameFile(file, name) {\n    var renamedFile = file.slice(0, file.size, file.type);\n    renamedFile.lastModifiedDate = file.lastModifiedDate;\n    renamedFile.name = name;\n    return renamedFile;\n  };\n\n  var copyFile = function copyFile(file) {\n    return renameFile(file, file.name);\n  };\n\n  // already registered plugins (can't register twice)\n  var registeredPlugins = [];\n\n  // pass utils to plugin\n  var createAppPlugin = function createAppPlugin(plugin) {\n    // already registered\n    if (registeredPlugins.includes(plugin)) {\n      return;\n    }\n\n    // remember this plugin\n    registeredPlugins.push(plugin);\n\n    // setup!\n    var pluginOutline = plugin({\n      addFilter: addFilter,\n      utils: {\n        Type: Type,\n        forin: forin,\n        isString: isString,\n        isFile: isFile,\n        toNaturalFileSize: toNaturalFileSize,\n        replaceInString: replaceInString,\n        getExtensionFromFilename: getExtensionFromFilename,\n        getFilenameWithoutExtension: getFilenameWithoutExtension,\n        guesstimateMimeType: guesstimateMimeType,\n        getFileFromBlob: getFileFromBlob,\n        getFilenameFromURL: getFilenameFromURL,\n        createRoute: createRoute,\n        createWorker: createWorker,\n        createView: createView,\n        createItemAPI: createItemAPI,\n        loadImage: loadImage,\n        copyFile: copyFile,\n        renameFile: renameFile,\n        createBlob: createBlob,\n        applyFilterChain: applyFilterChain,\n        text: text,\n        getNumericAspectRatioFromString: getNumericAspectRatioFromString\n      },\n\n      views: {\n        fileActionButton: fileActionButton\n      }\n    });\n\n    // add plugin options to default options\n    extendDefaultOptions(pluginOutline.options);\n  };\n\n  // feature detection used by supported() method\n  var isOperaMini = function isOperaMini() {\n    return (\n      Object.prototype.toString.call(window.operamini) === '[object OperaMini]'\n    );\n  };\n  var hasPromises = function hasPromises() {\n    return 'Promise' in window;\n  };\n  var hasBlobSlice = function hasBlobSlice() {\n    return 'slice' in Blob.prototype;\n  };\n  var hasCreateObjectURL = function hasCreateObjectURL() {\n    return 'URL' in window && 'createObjectURL' in window.URL;\n  };\n  var hasVisibility = function hasVisibility() {\n    return 'visibilityState' in document;\n  };\n  var hasTiming = function hasTiming() {\n    return 'performance' in window;\n  }; // iOS 8.x\n  var hasCSSSupports = function hasCSSSupports() {\n    return 'supports' in (window.CSS || {});\n  }; // use to detect Safari 9+\n  var isIE11 = function isIE11() {\n    return /MSIE|Trident/.test(window.navigator.userAgent);\n  };\n\n  var supported = (function() {\n    // Runs immidiately and then remembers result for subsequent calls\n    var isSupported =\n      // Has to be a browser\n      isBrowser() &&\n      // Can't run on Opera Mini due to lack of everything\n      !isOperaMini() &&\n      // Require these APIs to feature detect a modern browser\n      hasVisibility() &&\n      hasPromises() &&\n      hasBlobSlice() &&\n      hasCreateObjectURL() &&\n      hasTiming() &&\n      // doesn't need CSSSupports but is a good way to detect Safari 9+ (we do want to support IE11 though)\n      (hasCSSSupports() || isIE11());\n\n    return function() {\n      return isSupported;\n    };\n  })();\n\n  /**\n   * Plugin internal state (over all instances)\n   */\n  var state = {\n    // active app instances, used to redraw the apps and to find the later\n    apps: []\n  };\n\n  // plugin name\n  var name = 'filepond';\n\n  /**\n   * Public Plugin methods\n   */\n  var fn = function fn() {};\n  exports.Status = {};\n  exports.FileStatus = {};\n  exports.FileOrigin = {};\n  exports.OptionTypes = {};\n  exports.create = fn;\n  exports.destroy = fn;\n  exports.parse = fn;\n  exports.find = fn;\n  exports.registerPlugin = fn;\n  exports.getOptions = fn;\n  exports.setOptions = fn;\n\n  // if not supported, no API\n  if (supported()) {\n    // start painter and fire load event\n    createPainter(\n      function() {\n        state.apps.forEach(function(app) {\n          return app._read();\n        });\n      },\n      function(ts) {\n        state.apps.forEach(function(app) {\n          return app._write(ts);\n        });\n      }\n    );\n\n    // fire loaded event so we know when FilePond is available\n    var dispatch = function dispatch() {\n      // let others know we have area ready\n      document.dispatchEvent(\n        new CustomEvent('FilePond:loaded', {\n          detail: {\n            supported: supported,\n            create: exports.create,\n            destroy: exports.destroy,\n            parse: exports.parse,\n            find: exports.find,\n            registerPlugin: exports.registerPlugin,\n            setOptions: exports.setOptions\n          }\n        })\n      );\n\n      // clean up event\n      document.removeEventListener('DOMContentLoaded', dispatch);\n    };\n\n    if (document.readyState !== 'loading') {\n      // move to back of execution queue, FilePond should have been exported by then\n      setTimeout(function() {\n        return dispatch();\n      }, 0);\n    } else {\n      document.addEventListener('DOMContentLoaded', dispatch);\n    }\n\n    // updates the OptionTypes object based on the current options\n    var updateOptionTypes = function updateOptionTypes() {\n      return forin(getOptions(), function(key, value) {\n        exports.OptionTypes[key] = value[1];\n      });\n    };\n\n    exports.Status = Object.assign({}, Status);\n    exports.FileOrigin = Object.assign({}, FileOrigin);\n    exports.FileStatus = Object.assign({}, ItemStatus);\n\n    exports.OptionTypes = {};\n    updateOptionTypes();\n\n    // create method, creates apps and adds them to the app array\n    exports.create = function create() {\n      var app = createApp$1.apply(void 0, arguments);\n      app.on('destroy', exports.destroy);\n      state.apps.push(app);\n      return createAppAPI(app);\n    };\n\n    // destroys apps and removes them from the app array\n    exports.destroy = function destroy(hook) {\n      // returns true if the app was destroyed successfully\n      var indexToRemove = state.apps.findIndex(function(app) {\n        return app.isAttachedTo(hook);\n      });\n      if (indexToRemove >= 0) {\n        // remove from apps\n        var app = state.apps.splice(indexToRemove, 1)[0];\n\n        // restore original dom element\n        app.restoreElement();\n\n        return true;\n      }\n\n      return false;\n    };\n\n    // parses the given context for plugins (does not include the context element itself)\n    exports.parse = function parse(context) {\n      // get all possible hooks\n      var matchedHooks = Array.from(context.querySelectorAll('.' + name));\n\n      // filter out already active hooks\n      var newHooks = matchedHooks.filter(function(newHook) {\n        return !state.apps.find(function(app) {\n          return app.isAttachedTo(newHook);\n        });\n      });\n\n      // create new instance for each hook\n      return newHooks.map(function(hook) {\n        return exports.create(hook);\n      });\n    };\n\n    // returns an app based on the given element hook\n    exports.find = function find(hook) {\n      var app = state.apps.find(function(app) {\n        return app.isAttachedTo(hook);\n      });\n      if (!app) {\n        return null;\n      }\n      return createAppAPI(app);\n    };\n\n    // adds a plugin extension\n    exports.registerPlugin = function registerPlugin() {\n      for (\n        var _len = arguments.length, plugins = new Array(_len), _key = 0;\n        _key < _len;\n        _key++\n      ) {\n        plugins[_key] = arguments[_key];\n      }\n\n      // register plugins\n      plugins.forEach(createAppPlugin);\n\n      // update OptionTypes, each plugin might have extended the default options\n      updateOptionTypes();\n    };\n\n    exports.getOptions = function getOptions$1() {\n      var opts = {};\n      forin(getOptions(), function(key, value) {\n        opts[key] = value[0];\n      });\n      return opts;\n    };\n\n    exports.setOptions = function setOptions$1(opts) {\n      if (isObject(opts)) {\n        // update existing plugins\n        state.apps.forEach(function(app) {\n          app.setOptions(opts);\n        });\n\n        // override defaults\n        setOptions(opts);\n      }\n\n      // return new options\n      return exports.getOptions();\n    };\n  }\n\n  exports.supported = supported;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n});\n"],"sourceRoot":""}