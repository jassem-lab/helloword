(this["webpackJsonpportfolio-app"]=this["webpackJsonpportfolio-app"]||[]).push([[11],{306:function(e,t,a){"use strict";a.r(t);var l=a(2),c=a(8),r=a.n(c),n=a(14),i=a(0),s=a.n(i),o=a(26),m=a(277),u=(a(145),a(278),a(279)),d=a.n(u),p=a(280),b=a.n(p),g=a(281),k=a.n(g),E=a(282),A=a.n(E);a(283);Object(m.registerPlugin)(d.a,b.a,k.a,A.a);var f=function(e){var t=Object(i.useState)([]),a=Object(o.a)(t,2),l=a[0],c=a[1];return s.a.createElement("div",{className:"filePondWorks wrapper"},s.a.createElement("form",{action:"/api/articles/addPhoto",method:"POST"},s.a.createElement("h2",{className:"editImageDataTitle"},"Add main article image"),s.a.createElement("div",{className:"editImgData"},s.a.createElement("div",{className:"editInput imgInput"},s.a.createElement("label",{htmlFor:"descr"},"Description: "),s.a.createElement("input",{type:"text",name:"descr"})),0!==e.articles.length?s.a.createElement("div",{className:"editInput imgInput hideInput"},s.a.createElement("label",{htmlFor:"owner"},"Owner: "),s.a.createElement("input",{type:"text",name:"owner",defaultValue:e.articles[e.articles.length-1]._id})):null,s.a.createElement("div",{className:"editFontStyle"},s.a.createElement("label",{htmlFor:"type"},"Type: "),s.a.createElement("select",{name:"type"},s.a.createElement("option",{value:"articlePreview"},"articlePreview")))),s.a.createElement("div",{className:"filePondArea"},s.a.createElement(m.FilePond,{setOptions:{stylePanelAspectRatio:1.5,imageResizeTargetWidth:100,imageResizeTargetHight:150},files:l,onupdatefiles:c,allowMultiple:!1,maxFiles:1,name:"img",labelIdle:'Drag & Drop your files or <span class="filepond--label-action">Browse</span>'}),s.a.createElement("div",{className:"buttonPage"},s.a.createElement("button",{type:"submit"},"Save"))),s.a.createElement("div",null,e.loading?"loading...":null)))},I=a(272),h=a(271),v=Object(h.a)({form:"updateArticleData"})((function(e){return s.a.createElement("form",{onSubmit:e.handleSubmit,className:"wrapper"},s.a.createElement("h2",{className:"editImageDataTitle"},"Article blocks part"),s.a.createElement("div",{className:"editInput articleBlockTitle articleBlockMargin"},s.a.createElement("label",{htmlFor:"title"},"Title of the block: "),s.a.createElement(I.a,{placeholder:"Block title",name:"title",component:"input"}),s.a.createElement("label",{htmlFor:"titlePosition"},"Position of the title: "),s.a.createElement("div",{className:"editFontStyle"},s.a.createElement(I.a,{name:"titlePosition",component:"select"},s.a.createElement("option",null,"Left"),s.a.createElement("option",null,"Right"),s.a.createElement("option",null,"Center"))),s.a.createElement("button",null,"add")),s.a.createElement("div",{className:"editAboutProject"},s.a.createElement(I.a,{name:"text",component:"textarea",placeholder:"Enter your text of the block",rows:"10"})))}));Object(m.registerPlugin)(d.a,b.a,k.a,A.a);var x=function(e){var t=Object(i.useState)([]),a=Object(o.a)(t,2),l=a[0],c=a[1];return s.a.createElement("div",{className:"filePondWorks wrapper"},s.a.createElement("form",{action:"/api/articles/block/addPhoto",method:"POST"},s.a.createElement("h2",{className:"editImageDataTitle"},"Add image for block if necessary"),s.a.createElement("div",{className:"editImgData"},s.a.createElement("div",{className:"editInput imgInput"},s.a.createElement("label",{htmlFor:"descr"},"Description: "),s.a.createElement("input",{type:"text",name:"descr"})),s.a.createElement("div",{className:"editInput imgInput"},s.a.createElement("label",{htmlFor:"imgWidth"},"Width: "),s.a.createElement("input",{type:"text",name:"imgWidth"})),s.a.createElement("div",{className:"editFontStyle"},s.a.createElement("label",{htmlFor:"imgPositioning"},"Position: "),s.a.createElement("select",{name:"imgPositioning"},s.a.createElement("option",{value:"auto"},"auto"),s.a.createElement("option",{value:"unset"},"left"))),0!==e.articles.length?s.a.createElement("div",{className:"editInput imgInput hideInput"},s.a.createElement("label",{htmlFor:"owner"},"Owner: "),s.a.createElement("input",{type:"text",name:"articleOwner",defaultValue:e.articles[e.articles.length-1]._id})):null,0!==e.blocks.length?s.a.createElement("div",{className:"editInput imgInput hideInput"},s.a.createElement("label",{htmlFor:"owner"},"Owner: "),s.a.createElement("input",{type:"text",name:"blockOwner",value:e.blocks[e.blocks.length-1]._id,onChange:function(){console.log()}})):null,s.a.createElement("div",{className:"editFontStyle"},s.a.createElement("label",{htmlFor:"type"},"Type: "),s.a.createElement("select",{name:"type"},s.a.createElement("option",{value:"articleBlock"},"articleBlock")))),s.a.createElement("div",{className:"filePondArea"},s.a.createElement(m.FilePond,{setOptions:{stylePanelAspectRatio:1.5,imageResizeTargetWidth:100,imageResizeTargetHight:150},files:l,onupdatefiles:c,allowMultiple:!1,maxFiles:1,name:"img",labelIdle:'Drag & Drop your files or <span class="filepond--label-action">Browse</span>'}),s.a.createElement("div",{className:"buttonPage"},s.a.createElement("button",{type:"submit"},"Save"))),s.a.createElement("div",null,e.loading?"loading...":null)))},B=(a(89),function(e){var t=function(){console.log()},a=e.articles.filter((function(t){return e.currentArticleId===t._id})).map((function(t){var a=0!==e.articleImages.length&&"data:".concat(e.articleImages[0].imgType,";charset=utf-8;base64,").concat(e.articleImages[0].img.toString("base64"));return s.a.createElement("div",{className:"blogArticle",key:t._id},s.a.createElement("h1",null,t.articleName),s.a.createElement("hr",null),s.a.createElement("div",{className:"dateViews"},s.a.createElement("p",{className:"date"},"By Amir Aimurzayev on ",t.articleDate)),0!==e.articleImages.length&&s.a.createElement("img",{src:a,alt:e.articleImages[0].descr}))})),l=e.blocks.map((function(a){var l=e.blocksImages.map((function(e){var t="data:".concat(e.imgType,";charset=utf-8;base64,").concat(e.img.toString("base64"));return s.a.createElement("div",{key:e._id,className:"articleBlock"},e.blockOwner===a._id&&s.a.createElement("img",{style:{marginLeft:e.imgPositioning,marginRight:e.imgPositioning,width:e.imgWidth},src:t,alt:e.descr}))})),c=e.blocksLists.map((function(e){return s.a.createElement("div",{key:e._id},e.blockOwner===a._id&&s.a.createElement("li",null,e.title))})),r=e.blocksTextAreas.map((function(e){return s.a.createElement("div",{key:e._id},e.blockOwner===a._id&&s.a.createElement("textarea",{className:"blockTextArea",name:"blockTextArea",id:"",rows:"12",value:e.text,onChange:t}))}));return s.a.createElement("div",{key:a._id,className:"articleBlock"},l,a.title&&s.a.createElement("h3",{style:{textAlign:a.titlePosition}},a.title),s.a.createElement("ul",{className:"articleList"},c),a.text&&s.a.createElement("p",null,a.text),r)}));return s.a.createElement("div",{className:"articleReadMore wrapper"},s.a.createElement("div",{className:"blogOverlay"},a,s.a.createElement("div",{className:"blogArticle"},l)))}),T=Object(h.a)({form:"updateArticleBlockListItems"})((function(e){return s.a.createElement("form",{onSubmit:e.handleSubmit,className:"articleBlockAdditionalData wrapper"},s.a.createElement("h2",{className:"editImageDataTitle"},"Add block list items"),s.a.createElement("div",{className:"editInput articleBlockTitle articleBlockMargin"},s.a.createElement("label",{htmlFor:"title"},"Title of the block: "),s.a.createElement(I.a,{placeholder:"Block title",name:"title",component:"input"}),s.a.createElement("button",null,"add")))})),w=Object(h.a)({form:"updateArticleBlockTextArea"})((function(e){return s.a.createElement("form",{onSubmit:e.handleSubmit,className:"articleBlockAdditionalData wrapper"},s.a.createElement("h2",{className:"editImageDataTitle"},"Add block list items"),s.a.createElement("div",{className:"editAboutProject articleBlockTitle articleBlockMargin"},s.a.createElement("label",{htmlFor:"text"},"Title of the block: "),s.a.createElement(I.a,{name:"text",component:"textarea",placeholder:"Enter your text of the block",rows:"10"}),s.a.createElement("button",null,"add")))})),N=function(e){return s.a.createElement("div",{className:"UpdateLatestArticleData"},s.a.createElement(f,{articles:e.articles}),s.a.createElement(B,{currentArticleId:e.currentArticleId,articles:e.articles,articleImages:e.articleImages,blocks:e.blocks,blocksImages:e.blocksImages,blocksLists:e.blocksLists,blocksTextAreas:e.blocksTextAreas}),s.a.createElement(v,{onSubmit:e.addArticleBlock}),s.a.createElement(T,{onSubmit:e.addArticleBlockListItem}),s.a.createElement(w,{onSubmit:e.addArticleBlockTextArea}),s.a.createElement(x,{articles:e.articles,blocks:e.blocks}))},O=a(9),y=a(22),P=a(15);t.default=Object(O.b)((function(e){return{allArticles:e.articles.articles,currentArticleId:e.articles.currentArticleId,articleImages:e.articles.images,blocks:e.articles.blocks,currentBlockId:e.articles.currentBlockId,blocksImages:e.articles.blocksImages,blocksLists:e.articles.blocksLists,blocksTextAreas:e.articles.blocksTextAreas}}),{setArticleId:P.f,setArticles:P.h,setArticlesMainImages:P.i,setArticleBlocks:P.b,setCurrentBlockId:P.j,setArticleBlocksImages:P.c,setArticleBlocksLists:P.d,setArticleBlocksTextAreas:P.e})((function(e){var t=Object(y.a)().request;Object(i.useEffect)((function(){(function(){var a=Object(n.a)(r.a.mark((function a(){var l,c,n,i,s,o,m,u;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t("/api/articles","GET",null);case 2:if(l=a.sent,e.setArticles(l),null!==l.length&&(c=l[l.length-1]._id,e.setArticleId(c)),null===e.currentArticleId){a.next=28;break}return a.next=8,t("/api/articles/getArticleMainImages/".concat(e.currentArticleId),"GET",null);case 8:return n=a.sent,e.setArticlesMainImages(n),a.next=12,t("/api/articles/getArticleBlockData/".concat(e.currentArticleId),"GET",null);case 12:return i=a.sent,s=i[i.length-1]._id,e.setCurrentBlockId(s),e.setArticleBlocks(i),a.next=18,t("/api/articles/getArticleBlockImages/".concat(e.currentArticleId),"GET",null);case 18:return o=a.sent,e.setArticleBlocksImages(o),a.next=22,t("/api/articles/getArticleBlockLists/".concat(e.currentArticleId),"GET",null);case 22:return m=a.sent,e.setArticleBlocksLists(m),a.next=26,t("/api/articles/getArticleBlockTextAreas/".concat(e.currentArticleId),"GET",null);case 26:u=a.sent,e.setArticleBlocksTextAreas(u);case 28:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}})()()}),[e.currentArticleId]);var a=function(){var a=Object(n.a)(r.a.mark((function a(c){var n,i;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t("/api/articles/createArticleBlock","POST",Object(l.a)(Object(l.a)({},c),{},{owner:e.currentArticleId}));case 2:return a.next=4,t("/api/articles/getArticleBlockData/".concat(e.currentArticleId),"GET",null);case 4:n=a.sent,i=n[n.length-1]._id,e.setCurrentBlockId(i),e.setArticleBlocks(n),c.title=null,c.text=null;case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),c=function(){var a=Object(n.a)(r.a.mark((function a(c){var n,i;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t("/api/articles/createArticleBlockList","POST",Object(l.a)(Object(l.a)({},c),{},{articleOwner:e.currentArticleId,blockOwner:e.currentBlockId}));case 2:return a.next=4,t("/api/articles/getArticleBlockLists/".concat(e.currentArticleId),"GET",null);case 4:return n=a.sent,e.setArticleBlocksLists(n),a.next=8,t("/api/articles/getArticleBlockTextAreas/".concat(e.currentArticleId),"GET",null);case 8:i=a.sent,e.setArticleBlocksTextAreas(i),c.title=null;case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),o=function(){var a=Object(n.a)(r.a.mark((function a(c){var n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t("/api/articles/createArticleBlockTextArea","POST",Object(l.a)(Object(l.a)({},c),{},{articleOwner:e.currentArticleId,blockOwner:e.currentBlockId}));case 2:return a.next=4,t("/api/articles/getArticleBlockTextAreas/".concat(e.currentArticleId),"GET",null);case 4:n=a.sent,e.setArticleBlocksTextAreas(n),c.text=null;case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return s.a.createElement("div",null,s.a.createElement(N,{currentArticleId:e.currentArticleId,articles:e.allArticles,articleImages:e.articleImages,blocks:e.blocks,blocksImages:e.blocksImages,blocksLists:e.blocksLists,blocksTextAreas:e.blocksTextAreas,addArticleBlock:a,addArticleBlockListItem:c,addArticleBlockTextArea:o}))}))}}]);
//# sourceMappingURL=11.ec790967.chunk.js.map